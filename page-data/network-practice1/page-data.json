{"componentChunkName":"component---src-templates-blog-template-js","path":"/network-practice1/","result":{"data":{"cur":{"id":"3a2ba688-9f6b-5255-8014-cb170f8bfe48","html":"<h3 id=\"리눅스의-네트워크-처리\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4%EC%9D%98-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EC%B2%98%EB%A6%AC\" aria-label=\"리눅스의 네트워크 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리눅스의 네트워크 처리</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABrUlEQVQoz4WSzW7TQBSF/Ti8CmLDnj0LtiyRQGLHqq/QDVKligUqEgLRFmiVxnE9SciPAEVpyK8bO45nEtfOJPaHnMTJAgEjfbpHuqOje+6MMfj4kKl4xo++Ta17SatX5WvZ4XPFYTyqsAwsEilIpE2i/o8xeP8Y33xF62eJZv0T7VqBYrGDaXXx2gLtmCRKkGZIm1SKf2KoRh1ZryLtS4LTE/wPb5iLc8JGAVU1CZpXLCaljaHaTipzLf7QhueO8D2HwbBL83uDWrNGr/cLz7vFdW/xxy20b65Nc7N8BcwFqGu0XyQJSqTSwtBTQU48uSYeXaGDMktZQcvKuqbzMqvAJhoXYZYZ2RBWGHYE0mtDOkXHDjpyMFJlk8FMsBxcoNun6M45i5szFpm+OUP3L0AJFlObckNgfhMM+lUm7pBuz6Gv5jw6OODp4SHGLoISrHyL1aS0x9vUxLd2cZUrkGNB6NlARG/o8OTFc+49uM/Lo9cYidrvZL34WU55r1Xe3yTJYmcvThIRhhHHJ+94W/hCdjaRt5c33+IvbPvJDsHiziddLYnju7XZUsf8BiJ/j391HVkcAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/090ddcc2b123a24dfc27b63d0399bb0f/37523/image1.png\"\n        srcset=\"/static/090ddcc2b123a24dfc27b63d0399bb0f/e9ff0/image1.png 180w,\n/static/090ddcc2b123a24dfc27b63d0399bb0f/f21e7/image1.png 360w,\n/static/090ddcc2b123a24dfc27b63d0399bb0f/37523/image1.png 720w,\n/static/090ddcc2b123a24dfc27b63d0399bb0f/302a4/image1.png 1080w,\n/static/090ddcc2b123a24dfc27b63d0399bb0f/07a9c/image1.png 1440w,\n/static/090ddcc2b123a24dfc27b63d0399bb0f/bf9ea/image1.png 2716w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>리눅스 OS는 네트워크 카드를 포함한 하드웨어를 관리하는 역할을 한다.\nOS 위에서 실행되는 application이 하드웨어(여기선 네트웍) 사용하기 위해서는 Linux kernel에 systemcall을 보내야 하고, 가장 많이 open, read, write와 같은 systemcall이 사용된다.\n<br>\n<br>\n네트웍 자원을 사용할 때는 open대신 socket이라는 systemcall을 사용하게 되며 read 명령은 receive, write명령은 send의 역할을 하게 된다.\n이외에도 네트워크 처리함수들은 Linux kernel에 내장되어 있다.\n<br>\n<br>\nL2~L4의 처리를 리눅스의 네트웍 함수들을 사용하여 소프트웨어적으로 처리할 수도 있지만 하드웨어에 내장된 기능을 통해 ‘하드웨어 오프로드’로 더 빨리 처리할수도 있다.\n<br>\nEthernet frame에서 붙는 mac주소의 destination은 내부망(LAN)에서는 실제 목적지 컴퓨터의 mac주소가 맞지만, WAN에서는 Gateway의 mac주소가 destination이 되어 나간다.</p>\n<ul>\n<li>관련 명령어\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># 현재 network card 정보 확인하기\nsudo lshw -C network\n\n# 제조 회사 확인하기\nsudo lshw -C network | grep vendor</code></pre></div>\n</li>\n</ul>\n<h3 id=\"http-통신\" style=\"position:relative;\"><a href=\"#http-%ED%86%B5%EC%8B%A0\" aria-label=\"http 통신 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTTP 통신</h3>\n<ul>\n<li>curl 명령을 통한 http request Get 요청 header (-I option)\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -vI www.google.com 2>&amp;1 | grep \"> \"</code></pre></div>\n</li>\n<li>curl 명령을 통한 http response Get 응답 header (-I option)\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">curl -vI www.google.com 2>&amp;1 | grep \"&lt; \"</code></pre></div>\n</li>\n</ul>","excerpt":"리눅스의 네트워크 처리  리눅스 OS는 네트워크 카드를 포함한 하드웨어를 관리하는 역할을 한다.\nOS 위에서 실행되는 application이 하드웨어(여기선 네트웍) 사용하기 위해서는 Linux kernel에 systemcall을 보내야 하고, 가장 많이 open, read, write와 같은 systemcall이 사용된다.\n\n\n네트웍 자원을 사용할 때는 open대신 socket이라는 systemcall을 사용하게 되며 read 명령은 receive, write명령은 send의 역할을 하게 된다.\n이외에도 네트워크 처리함수들은 Linux kernel에 내장되어 있다.\n\n\nL2~L4의 처리를 리눅스의 네트웍 함수들을 사용하여 소프트웨어적으로 처리할 수도 있지만 하드웨어에 내장된 기능을 통해 ‘하드웨어 오프로드’로 더 빨리 처리할수도 있다.\n\nEthernet frame에서 붙는 mac주소의 destination은 내부망(LAN)에서는 실제 목적지 컴퓨터의 mac주소가 맞지만, WAN에…","frontmatter":{"date":"January 19, 2024","title":"리눅스 네트워크 처리와 http통신","categories":"Linux","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/network-practice1/"}},"next":{"id":"ec0819e9-a324-5eca-9143-f54c4eaf286b","html":"<h2 id=\"문제란-무엇인가\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C%EB%9E%80-%EB%AC%B4%EC%97%87%EC%9D%B8%EA%B0%80\" aria-label=\"문제란 무엇인가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제란 무엇인가?</h2>\n<ul>\n<li>문제란 목표와 현 상황의 차이(Gap)이다.</li>\n<li>따라서 단순히 에러 메시지가 어떻다에서 그치지 않고 목표를 정확하게 잘 정의하는 것이 중요하다.</li>\n</ul>\n<h3 id=\"문제-해결의-다양한-접근-방법-1--문제의-현상과-원인은-다르다\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%EC%9D%98-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EB%B2%95-1--%EB%AC%B8%EC%A0%9C%EC%9D%98-%ED%98%84%EC%83%81%EA%B3%BC-%EC%9B%90%EC%9D%B8%EC%9D%80-%EB%8B%A4%EB%A5%B4%EB%8B%A4\" aria-label=\"문제 해결의 다양한 접근 방법 1  문제의 현상과 원인은 다르다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 해결의 다양한 접근 방법 1 : “문제의 현상과 원인은 다르다”</h3>\n<p>예를 들어 보자.</p>\n<ul>\n<li>문제의 현상 : 파일 생성 오류</li>\n<li>파일 생성 오류가 나는 것은 root cause가 아니라 현상이다. 따라서 이에 대한 원인을 하나씩 찾아나가는 것이 중요하다.</li>\n</ul>\n<h3 id=\"문제-해결의-다양한-접근-방법-2--잘게-쪼개고-구체화하라\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%EC%9D%98-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EB%B2%95-2--%EC%9E%98%EA%B2%8C-%EC%AA%BC%EA%B0%9C%EA%B3%A0-%EA%B5%AC%EC%B2%B4%ED%99%94%ED%95%98%EB%9D%BC\" aria-label=\"문제 해결의 다양한 접근 방법 2  잘게 쪼개고 구체화하라 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 해결의 다양한 접근 방법 2 : “잘게 쪼개고 구체화하라”</h3>\n<ul>\n<li>절차, 단계, 열거, 관찰, 점검을 통해 문제를 해결한다.\n<ul>\n<li>리눅스 / 네트웍이 어떻게 원래 돌아가는 지 알아야 절차와 단계, 열거를 할 수 있다.</li>\n<li>이게 가능하기 위해서는 2~3 depth까지는 현상 뿐만이 아니라 원리(왜 되는지?) 에 대해서 알아야 한다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"문제-해결의-다양한-접근-방법-3--연역적-접근-vs-귀납적-접근\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%EC%9D%98-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EB%B2%95-3--%EC%97%B0%EC%97%AD%EC%A0%81-%EC%A0%91%EA%B7%BC-vs-%EA%B7%80%EB%82%A9%EC%A0%81-%EC%A0%91%EA%B7%BC\" aria-label=\"문제 해결의 다양한 접근 방법 3  연역적 접근 vs 귀납적 접근 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 해결의 다양한 접근 방법 3 : “연역적 접근 vs 귀납적 접근”</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 47.77777777777777%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACG0lEQVQozzWS7VPaQBDG8/9/6yft1NHWYaxFOrRVsSpaRuU1BEIBwYojqJQBgyG5BIHA/Tq51A83e/vs7vPs3p4mHR1cncWwiFu7QpgXiHqWYFRU+FtcOmV1wvvMMnho3NKrdeg1/igfEeVoquDVJBibuEYBp5hFVEssX6owrSpCReS8kZeYPhu0cl3qZz3ahR7+6I1QR5Numde7A/zmF/x2AnEdZ9raw2vuMbs/IoyrDkPrmSCqBLZO4OjM7QIrV49w1wC3HBF6jTiT/Dov+fdY2TUmhXWs/Ae8VjLqUJEWGbW2GTRjBKNTuuU1FsNj7LsET7UNluML5lYWDa+CDFWdCku3wmJisHTDcWsgKkpVETolxMM33P5PAjvH+D7J4uUKf5jG7R8gRZmlXUTr1zcYND8RPJ/QKb5jNkhh3X7mwVwnCFXHuf9vF43sXydwqtvY1RjD0kdEfRevvoPf/hotZdo/Yvb3hNX4EvF4yHJ8yXyQxn9MsXrJsxrnI0JhsLILuGYMUd5E6JtYuQ2EvqV87/cOS7uERu8XdE6gdw5+DSZluDtF4fdp6BzDUwY5KSG9CkxNGOagex7lWQWY18Gvqp+gyVoS2fiBDIteTeTgAmkmkfXvSD0e2cKuyqF1CP0MtFNwFUNe70eiZhLCOmGgYSTgJhUFnjKRDQsGl9A7i7oLsW5aWWnlkc195PkWshRH3qSi08+o5f0DSmrPYGQVu64AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/8390c62d1f2600f41892215b91c151b0/37523/image1.png\"\n        srcset=\"/static/8390c62d1f2600f41892215b91c151b0/e9ff0/image1.png 180w,\n/static/8390c62d1f2600f41892215b91c151b0/f21e7/image1.png 360w,\n/static/8390c62d1f2600f41892215b91c151b0/37523/image1.png 720w,\n/static/8390c62d1f2600f41892215b91c151b0/302a4/image1.png 1080w,\n/static/8390c62d1f2600f41892215b91c151b0/07a9c/image1.png 1440w,\n/static/8390c62d1f2600f41892215b91c151b0/74d4a/image1.png 2422w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>연역적 접근 방식 만으로는 변수와 예외가 너무 많기에 해결이 안될 수도 있다. 따라서 경험을 기반으로 한 귀납적 접근 방식을 통한 해결 도출이 필요할 수 있다.</li>\n<li>그러나 문제의 scope을 결정 짓기 위해서는 연역적 접근 방식이 매우 도움이 된다.</li>\n</ul>\n<h3 id=\"문제-해결의-다양한-접근-방법-4--근본원인--root-cause--를-찾자\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%A0%9C-%ED%95%B4%EA%B2%B0%EC%9D%98-%EB%8B%A4%EC%96%91%ED%95%9C-%EC%A0%91%EA%B7%BC-%EB%B0%A9%EB%B2%95-4--%EA%B7%BC%EB%B3%B8%EC%9B%90%EC%9D%B8--root-cause--%EB%A5%BC-%EC%B0%BE%EC%9E%90\" aria-label=\"문제 해결의 다양한 접근 방법 4  근본원인  root cause  를 찾자 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문제 해결의 다양한 접근 방법 4 : “근본원인 ( root cause ) 를 찾자”</h3>\n<p>문제의 현상이 아니라 현상 기저의 원인이 무엇인지 찾아내야 한다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 48.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB10lEQVQoz32S3VPTQBTF8/8/OfoP+OA4ODp+8DXOyIh2Skh2N03TJA0FgZIGS0PSlhCKBcrP6YY44qgPZ8592Hvv2XuOcX8h+RcolIauLyX3heB2bGvshZJdSzHst1hMbeaZxWIqMB4PqZoXGqriqc3hSZ9tecGnZo6IcrJhwE1uU5xJbsYPiy+V7jcoJY9QOHDlVPVyycQiOk54v33N6ueYhp+TjXpQ2noIhdQ8zwXJkcSY9EzyfZNsz2Q+EIzTBp39LVx/GzfaIk+/kCURSrqYpkU3iChTV59gMa1U3U4E+cCkOBMYw9drfF95S/LyHaUw8Y7XeLr5nCdvXvHs4wucow8kKsBZdfE3W7TXPfLYh1JUCi8FvcBCKUUaK4zrbpN5t8GPbpOb2CZPG0T9dQ7iDfZONjgffWXadzgN25xFHmnU4WrU1gqzRNILLQaHknIkmOcSg5nD/cxhyZTLjUtefsmtWJtjcvrNpaN8fMelbfvkcYs0tgk7Nung4eaF+tNl+ZvLFe4mguvzHY5CD7vRxTEDrEZAdtKGmfxlTJ0Q4385rLN4O96lH3WQOxGuFSKaIVnc1qpqY+qhRh3ev6EeeDexSA58XCvAE57mSeJpY2pl1XvFTyyA0whrPNEbAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/713832b37ab33908772eb1df09cd2dd7/37523/image2.png\"\n        srcset=\"/static/713832b37ab33908772eb1df09cd2dd7/e9ff0/image2.png 180w,\n/static/713832b37ab33908772eb1df09cd2dd7/f21e7/image2.png 360w,\n/static/713832b37ab33908772eb1df09cd2dd7/37523/image2.png 720w,\n/static/713832b37ab33908772eb1df09cd2dd7/302a4/image2.png 1080w,\n/static/713832b37ab33908772eb1df09cd2dd7/07a9c/image2.png 1440w,\n/static/713832b37ab33908772eb1df09cd2dd7/b77b1/image2.png 2408w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<hr>\n<h2 id=\"리눅스-패키지\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4-%ED%8C%A8%ED%82%A4%EC%A7%80\" aria-label=\"리눅스 패키지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리눅스 패키지</h2>\n<h3 id=\"패키지란-\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80%EB%9E%80-\" aria-label=\"패키지란  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지란 ?</h3>\n<ul>\n<li>다양한 프로그램들을 어떻게 관리할 것인가?</li>\n<li>ex) vim 패키지 : vim 프로그램을 위한 여러가지 파일들의 ‘묶음’ 이다.</li>\n</ul>\n<h4 id=\"배포판-버전과-코드명을-확인하는-방법\" style=\"position:relative;\"><a href=\"#%EB%B0%B0%ED%8F%AC%ED%8C%90-%EB%B2%84%EC%A0%84%EA%B3%BC-%EC%BD%94%EB%93%9C%EB%AA%85%EC%9D%84-%ED%99%95%EC%9D%B8%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\" aria-label=\"배포판 버전과 코드명을 확인하는 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>배포판 버전과 코드명을 확인하는 방법</h4>\n<ul>\n<li>배포판에 따라 코드명이 달라지고 이에 따른 문제가 발생할 수 있다. 따라서 배포판을 확인하는 것은 중요하다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">lsbrelease <span class=\"token parameter variable\">-a</span>\n<span class=\"token function\">cat</span> /etc/issue\n<span class=\"token function\">cat</span> /etc/os-release</code></pre></div>\n<h4 id=\"apt와-apt-get의-차이점\" style=\"position:relative;\"><a href=\"#apt%EC%99%80-apt-get%EC%9D%98-%EC%B0%A8%EC%9D%B4%EC%A0%90\" aria-label=\"apt와 apt get의 차이점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>apt와 apt-get의 차이점</h4>\n<ul>\n<li>apt는 apt-get, apt-cache 를 한 번에 다룰 수 있게 사용자 편리 목적으로 만들어진 것이다.</li>\n<li>apt는 내부적으로 apt-get을 사용하게 되고 apt-get을 사용 시 세부적인 옵션까지 더 활용가능 하다.</li>\n</ul>\n<h4 id=\"yumrpm-vs-aptdpkg-비교\" style=\"position:relative;\"><a href=\"#yumrpm-vs-aptdpkg-%EB%B9%84%EA%B5%90\" aria-label=\"yumrpm vs aptdpkg 비교 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>yum,rpm vs apt,dpkg 비교</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACH0lEQVQoz3WSWXOiYBRE/f9/aBYVFPhYjUbcZVEQERVRjMZUajJnSqjK2zz0262u0327cVw1+bOW+IpkPlKFXdonigckkcNnLuBmw5vFOVQoA433jUkxU0n1DidHI++bOJMFvXnAMIhpPPYGZaRyjTVKX+M0U7l5OsfAIVi9EkUjsnRMvuiSuRKlLzi5KuvfbXJVcDRsmo6HNIyx/ILGWyQo5mp1uFVlVj/bZC2JqTFEmh5R5wUv/o6zr1J6Go/YohhpRK02e0Uh0w306RYnPNMLCxr3ROd9ZfK5cdgKmVWzTa508V9GqPMd5uLAMEwoQ8Et0PnY2JzHgrgtcxKC3LQRkwQxz7D9nMZto3MLDR6RxVaTiVoyZ01lbg6Q3Bgxy+h78bfhe2RWhOtmm60ss9N05H5Ax40Qs7Q2fPN1PmKb3BbsFY27ZeE5Ls3BCnWSMgy3lIHg6gvua7MiDH83SSSZg2EhDwKU8aYmvG90rn5NebRUcmFwM00W9ivt4boiHHgxp6VCMVe4BvVTopbEQVHZ6ybd4QptmmJ5x5rw6uncVwZHUyPraFyFzsJy+dELkYYJfa/u8JnkGflJGPxqsut0a8J+QHe0qQ0fO4NHbPLYmFxGOpeByf3VIHIH2DOPl5nH1F+QL7tcltr3bBKpU335aai4Eco4QZ/taPwtHf4nrr1KX6VD4SlVNfe1wWUiODw3qGpk4jmbFGN5qAj/AYwzwN+5Z2hkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image4\"\n        title=\"image4\"\n        src=\"/static/8a252730c7b24c1365e6586f0ca47fce/37523/image4.png\"\n        srcset=\"/static/8a252730c7b24c1365e6586f0ca47fce/e9ff0/image4.png 180w,\n/static/8a252730c7b24c1365e6586f0ca47fce/f21e7/image4.png 360w,\n/static/8a252730c7b24c1365e6586f0ca47fce/37523/image4.png 720w,\n/static/8a252730c7b24c1365e6586f0ca47fce/302a4/image4.png 1080w,\n/static/8a252730c7b24c1365e6586f0ca47fce/07a9c/image4.png 1440w,\n/static/8a252730c7b24c1365e6586f0ca47fce/4969b/image4.png 2454w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h4 id=\"패키지-관리-구조\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B4%80%EB%A6%AC-%EA%B5%AC%EC%A1%B0\" aria-label=\"패키지 관리 구조 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지 관리 구조</h4>\n<p>패키지 관리의 구조를 파악하고 있어야 문제 상황에 대해서 어떤 scope에서 문제가 발생했는 지 알 수 있다.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACLElEQVQoz1WSWW/aQBSF+elVVfUnVOpLHtqHSFUXJVXXKCEkgBeSgNkh7NgY22CPTUKDjfkqG6KqD0d3pHPnzJx7bmapX/Gg5wgnWUL9kthT2PkqW6EQ+ypilsUbnfE4vmC7kFjMcwyGvxiOfqf1cVn8rz9DoBL5ZWynh+G00O0Gc6vLxiuzCxTMvsSgIbGa5QmtAtr9CR8Lb/mQfcOpeoQ9z0JQIhJKKpqJhZxebusNCq1LCu0sTaNG4NwRunnqt3Xk6zFidssukHlyNYRdx51rrJYNInEHK5VdUCIOSmRiXyb0ykydKbVxneqwytiZ8EdoxIGMOajQa9RYzVV2fhFz3EHKd8md36GVh1gTFaPznYfJJZGd3wtuRAV31scdVnGHGq7RZ+1pbNwioVckFhKhKxN5RZxZm2qlT0nW6LbHBHaZh/k1aytPZOX3lkO/ii4d0/z0gv7pK4z8O8T8hq2Q2Qo1RTLwZKZrt8nC6LEwOnjzHqHQ0lASfm/5IDiTj2l9fknv9DWzwnvWizKhW2SzlA6QiYSENaqS/3rB1ZefVHIKzrSEfv+D5f0Zm3H2n2Vn2sVoKczaCotpknKVhHv+XeQp6QO+1WLa6TCq1zAHfR4XFdb2NU9OkcguJIJ7S2FQJ1o1CRMkZ1Ei9pWD5f2O7XyFwCljmQ1Mo4JtVnlyb9KU4+eUo7RZSQf/Hw5i+6oQCRVWEreNBkffahydyByftzD1ZG3klE+C+wvTwtFM59kXpwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/e9676e207a7b6928411012a0ea4f8dcf/37523/image3.png\"\n        srcset=\"/static/e9676e207a7b6928411012a0ea4f8dcf/e9ff0/image3.png 180w,\n/static/e9676e207a7b6928411012a0ea4f8dcf/f21e7/image3.png 360w,\n/static/e9676e207a7b6928411012a0ea4f8dcf/37523/image3.png 720w,\n/static/e9676e207a7b6928411012a0ea4f8dcf/302a4/image3.png 1080w,\n/static/e9676e207a7b6928411012a0ea4f8dcf/07a9c/image3.png 1440w,\n/static/e9676e207a7b6928411012a0ea4f8dcf/742d3/image3.png 2550w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>/etc/apt/source.list에 보면 여러 url이 존재하고 이 url을 근거로 공식 패키지 저장소에서 패키지를 가져오게 된다.\n<ul>\n<li>Redhat기준으로는 /etc/yum.repos.d/*.repo 이다.</li>\n<li>/etc/apt/source.list.d/ 디렉토리에는 외부 패키지 저장소에 대한 정보를 가지고 있고 여기서 404와 같은 오류가 발생할 가능성이 있다.</li>\n</ul>\n</li>\n<li>/var/lib/apt/lists, /var/cache/dnf/*/repodata 에 패키지 정보를 캐시로 담고 있다.\n<ul>\n<li><code class=\"language-text\">apt-get-update</code> 명령을 하게 되면 이 경로를 채워주게 된다.</li>\n<li><code class=\"language-text\">apt-cache search nodejs</code> 와 같은 명령을 하게 되면 이 경로에서 가져오게 된다.</li>\n</ul>\n</li>\n<li>/var/cache/apt/archives, /var/cache/dnf/*/packages\n<ul>\n<li>apt-install하면 이 경로에 패키지 파일이 설치되게 되고, redhat계열에서는 /var/cache/dnf/*/packages 경로에 패키지가 임시로 설치되었다가 사라진다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"패키지-관련-문제-사례\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80-%EA%B4%80%EB%A0%A8-%EB%AC%B8%EC%A0%9C-%EC%82%AC%EB%A1%80\" aria-label=\"패키지 관련 문제 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지 관련 문제 사례</h3>\n<h4 id=\"패키지-락\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80-%EB%9D%BD\" aria-label=\"패키지 락 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지 락</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">E: Could not get lock /var/lib/dpkg/lock-frontend \n- <span class=\"token function\">open</span> <span class=\"token punctuation\">(</span><span class=\"token number\">11</span>: Resource temporarily unavailable<span class=\"token punctuation\">)</span>\nE: Unable to acquire the dpkg frontend lock\n<span class=\"token punctuation\">(</span> /var/lib/dpkg/lock-frontend <span class=\"token punctuation\">)</span>, is another process using it?</code></pre></div>\n<ul>\n<li>자동 upgrade 가 crontab등으로 인해 진행 중이었을 때 명시적으로 apt-get upgrade 명령을 하게 되면 패키지 관리자가 동기화 문제로 인해 락을 건다.</li>\n<li>이 때 무조건 락 파일을 지우는 것은 문제가 될 수도 있다.</li>\n</ul>\n<h4 id=\"apt-install-도중에-생기는-사례\" style=\"position:relative;\"><a href=\"#apt-install-%EB%8F%84%EC%A4%91%EC%97%90-%EC%83%9D%EA%B8%B0%EB%8A%94-%EC%82%AC%EB%A1%80\" aria-label=\"apt install 도중에 생기는 사례 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>apt install 도중에 생기는 사례</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">Unable to fetch some archives, maybe run <span class=\"token function\">apt-get</span> update or try with --fix-missing?”</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># apt-update시 패키지 정보를 담고 있는 폴더 List를 모두 삭제 후 다시 install</span>\n<span class=\"token function\">rm</span> <span class=\"token parameter variable\">-rf</span> /var/lib/apt/lists/*\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> update</code></pre></div>\n<h4 id=\"apt-install-통해-받을-수-없거나-동작에-문제가-있는-경우\" style=\"position:relative;\"><a href=\"#apt-install-%ED%86%B5%ED%95%B4-%EB%B0%9B%EC%9D%84-%EC%88%98-%EC%97%86%EA%B1%B0%EB%82%98-%EB%8F%99%EC%9E%91%EC%97%90-%EB%AC%B8%EC%A0%9C%EA%B0%80-%EC%9E%88%EB%8A%94-%EA%B2%BD%EC%9A%B0\" aria-label=\"apt install 통해 받을 수 없거나 동작에 문제가 있는 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>apt install 통해 받을 수 없거나 동작에 문제가 있는 경우</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">wget</span> http://abc<span class=\"token punctuation\">..</span>libelf-dev.amd64.deb\n<span class=\"token function\">ls</span> libelf-dev.amd64.deb\n<span class=\"token function\">sudo</span> dpkg libelf-dev.amd64.deb <span class=\"token comment\"># dpkg 명령으로 패키지 설치</span></code></pre></div>\n<ul>\n<li>이 때 문제점은, 의존성 패키지까지 확인하여 모두 수동으로 받아야 한다.</li>\n</ul>\n<h4 id=\"패키지가-어떤-구조로-설치되는지-모를-경우--tree-명령어-활용\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80%EA%B0%80-%EC%96%B4%EB%96%A4-%EA%B5%AC%EC%A1%B0%EB%A1%9C-%EC%84%A4%EC%B9%98%EB%90%98%EB%8A%94%EC%A7%80-%EB%AA%A8%EB%A5%BC-%EA%B2%BD%EC%9A%B0--tree-%EB%AA%85%EB%A0%B9%EC%96%B4-%ED%99%9C%EC%9A%A9\" aria-label=\"패키지가 어떤 구조로 설치되는지 모를 경우  tree 명령어 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지가 어떤 구조로 설치되는지 모를 경우 : tree 명령어 활용</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">tree libelf-dev-install/</code></pre></div>\n<h4 id=\"패키지-설치하기전에-어떤-버전이-설치가-되는것인지-모른다면\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0%EC%A0%84%EC%97%90-%EC%96%B4%EB%96%A4-%EB%B2%84%EC%A0%84%EC%9D%B4-%EC%84%A4%EC%B9%98%EA%B0%80-%EB%90%98%EB%8A%94%EA%B2%83%EC%9D%B8%EC%A7%80-%EB%AA%A8%EB%A5%B8%EB%8B%A4%EB%A9%B4\" aria-label=\"패키지 설치하기전에 어떤 버전이 설치가 되는것인지 모른다면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지 설치하기전에 어떤 버전이 설치가 되는것인지 모른다면?</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">apt-cache</span> policy libelf-dev</code></pre></div>\n<h4 id=\"패키지가-완전히-삭제가-안된다면\" style=\"position:relative;\"><a href=\"#%ED%8C%A8%ED%82%A4%EC%A7%80%EA%B0%80-%EC%99%84%EC%A0%84%ED%9E%88-%EC%82%AD%EC%A0%9C%EA%B0%80-%EC%95%88%EB%90%9C%EB%8B%A4%EB%A9%B4\" aria-label=\"패키지가 완전히 삭제가 안된다면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>패키지가 완전히 삭제가 안된다면?</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 패키지 설치 후 확인</span>\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> postgresql\ndpkg <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span> postgresql\n\n<span class=\"token comment\"># 패키지 삭제 후 확인</span>\n<span class=\"token function\">apt-get</span> <span class=\"token function\">install</span> <span class=\"token parameter variable\">-y</span> postgresql\ndpkg <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span> postgresql\n\n<span class=\"token comment\"># 패키지 삭제 후 확인</span>\n<span class=\"token function\">apt-get</span> purge <span class=\"token parameter variable\">-y</span> postgresql\ndpkg <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span> postgresql\n\n<span class=\"token comment\"># 패키지 삭제 후 확인</span>\n<span class=\"token function\">apt</span> purge <span class=\"token parameter variable\">-y</span> postgresql*\ndpkg <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span> postgresql\n\n<span class=\"token comment\"># 패키지 삭제 후 확인</span>\n<span class=\"token function\">apt-get</span> purge <span class=\"token parameter variable\">-y</span> postgresql*\ndpkg <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span> postgresql</code></pre></div>\n<h4 id=\"디스크-공간-부족으로-인해-패키지-설치가-실패할-경우\" style=\"position:relative;\"><a href=\"#%EB%94%94%EC%8A%A4%ED%81%AC-%EA%B3%B5%EA%B0%84-%EB%B6%80%EC%A1%B1%EC%9C%BC%EB%A1%9C-%EC%9D%B8%ED%95%B4-%ED%8C%A8%ED%82%A4%EC%A7%80-%EC%84%A4%EC%B9%98%EA%B0%80-%EC%8B%A4%ED%8C%A8%ED%95%A0-%EA%B2%BD%EC%9A%B0\" aria-label=\"디스크 공간 부족으로 인해 패키지 설치가 실패할 경우 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디스크 공간 부족으로 인해 패키지 설치가 실패할 경우</h4>\n<ul>\n<li>디스크가 여러 개인 경우 마운트 된 폴더 정확히 확인하기</li>\n<li><code class=\"language-text\">df -h</code>를 확인했을 때 디스크 공간은 있는 경우 <code class=\"language-text\">df -i</code> 를 확인하여 파일의 개수가 많아서 inode full이 되었는 지 확인 필요</li>\n</ul>\n<h4 id=\"디스크-용량-확보-tip\" style=\"position:relative;\"><a href=\"#%EB%94%94%EC%8A%A4%ED%81%AC-%EC%9A%A9%EB%9F%89-%ED%99%95%EB%B3%B4-tip\" aria-label=\"디스크 용량 확보 tip permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>디스크 용량 확보 tip</h4>\n<ul>\n<li>depth 조절을 하면서 공간을 많이 차지하는 디렉토리를 찾는 방법</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">du</span> <span class=\"token parameter variable\">-d</span> <span class=\"token number\">1</span> /usr <span class=\"token parameter variable\">-h</span> <span class=\"token operator\">|</span> <span class=\"token function\">sort</span> <span class=\"token parameter variable\">-n</span></code></pre></div>\n<ul>\n<li>미사용중인 패키지 삭제하기 (apt-get -y autoremove)</li>\n<li>패키지 캐시 데이터 확인 후 삭제하기 (apt-get clean)</li>\n<li>필요없는 패키지 확인 후 삭제하기 (dpkg -l, apt-get purge)</li>\n<li>journalctl 로그 삭제하기</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 3일 이상된 로그 삭제</span>\njournalctl --vacuum-time<span class=\"token operator\">=</span>3d</code></pre></div>","frontmatter":{"date":"December 15, 2023","title":"[기술 세미나] 리눅스 패키지 문제해결 사례 핵심분석","categories":"DevOps Linux","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/reallinux-seminar/"}},"prev":{"id":"61b0e906-b9a8-5a86-baeb-f9f04aa69b87","html":"<h2 id=\"네트워크-통신과정--라우팅-추적\" style=\"position:relative;\"><a href=\"#%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%ED%86%B5%EC%8B%A0%EA%B3%BC%EC%A0%95--%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%B6%94%EC%A0%81\" aria-label=\"네트워크 통신과정  라우팅 추적 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>네트워크 통신과정 : 라우팅 추적</h2>\n<h3 id=\"traceroute\" style=\"position:relative;\"><a href=\"#traceroute\" aria-label=\"traceroute permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>traceroute</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">traceroute</span> <span class=\"token parameter variable\">-n</span> www.google.com</code></pre></div>\n<ul>\n<li>중간에 보이는 * 은 보안, 설정, 부하 등으로 인해 응답이 없었던 라우터이다.</li>\n<li>처음에 LAN의 gateway를 타고 나가서 router들을 거쳐 목적 서버로 도착하게 된다.</li>\n<li>동일 hop에 여러개의 ip가 나타나는 것은 여러 개의 경로가 있을 수 있음을 의미한다.</li>\n</ul>\n<h3 id=\"icmp란\" style=\"position:relative;\"><a href=\"#icmp%EB%9E%80\" aria-label=\"icmp란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ICMP란?</h3>\n<ul>\n<li>Internet Control Message Protocol</li>\n<li>L3 통신이다. (TCP통신이 아님에 유의)</li>\n<li>라우터를 포함한 네트웍 장치가 통신 체크 용도로 사용된다.</li>\n</ul>\n<h3 id=\"ping\" style=\"position:relative;\"><a href=\"#ping\" aria-label=\"ping permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ping</h3>\n<ul>\n<li>tshark 설치하기\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> tshark <span class=\"token parameter variable\">-i</span> <span class=\"token punctuation\">{</span>network if명<span class=\"token punctuation\">}</span> <span class=\"token parameter variable\">-f</span> icmp <span class=\"token parameter variable\">-Y</span> <span class=\"token string\">\"ip.dst == 8.8.8.8\"</span></code></pre></div>\n</li>\n<li>-f, -Y옵션은 패킷 filtering을 위해 사용되며 -f는 protocol을 필터링하고, -Y 뒤에는 표현식을 적어주어 필터링한다.</li>\n</ul>\n<hr>\n<h2 id=\"arp란\" style=\"position:relative;\"><a href=\"#arp%EB%9E%80\" aria-label=\"arp란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARP란?</h2>\n<ul>\n<li>Address Resolution Protocol</li>\n<li>L2(데이터링크 계층) 통신</li>\n<li>IP주소를 MAC주소에 매핑하기 위하여 사용된다.</li>\n<li>최종 목적지의 MAC주소를 이더넷 프레임에 포함하지는 않는다. (목적지가 LAN내라면 그럴 수 있다.) 외부로의 통신이라면 gateway의 MAC주소를 목적지지로 이더넷 프레임에 포함시켜야 한다. 어쨌든, 두 경우 모두 MAC주소를 패킷에 포함시켜야 함은 맞기 때문에 MAC주소를 얻어 와야하며 이를 위해 ARP 프로토콜이 사용된다</li>\n</ul>\n<br>\n<blockquote>\n<p>다른 네트웍 망으로 통신의 경우 라우터는 목적지 Gateway의 MAC 주소를 사용하여 이더넷 프레임을 만들어 해당 네트워크로 패킷을 전송한다. 이런 과정을 통해 패킷은 목적지 네트워크로 계속해서 전달되고, 각 네트워크마다 라우터가 목적지 Gateway의 MAC 주소 데이터를 담은 이더넷 프레임을 만들어 전송된다.</p>\n</blockquote>\n<h3 id=\"arp-추적과정\" style=\"position:relative;\"><a href=\"#arp-%EC%B6%94%EC%A0%81%EA%B3%BC%EC%A0%95\" aria-label=\"arp 추적과정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARP 추적과정</h3>\n<ul>\n<li>각 네트워크 장치(컴퓨터)는 ARP 테이블을 지니고 있다.</li>\n<li>Linux에서는 <code class=\"language-text\">ip neigh</code>명령으로 확인 가능하며 동적으로 ip를 할당하고 디바이스들이 자주 변경되는 LAN환경에서는 ARP테이블이 stale할 가능성도 있다. ip neigh명령을 해보면 <code class=\"language-text\">REACHABLE</code>과 <code class=\"language-text\">STALE</code>로 상태를 확인할 수 있다.\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">ip</span> neigh\n<span class=\"token number\">172.18</span>.2.3 dev eth0 lladdr 00:1f:5e:43:24:82 REACHABLE\n<span class=\"token number\">172.18</span>.24.39 dev eth0 lladdr 04:13:56:41:27:8E STALE</code></pre></div>\n</li>\n<li>그렇다면 ARP 테이블은 어떤 방식으로 구성되는가?</li>\n</ul>\n<h3 id=\"arp-패킷-보내는-과정-추적하기\" style=\"position:relative;\"><a href=\"#arp-%ED%8C%A8%ED%82%B7-%EB%B3%B4%EB%82%B4%EB%8A%94-%EA%B3%BC%EC%A0%95-%EC%B6%94%EC%A0%81%ED%95%98%EA%B8%B0\" aria-label=\"arp 패킷 보내는 과정 추적하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARP 패킷 보내는 과정 추적하기</h3>\n<ul>\n<li>tshark 대신 tcpdump를 사용할 수도 있다. tcpdump는 tcp 패킷만 볼 수 있는 것이 아니다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ARP 패킷 추적</span>\n<span class=\"token function\">sudo</span> tcmdump <span class=\"token parameter variable\">-xxi</span> <span class=\"token punctuation\">{</span>network interface<span class=\"token punctuation\">}</span> arp  <span class=\"token comment\">#1</span>\n<span class=\"token function\">sudo</span> tcmdump <span class=\"token parameter variable\">-xxi</span> <span class=\"token punctuation\">{</span>network interface<span class=\"token punctuation\">}</span> arp and src <span class=\"token punctuation\">{</span>내 컴퓨터 ip<span class=\"token punctuation\">}</span> <span class=\"token comment\">#2 내 PC가 보낸 ARP 패킷들에 대해서만 필터링해서 볼 수 있다. </span>\n<span class=\"token function\">sudo</span> tcmdump <span class=\"token parameter variable\">-xxi</span> <span class=\"token punctuation\">{</span>network interface<span class=\"token punctuation\">}</span> arp and dst <span class=\"token punctuation\">{</span>LAN 대역의 목적지 ip<span class=\"token punctuation\">}</span> <span class=\"token comment\">#3</span>\n\n<span class=\"token comment\"># LAN의 대역의 ip에 대해 ping을 하게 되면 ICMP 패킷을 보내기에 앞서, ARP 패킷을 보내서 MAC주소를 먼저 알아내게 된다. </span>\n<span class=\"token function\">ping</span> <span class=\"token punctuation\">{</span>LAN 대역의 목적지 ip<span class=\"token punctuation\">}</span></code></pre></div>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAACB0lEQVQoz1WRS2sTYRSG8xOqmUlsjTGtIZfJpZ1Jmsw3k0lTmyktRf0NSgWbVBCh0NiL9RbE4kIF19KCCEK97ETrqsUi6CLpSoorK6YRaZG6cPNoJ0Fw8fDwvYfvnAPH1dz+yO7OJr+adfabdfYadX426+x+q7HXqLH/fRMa7+DrOuxswJc12FptvbfXWm5sOP796Q2urQ8vuV+9zPWFiyxUJpmvTHK1UmZ2uszcdJlrM2VuzJS4NVumOlememWC6tR5qrMlqvOTDjdnSty7PcWPz29xvXr6APVEJ10BDx5Jwus5QKbTK+OV3XgkN0e8HifzyDKyLDlIkhvJfRhZcnOoo4OegJ/6+hNcLx7fJa6m0Pp1BnICPaOh92vkLRNDZDBFBpFRyRlZpxZTQsSVEAklTDIWIRmPEIuGSPUpvF9dwrWydIecyGDbJxkazHN6xMYuWA6jQwXGhoew8wJ7wMAyMs4QyxRYpk7BSFPMC+d/bzzCxutHuJ4tLxIL93Dm1CgjxUEuGBrjhsqEmeKSSFAqZDkr0pwz04wOCuyc5myVjEedLdWkQjgYoC/RbriyvEjA78MUWVJqL/1KN3oiiHHgZBhLT6Ml44R6AijhIJHgcQL+o218dPt9HPN1EYsGWw1Xnz+kWNAxs33kdBVT1xyMts2DLKv+Z0to/8gbKScfG85T+3uUP0UQSLtJymgDAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/5ccf10c75cb879e4258ac18da4d2a7a6/37523/image1.png\"\n        srcset=\"/static/5ccf10c75cb879e4258ac18da4d2a7a6/e9ff0/image1.png 180w,\n/static/5ccf10c75cb879e4258ac18da4d2a7a6/f21e7/image1.png 360w,\n/static/5ccf10c75cb879e4258ac18da4d2a7a6/37523/image1.png 720w,\n/static/5ccf10c75cb879e4258ac18da4d2a7a6/302a4/image1.png 1080w,\n/static/5ccf10c75cb879e4258ac18da4d2a7a6/07a9c/image1.png 1440w,\n/static/5ccf10c75cb879e4258ac18da4d2a7a6/b9bfc/image1.png 3112w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>위의 3번 명령을 실행시킨 상태에서 다른 터미널에서 ping명령을 하게 되면 위와 같은 결과가 나오는 것을 볼 수 있는데, 이 때 ARP 패킷은 브로드캐스팅되며, 송신지 MAC의 주소가 내 PC MAC주소로 되어있음을 확인할 수 있다.</li>\n<li>ARP 요청을 받은 호스트는 자신의 MAC 주소를 ARP 응답 패킷에 담아 송신 호스트에게 직접 응답한다. 해당 응답 패킷에는 목표 IP 주소와 해당 IP 주소에 대한 MAC 주소가 포함됨.</li>\n</ul>\n<h3 id=\"arp-테이블-지우기\" style=\"position:relative;\"><a href=\"#arp-%ED%85%8C%EC%9D%B4%EB%B8%94-%EC%A7%80%EC%9A%B0%EA%B8%B0\" aria-label=\"arp 테이블 지우기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ARP 테이블 지우기</h3>\n<ul>\n<li>전체 테이블 비우기\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> <span class=\"token function\">ip</span> neigh flush all</code></pre></div>\n</li>\n<li>1개 지우기\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">sudo</span> arp <span class=\"token parameter variable\">-d</span> <span class=\"token punctuation\">{</span>ip<span class=\"token punctuation\">}</span> <span class=\"token comment\"># ARP 테이블에서 1개 ip에 대한 정보 지우기</span>\n\n<span class=\"token function\">sudo</span> arp <span class=\"token comment\"># ARP 테이블 조회( ip neigh 와 유사 ) </span></code></pre></div>\n</li>\n</ul>\n<hr>\n<h2 id=\"dns\" style=\"position:relative;\"><a href=\"#dns\" aria-label=\"dns permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DNS</h2>\n<h3 id=\"dns-동작과정-추적하기\" style=\"position:relative;\"><a href=\"#dns-%EB%8F%99%EC%9E%91%EA%B3%BC%EC%A0%95-%EC%B6%94%EC%A0%81%ED%95%98%EA%B8%B0\" aria-label=\"dns 동작과정 추적하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>DNS 동작과정 추적하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># DNS 캐시 정보 비우기</span>\n<span class=\"token function\">sudo</span> systemd-resolve --flush-caches\n\n<span class=\"token comment\"># DNS 동작 과정 추적</span>\n<span class=\"token function\">sudo</span> tshark <span class=\"token parameter variable\">-i</span> <span class=\"token punctuation\">{</span>network interface<span class=\"token punctuation\">}</span> <span class=\"token parameter variable\">-Y</span> dns\n\n<span class=\"token comment\"># 다른 터미널에서 ping 실행해보기</span>\n<span class=\"token function\">ping</span> www.google.com</code></pre></div>\n<ul>\n<li><code class=\"language-text\">ping 8.8.8.8</code>은 되고 <code class=\"language-text\">ping google.com</code>은 안된다면 네트웍이 안되는 게 아니라 DNS 서버 정보에 대한 셋팅이 잘 안된 것이다.</li>\n<li>한 번도 통신하지 않은 상태에서 <code class=\"language-text\">ping www.google.com</code>을 실행하면 어떤 일이 일어나는가?\n<ul>\n<li>등록된 DNS 서버에 DNS 쿼리를 보내야 하는데 ARP 테이블에는 외부 네트웍망에 있는 DNS 서버 ip 에 대한 MAC주소가 없는 상태이다.</li>\n<li>따라서 ARP 브로드캐스팅을 통해 Gateway의 MAC주소를 얻어내고, 이를 이용해 패킷을 만들어 DNS 서버에 쿼리를 날린다.</li>\n<li>DNS 쿼리를 통해 알아낸 목적지의 ip 주소와 최초 ARP통신을 통해 알아낸 gateway의 MAC주소로 ICMP 패킷을 전송하게 된다.</li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"January 21, 2024","title":"라우팅 추적(ICMP)과 ARP","categories":"Linux","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/network-practice2/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/network-practice1/","nextSlug":"/reallinux-seminar/","prevSlug":"/network-practice2/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}