{"componentChunkName":"component---src-templates-blog-template-js","path":"/spa1/","result":{"data":{"cur":{"id":"ddf4932c-a7a0-5413-ad75-5f25269ea8b1","html":"<h2 id=\"listen--summarize\" style=\"position:relative;\"><a href=\"#listen--summarize\" aria-label=\"listen  summarize permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Listen &#x26; Summarize</h2>\n<ul>\n<li>전체 내용 파악하며 듣기</li>\n<li>세부 사항 별로 키워드 2,3개 정도 기억하는 연습하기</li>\n</ul>\n<h3 id=\"문장-구성하기\" style=\"position:relative;\"><a href=\"#%EB%AC%B8%EC%9E%A5-%EA%B5%AC%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"문장 구성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>문장 구성하기</h3>\n<h4 id=\"1-changes-in-life\" style=\"position:relative;\"><a href=\"#1-changes-in-life\" aria-label=\"1 changes in life permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Changes in life</h4>\n<ul>\n<li>\n<p>주제 문장 만들기</p>\n<ul>\n<li>This is a story about …</li>\n<li>This is about …</li>\n<li>The text/article decribes/explains ..</li>\n<li>(topic word) is …</li>\n<li><strong>EX) <code class=\"language-text\">The story is about how Ford's mass production changed people's live in the US and around the world</code></strong></li>\n</ul>\n</li>\n<li>\n<p>세부 문장 만들기</p>\n<ul>\n<li>Detail 1 : 3 effect of mass production 기억하여 순차적으로 말하기</li>\n<li>Detail 2 : 미국 뿐만이 아니라 세계적으로 영향 끼쳤음을 말하</li>\n</ul>\n</li>\n<li>\n<p>모범 답안\n: <code class=\"language-text\">The story is about how Ford's mass production changed people's live in the US and around the world. The first was the increased number of jobs, the second was that people started to eat fast food, and the last was more choices for holaidays. It also changed people's live overseas, the same way as the Americans</code></p>\n</li>\n</ul>\n<h4 id=\"2-entertainment\" style=\"position:relative;\"><a href=\"#2-entertainment\" aria-label=\"2 entertainment permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Entertainment</h4>\n<ul>\n<li>\n<p>Key expressions</p>\n<ul>\n<li>latest social media</li>\n<li>1.5 billion downloads, 500 million active monthly user</li>\n<li>creativity</li>\n<li>16 - 24 age years old</li>\n<li>marketing and advertising haven</li>\n</ul>\n</li>\n<li>\n<p>주제 문장 만들기</p>\n<ul>\n<li>`The text explains that Tictok is the latest and fast-growing social media platform today</li>\n</ul>\n</li>\n<li>\n<p>세부 문장 만들기</p>\n<ul>\n<li>Detail 1 : downloads, active users, video form, main users\n<ul>\n<li>a huge number of</li>\n</ul>\n</li>\n<li>Detail 2 : express, creativity, marketing/advertising haven</li>\n</ul>\n</li>\n<li>\n<p>모범 답안\n: `The text explains the latest and fast-growing social media today, Tictok. Ticktok has 1.5 billion downloads and 500 million active users every month. It consists of short form video recorded by the users. The main users are teenagers and young adults. Tictok users share their videos to express their creativity. Also tictok has become a new marketing and advertising haven, as there are a large number of users.</p>\n</li>\n</ul>","excerpt":"Listen & Summarize 전체 내용 파악하며 듣기 세부 사항 별로 키워드 2,3개 정도 기억하는 연습하기 문장 구성하기 1. Changes in life 주제 문장 만들기 This is a story about … This is about … The text/article decribes/explains .. (topic word) is … EX)  세부 문장 만들기 Detail 1 : 3 effect of mass production 기억하여 순차적으로 말하기 Detail 2 : 미국 뿐만이 아니라 세계적으로 영향 끼쳤음을 말하 모범 답안\n:  2. Entertainment Key expressions latest social media 1.5 billion downloads, 500 million active monthly user creativity 16 - 24 age years old marketing and advertising haven 주제 문장 만들기 `T…","frontmatter":{"date":"April 15, 2024","title":"SPA 스터디 - Listen & Summarize","categories":"영어","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/spa1/"}},"next":{"id":"62e2776b-878c-50ba-8ec2-52796b363310","html":"<h3 id=\"1-root-비번-재설정\" style=\"position:relative;\"><a href=\"#1-root-%EB%B9%84%EB%B2%88-%EC%9E%AC%EC%84%A4%EC%A0%95\" aria-label=\"1 root 비번 재설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. root 비번 재설정</h3>\n<ul>\n<li>\n<p>VM 재기동 ( ctrl-alt-delete )</p>\n</li>\n<li>\n<p>rescue console ‘e’(edit) 로 진입하여 linux … 행에 <code class=\"language-text\">rd.break</code> 추가</p>\n</li>\n<li>\n<p>Ctrl-x로 저장하면 자동으로 레스큐 콘솔로 재부팅 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 레스큐 모드에서는 파일 시스템이 읽기 전용으로 마운트되기 때문에, rw모드로 리마운트 필요</span>\n<span class=\"token function\">mount</span> <span class=\"token parameter variable\">-o</span> rw,remount /sysroot\n<span class=\"token comment\"># 루트 디렉터리를 /sysroot로 변경하여 비밀번호 변경 전 격리된 환경 제공</span>\n<span class=\"token function\">chroot</span> /sysroot “æui</code></pre></div>\n</li>\n</ul>\n<p>iui ]o[o[]]i][ ][i]i[][i] l[]o[]o] kkkk echo ‘anypass’ | passwd —stdin root</p>\n<h1 id=\"재부팅-시-파일-시스템의-selinux-컨텍j스j트를-자동으로-재라벨링하도록-한다\" style=\"position:relative;\"><a href=\"#%EC%9E%AC%EB%B6%80%ED%8C%85-%EC%8B%9C-%ED%8C%8C%EC%9D%BC-%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9D%98-selinux-%EC%BB%A8%ED%85%8Dj%EC%8A%A4j%ED%8A%B8%EB%A5%BC-%EC%9E%90%EB%8F%99%EC%9C%BC%EB%A1%9C-%EC%9E%AC%EB%9D%BC%EB%B2%A8%EB%A7%81%ED%95%98%EB%8F%84%EB%A1%9D-%ED%95%9C%EB%8B%A4\" aria-label=\"재부팅 시 파일 시스템의 selinux 컨텍j스j트를 자동으로 재라벨링하도록 한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>재부팅 시 파일 시스템의 SELinux 컨텍j스j트를 자동으로 재라벨링하도록 한다.</h1>\n<p>touch /.autorelabel</p>\n<p>|  ```</p>\n<h3 id=\"2-서버-네트웍-설정\" style=\"position:relative;\"><a href=\"#2-%EC%84%9C%EB%B2%84-%EB%84%A4%ED%8A%B8%EC%9B%8D-%EC%84%A4%EC%A0%95\" aria-label=\"2 서버 네트웍 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 서버 네트웍 설정</h3>\n<p>x</p>\n<ul>\n<li>nmtui 명령을 통해 진입하는 콘솔에서 hostname, ip, gateway, dns server 등에 대한 설정 가능</li>\n</ul>\n<h3 id=\"3-서버-리포지토리-관리\" style=\"position:relative;\"><a href=\"#3-%EC%84%9C%EB%B2%84-%EB%A6%AC%ED%8F%AC%EC%A7%80%ED%86%A0%EB%A6%AC-%EA%B4%80%EB%A6%AC\" aria-label=\"3 서버 리포지토리 관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 서버 리포지토리 관리</h3>\n<ul>\n<li>\n<p>dnf repository 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf config-manager —add-repo<span class=\"token operator\">=</span>“repo1”\ndnf config-manager —add-repo<span class=\"token operator\">=</span>“repo2”\n\n<span class=\"token comment\"># /etc/yum.repos.d 하위에 vi repo1, repo2 gpgcheck=0 해줘야 함</span>\n\n<span class=\"token comment\"># 오래되거나 깨진 캐시로 인한 문제를 방지하거나 dnf repo설정 변경 때 사용</span>\ndnf clean all\ndnf list</code></pre></div>\n</li>\n</ul>\n<h3 id=\"4-selinux\" style=\"position:relative;\"><a href=\"#4-selinux\" aria-label=\"4 selinux permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. SELinux</h3>\n<ul>\n<li>\n<p>SELinux의 http에 추가된 포트 확인 및 포트 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">semanage port <span class=\"token parameter variable\">-l</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> http\nsemanage port <span class=\"token parameter variable\">-a</span> <span class=\"token parameter variable\">-t</span> http_port_t <span class=\"token parameter variable\">-p</span> tcp <span class=\"token number\">82</span></code></pre></div>\n</li>\n<li>\n<p>방화벽에 위에서 추가된 82번 port를 오픈하기 위해 추가</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">firewall-cmd —add-port<span class=\"token operator\">=</span><span class=\"token number\">82</span>/tcp —permanent\nfirewall-cmd —reload</code></pre></div>\n</li>\n<li>\n<p>httpd 재시작 및 적용</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">systemctl restart httpd\nsystemctl <span class=\"token builtin class-name\">enable</span> —now httpd</code></pre></div>\n</li>\n</ul>\n<h3 id=\"5논리-볼륨-크기-조정\" style=\"position:relative;\"><a href=\"#5%EB%85%BC%EB%A6%AC-%EB%B3%BC%EB%A5%A8-%ED%81%AC%EA%B8%B0-%EC%A1%B0%EC%A0%95\" aria-label=\"5논리 볼륨 크기 조정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5.논리 볼륨 크기 조정</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">lsblk\nvgdisplay myvol\n<span class=\"token comment\"># 특정 파일시스템으로 마운트 된 논리 볼륨 /dev/myvol/vo의 사이즈를 75m 증가</span>\nlvextend <span class=\"token parameter variable\">-r</span> <span class=\"token parameter variable\">-L</span> +75m /dev/myvol/vo\n<span class=\"token function\">df</span> <span class=\"token parameter variable\">-h</span></code></pre></div>\n<p>-r: 논리 볼륨을 확장한 후에 파일 시스템의 크기를 자동으로 조정하는 옵션. -r 옵션이 없다면, 논리 볼륨의 크기를 확장한 뒤에 별도로 파일 시스템을 확장해야 함.</p>\n<ul>\n<li><code class=\"language-text\">lsblk</code> 명령을 통해 논리 볼륨의 파티션을 확인할 수 있고, 논리 볼륨이 속한 파티션은 LVM이다.</li>\n</ul>\n<h3 id=\"6스왑-파티션-추가\" style=\"position:relative;\"><a href=\"#6%EC%8A%A4%EC%99%91-%ED%8C%8C%ED%8B%B0%EC%85%98-%EC%B6%94%EA%B0%80\" aria-label=\"6스왑 파티션 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6.스왑 파티션 추가</h3>\n<ul>\n<li>\n<p>파티션 생성</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># /dev/vdb 디스크에 2번 파티션을 이전 파티션이 끝나지는 지점의 바로 다음 섹터(enter)에서 512M 사이즈로 생성한다.</span>\n<span class=\"token function\">fdisk</span> /dev/vdb <span class=\"token comment\"># n -> 2 -> enter -> +512M -> w</span>\n\n<span class=\"token comment\"># 해당 파티션의 타입을 swap 메모리로 설정한다.</span>\n<span class=\"token function\">fdisk</span> /devvdb <span class=\"token comment\"># t -> 2 -> swap -> w</span></code></pre></div>\n<ul>\n<li>/dev/vdb의 두 번째 파티션(/dev/vdb2)을 시스템에 스왑 영역으로 사용하기 위한 타입으로 변경했으나 이 단계에서는 실제로 스왑 공간이 활성화 되지는 않는다.</li>\n</ul>\n</li>\n<li>\n<p>파티션을 swap공간으로 초기화</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkswap</span> /dev/vdb2</code></pre></div>\n</li>\n<li>\n<p>fstab 설정</p>\n<ul>\n<li>\n<p>시스템 부팅 시 자동으로 마운트할 파일 시스템의 목록을 포함하는 설정 파일</p>\n</li>\n<li>\n<p>vi /etc/fstab 마지막 줄에 <code class=\"language-text\">/dev/vdb2 swap swap defaults,pri=10 0 0</code> 추가</p>\n<ul>\n<li>파일 시스템 경로: /dev/vdb2</li>\n<li>mount point: swap (swap의 경우 실제 마운트 포인트가 아닌 swap 키워드 사용)</li>\n<li>type: swap</li>\n<li>option: <code class=\"language-text\">defaults,pri=10</code> 은 기본 마운트 옵션을 사용하되, swap 우선 순위를 10으로 높여 설정함을 말함</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">swapon -a</code></p>\n<ul>\n<li>/etc/fstab 파일에 정의된 모든 스왑 공간을 활성화</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><code class=\"language-text\">swapon -s</code></p>\n<ul>\n<li><code class=\"language-text\">swapon -s</code> 명령은 현재 활성화된 스왑 공간의 목록을 표시</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"7논리-볼륨-만들기\" style=\"position:relative;\"><a href=\"#7%EB%85%BC%EB%A6%AC-%EB%B3%BC%EB%A5%A8-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"7논리 볼륨 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7.논리 볼륨 만들기</h3>\n<ul>\n<li>개념 정리\n<ul>\n<li>PV는 LVM을 사용하여 관리할 수 있는 물리적 스토리지의 최소 단위로, LVM을 사용하려면 물리적 스토리지를 PV로 초기화 해야 한다.</li>\n<li>VG는 여러 PV를 하나의 큰 스토리지 풀로 묶어 관리하며, 이 풀 내에서 LV를 생성하고 관리한다.</li>\n<li>즉, VG는 PV와 LV의 가교역할로서, PV로 만든 하나의 큰 스토리지 풀을 가상의 볼륨(LV)으로 나누어 관리하는 것이다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"1-파티션-생성\" style=\"position:relative;\"><a href=\"#1-%ED%8C%8C%ED%8B%B0%EC%85%98-%EC%83%9D%EC%84%B1\" aria-label=\"1 파티션 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) 파티션 생성</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># /dev/vdb 디스크에 3번 파티션을 이전 파티션이 끝나지는 지점의 바로 다음 섹터(enter)에서 900M 사이즈로 생성한다.</span>\n<span class=\"token function\">fdisk</span> /dev/vdb <span class=\"token comment\"># n -> 3 -> enter -> +900M -> w</span>\n\n<span class=\"token comment\"># 해당 파티션의 타입을 lvm 메모리로 설정한다.</span>\n<span class=\"token function\">fdisk</span> /devvdb <span class=\"token comment\"># t -> 3 -> lvm -> w</span></code></pre></div>\n<h4 id=\"2-볼륨그룹-및-pv-생성\" style=\"position:relative;\"><a href=\"#2-%EB%B3%BC%EB%A5%A8%EA%B7%B8%EB%A3%B9-%EB%B0%8F-pv-%EC%83%9D%EC%84%B1\" aria-label=\"2 볼륨그룹 및 pv 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) 볼륨그룹 및 PV 생성</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># RHEL9에서는 pvcreate /dev/vdb3 명령이 아래 명령에 포함되어 실행된다.</span>\nvgcreate wgroup <span class=\"token parameter variable\">-s</span> 8m /dev/vdb3</code></pre></div>\n<ul>\n<li>원래는 vgcreate 이후 pvcreate를 하여 해당 물리 스토리지(파티션) 를 LVM이 PV로서 인식하고 사용할 수 있게 해주는 별도 과정이 필요하다. (<code class=\"language-text\">pvcreate /dev/vdb3</code>)</li>\n<li><code class=\"language-text\">-s 8m</code> 옵션은 해당 volume group에 속한 lv의 물리적 익스텐트(PE)의 크기를 8MB로 설정한다.</li>\n</ul>\n<h4 id=\"3-논리-볼륨-생성\" style=\"position:relative;\"><a href=\"#3-%EB%85%BC%EB%A6%AC-%EB%B3%BC%EB%A5%A8-%EC%83%9D%EC%84%B1\" aria-label=\"3 논리 볼륨 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) 논리 볼륨 생성</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># Physical Extent의 수를 100개로 지정한다.</span>\nlvcreate <span class=\"token parameter variable\">-n</span> wshare <span class=\"token parameter variable\">-l</span> <span class=\"token number\">100</span> wgroup</code></pre></div>\n<ul>\n<li>-l 100 옵션을 줘서 PE를 100개로 설정하게 되면 wshare 논리 볼륨은 wgroup 볼륨 그룹 내에서 100(PE 갯수)*8M(PE size) = 약 800M의 공간을 사용하게 된다.</li>\n</ul>\n<h4 id=\"4-논리-볼륨을-특정-파일시스템으로-포맷\" style=\"position:relative;\"><a href=\"#4-%EB%85%BC%EB%A6%AC-%EB%B3%BC%EB%A5%A8%EC%9D%84-%ED%8A%B9%EC%A0%95-%ED%8C%8C%EC%9D%BC%EC%8B%9C%EC%8A%A4%ED%85%9C%EC%9C%BC%EB%A1%9C-%ED%8F%AC%EB%A7%B7\" aria-label=\"4 논리 볼륨을 특정 파일시스템으로 포맷 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4) 논리 볼륨을 특정 파일시스템으로 포맷</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">mkfs.vfat /dev/vdb3</code></pre></div>\n<h4 id=\"5-마운트-포인트-생성\" style=\"position:relative;\"><a href=\"#5-%EB%A7%88%EC%9A%B4%ED%8A%B8-%ED%8F%AC%EC%9D%B8%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"5 마운트 포인트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5) 마운트 포인트 생성</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> /mnt/share</code></pre></div>\n<h4 id=\"6-시스템-부팅-시-자동-마운트-설정--fstab-\" style=\"position:relative;\"><a href=\"#6-%EC%8B%9C%EC%8A%A4%ED%85%9C-%EB%B6%80%ED%8C%85-%EC%8B%9C-%EC%9E%90%EB%8F%99-%EB%A7%88%EC%9A%B4%ED%8A%B8-%EC%84%A4%EC%A0%95--fstab-\" aria-label=\"6 시스템 부팅 시 자동 마운트 설정  fstab  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6) 시스템 부팅 시 자동 마운트 설정 ( fstab )</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># vi /etc/fstab</span>\n<span class=\"token comment\">#-> /dev/myvolgroup/myvol /mnt/myvol ext4 defaults 0 0 를 마지막 행에 추가</span>\n\n<span class=\"token comment\"># /etc/fstab 파일에 정의된 모든 파일 시스템을 자동으로 마운트 함</span>\n<span class=\"token function\">mount</span> <span class=\"token parameter variable\">-a</span></code></pre></div>\n<h3 id=\"8시스템-조정-구성\" style=\"position:relative;\"><a href=\"#8%EC%8B%9C%EC%8A%A4%ED%85%9C-%EC%A1%B0%EC%A0%95-%EA%B5%AC%EC%84%B1\" aria-label=\"8시스템 조정 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8.시스템 조정 구성</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">tuned-add recommend\ntuned-adm profile xyz\ntuned-adm active</code></pre></div>\n<h3 id=\"9-계정관리\" style=\"position:relative;\"><a href=\"#9-%EA%B3%84%EC%A0%95%EA%B4%80%EB%A6%AC\" aria-label=\"9 계정관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. 계정관리</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">useradd</span> natasha\n<span class=\"token function\">useradd</span> harry\n<span class=\"token function\">useradd</span> sarah\n<span class=\"token function\">groupadd</span> <span class=\"token parameter variable\">-g</span> <span class=\"token number\">60001</span> manager\n<span class=\"token function\">usermod</span> <span class=\"token parameter variable\">-aG</span> manager natasha\n<span class=\"token function\">usermod</span> <span class=\"token parameter variable\">-aG</span> manager harry\n<span class=\"token function\">usermod</span> <span class=\"token parameter variable\">-s</span> /sbin/nologin sarah <span class=\"token comment\"># sarah를 login하지 못하는 사용자로 설정</span></code></pre></div>\n<h3 id=\"10ntp\" style=\"position:relative;\"><a href=\"#10ntp\" aria-label=\"10ntp permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10.ntp</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf <span class=\"token parameter variable\">-y</span> <span class=\"token function\">install</span> chrony\n<span class=\"token function\">vi</span> /etc/chrony.conf\n-<span class=\"token operator\">></span> server 주석 후 주어진 서버 정보를 xyz라 하면\nserver xyz burst 행 작성\nsystemctl restart chronyd\nsystemctl <span class=\"token builtin class-name\">enable</span> chroynd —now\ntimedatectl <span class=\"token comment\"># 확인</span></code></pre></div>\n<h3 id=\"11-autofs\" style=\"position:relative;\"><a href=\"#11-autofs\" aria-label=\"11 autofs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. Autofs</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># autofs 관련 패키지 설치</span>\ndnf <span class=\"token parameter variable\">-y</span> <span class=\"token function\">install</span> autofs nfs-utils\n\n<span class=\"token function\">vi</span> /etc/auto.master.d/direct.autofs\n-<span class=\"token operator\">></span> <span class=\"token variable\"><span class=\"token variable\">`</span>/- /etc/auto.direct<span class=\"token variable\">`</span></span>\n<span class=\"token function\">vi</span> /etc/auto.direct\n-<span class=\"token operator\">></span> <span class=\"token variable\"><span class=\"token variable\">`</span>/a/b/c -rw,sync xyz.com:/a/b/c<span class=\"token variable\">`</span></span>\nsystemctl restart autofs\nsystemctl <span class=\"token builtin class-name\">enable</span> autofs —now\n<span class=\"token function\">su</span> - user10\n<span class=\"token function\">df</span> <span class=\"token builtin class-name\">.</span></code></pre></div>\n<h3 id=\"12협력-작업-디렉토리\" style=\"position:relative;\"><a href=\"#12%ED%98%91%EB%A0%A5-%EC%9E%91%EC%97%85-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC\" aria-label=\"12협력 작업 디렉토리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12.협력 작업 디렉토리</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">chown</span> :manager /root/test  <span class=\"token function\">chmod</span> <span class=\"token number\">2070</span> /root/test</code></pre></div>\n<h3 id=\"13-파일찾기1\" style=\"position:relative;\"><a href=\"#13-%ED%8C%8C%EC%9D%BC%EC%B0%BE%EA%B8%B01\" aria-label=\"13 파일찾기1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. 파일찾기1</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> /root/test1\n<span class=\"token function\">find</span> / <span class=\"token parameter variable\">-user</span> simone <span class=\"token parameter variable\">-type</span> f <span class=\"token parameter variable\">-exec</span> <span class=\"token function\">cp</span> <span class=\"token parameter variable\">-fv</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> /root/test1 <span class=\"token punctuation\">\\</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h3 id=\"14-파일찾기2\" style=\"position:relative;\"><a href=\"#14-%ED%8C%8C%EC%9D%BC%EC%B0%BE%EA%B8%B02\" aria-label=\"14 파일찾기2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>14. 파일찾기2</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">cd</span> /usr\n<span class=\"token function\">vi</span> mysearch\n-<span class=\"token operator\">></span> <span class=\"token comment\">#!/usr/bin/bash</span>\n-<span class=\"token operator\">></span> <span class=\"token function\">find</span> /usr <span class=\"token parameter variable\">-size</span> <span class=\"token parameter variable\">-10M</span> <span class=\"token parameter variable\">-perm</span> <span class=\"token parameter variable\">-2000</span> <span class=\"token operator\">></span> /root/myfiles\n<span class=\"token function\">mv</span> mysearch /usr/local/bin\n<span class=\"token function\">chmod</span> <span class=\"token number\">755</span> my search</code></pre></div>\n<h3 id=\"15-문자열찾기\" style=\"position:relative;\"><a href=\"#15-%EB%AC%B8%EC%9E%90%EC%97%B4%EC%B0%BE%EA%B8%B0\" aria-label=\"15 문자열찾기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>15. 문자열찾기</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">grep</span> start /usr/share/dict/words <span class=\"token operator\">></span> /root/lines.txt</code></pre></div>\n<h3 id=\"16-아카이브\" style=\"position:relative;\"><a href=\"#16-%EC%95%84%EC%B9%B4%EC%9D%B4%EB%B8%8C\" aria-label=\"16 아카이브 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>16. 아카이브</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">tar</span> cvjf /root/data.tar.bz2 /usr/local\n<span class=\"token function\">file</span> /root/data.tar.bz2 <span class=\"token comment\"># 확인용</span></code></pre></div>\n<h3 id=\"17-기본권한--umask-\" style=\"position:relative;\"><a href=\"#17-%EA%B8%B0%EB%B3%B8%EA%B6%8C%ED%95%9C--umask-\" aria-label=\"17 기본권한  umask  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>17. 기본권한 ( umask )</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">su</span> - daffy\n<span class=\"token function\">vi</span> .bash_profile\n<span class=\"token comment\"># 마지막 행에 추가 : umask 027</span></code></pre></div>\n<h3 id=\"18-acl\" style=\"position:relative;\"><a href=\"#18-acl\" aria-label=\"18 acl permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>18. ACL</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cp</span> /etc/fstab /var/tmp/fstab\nsetfacl <span class=\"token parameter variable\">-m</span> u:natasha:rw- /var/tmp/fstab\nsetfacl <span class=\"token parameter variable\">-m</span> u:harry:— /var/tmp/fstab\ngetfacl /var/tmp/fstab</code></pre></div>\n<h3 id=\"19-컨테이너1\" style=\"position:relative;\"><a href=\"#19-%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%881\" aria-label=\"19 컨테이너1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>19. 컨테이너1</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">podman</span> login <span class=\"token punctuation\">[</span>registry address<span class=\"token punctuation\">]</span>\n<span class=\"token function\">wget</span> <span class=\"token punctuation\">[</span>container <span class=\"token function\">file</span> download address<span class=\"token punctuation\">]</span>\n<span class=\"token function\">podman</span> build <span class=\"token parameter variable\">-t</span> monitor <span class=\"token builtin class-name\">.</span></code></pre></div>\n<h3 id=\"20컨테이너2\" style=\"position:relative;\"><a href=\"#20%EC%BB%A8%ED%85%8C%EC%9D%B4%EB%84%882\" aria-label=\"20컨테이너2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>20.컨테이너2</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">mkdir</span> /opt/files\n<span class=\"token function\">mkdir</span> /opt/processed\n<span class=\"token function\">chown</span> walhalla:walhalla /opt/files\n<span class=\"token function\">chown</span> walhalla:walhalla /opt/processed\n<span class=\"token function\">ssh</span> walhalla@localhost\n<span class=\"token function\">podman</span> run <span class=\"token parameter variable\">-d</span> —name ascii2pdf —rm <span class=\"token parameter variable\">-v</span> /opt/files:/opt/incoming:Z <span class=\"token parameter variable\">-v</span> /opt/processed:/opt/outgoing:Z monitor\n<span class=\"token function\">mkdir</span> <span class=\"token parameter variable\">-p</span> .config/systemd/user\n<span class=\"token builtin class-name\">cd</span> .config/systemd/user\n<span class=\"token function\">podman</span> generate systemd <span class=\"token parameter variable\">-n</span> ascii2pdf —new —files\n<span class=\"token function\">podman</span> stop <span class=\"token parameter variable\">-a</span>\nsystemctl —user <span class=\"token builtin class-name\">enable</span> container-ascii2pdf.service\nsystemctl —user status container-ascii2pdf.service\n<span class=\"token function\">podman</span> <span class=\"token function\">ps</span>\nloginctl enable-linger</code></pre></div>","frontmatter":{"date":"March 25, 2024","title":"RHCSA","categories":"Linux DevOps","author":"jjunyong","emoji":"😌"},"fields":{"slug":"/rhcsa/"}},"prev":{"id":"b54bb0f6-1a8e-530a-8184-053da1370d38","html":"<p>Let’s ecrypt를 활용해서 3개월 마다 istio의 tls인증서를 \b자동 갱신하도록 설정하는 방법도 있으나,\n설정 과정이 다소 복잡하고 트러블 슈팅이 어려운 문제가 있었다.\n그래서 결국 가비아를 통해 Sectico 인증서를 3년에 6만원 정도로 구입하여 적용하는 방법을 택했고, 이 방법이 대부분의 enterprise 환경에서도 사용되는 방법일 것이다.</p>\n<h2 id=\"1-tls-인증서-준비-및-tls-secret-생성\" style=\"position:relative;\"><a href=\"#1-tls-%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%A4%80%EB%B9%84-%EB%B0%8F-tls-secret-%EC%83%9D%EC%84%B1\" aria-label=\"1 tls 인증서 준비 및 tls secret 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. TLS 인증서 준비 및 tls Secret 생성</h2>\n<ul>\n<li>\n<p>가비아에서 Sectio 인증서를 나의 도메인으로 발급 받았고, 아래와 같이 4개 인증서를 제공 받았다.</p>\n</li>\n<li>\n<p>abc_company_root_cert.crt : 루트 인증서 파일</p>\n</li>\n<li>\n<p>abc_company_chain_cert.crt : 체인 인증서 파일</p>\n</li>\n<li>\n<p>abc_company.key: 도메인 인증서 파일</p>\n</li>\n<li>\n<p>abc_company_cert.crt : 개인 키 파일</p>\n</li>\n<li>\n<p>해당 파일 중 개인 키 파일 과 도메인 인증서 파일 2개를 사용하여 istio-system namespace에 tls secret을 생성한다.</p>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create secret tls abc-company-tls <span class=\"token parameter variable\">--key</span><span class=\"token operator\">=</span>abc_company.key <span class=\"token parameter variable\">--cert</span><span class=\"token operator\">=</span>abc_company_cert.crt <span class=\"token parameter variable\">-n</span> istio-system</code></pre></div>\n<p>…\n라고 했지만 위와 같이 secret 생성했을 때 RN Android 환경에서 SSL 접근 시 network failed 이슈가 있었다.</p>\n<h3 id=\"인증서-오류-발생\" style=\"position:relative;\"><a href=\"#%EC%9D%B8%EC%A6%9D%EC%84%9C-%EC%98%A4%EB%A5%98-%EB%B0%9C%EC%83%9D\" aria-label=\"인증서 오류 발생 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>인증서 오류 발생</h3>\n<ul>\n<li>\n<p>SSL Checker와 같은 웹 검증 툴을 사용해서 확인해보니 인증서 자체는 적용되었지만 경고 메시지가 떴다.\n<code class=\"language-text\">The certificate is not trusted in all web browsers. You may need to install an Intermediate/chain certificate to link it to a trusted root certificate.</code></p>\n</li>\n<li>\n<p>원래는 하기와 같이 도메인 인증서와 체인 인증서를 합쳐서 combined 인증서를 만든 뒤에 해당 파일을 활용해서 k8s tls secret을 생성하여야 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">cat</span> abc_company_cert.crt abc_company_chain_cert.crt <span class=\"token operator\">></span> abc_company_combined.crt</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">kubectl create secret tls abc-company-tls <span class=\"token parameter variable\">--key</span><span class=\"token operator\">=</span>abc_company.key <span class=\"token parameter variable\">--cert</span><span class=\"token operator\">=</span>abc_company_combined.crt <span class=\"token parameter variable\">-n</span> istio-system</code></pre></div>\n</li>\n</ul>\n<p>그런데 이렇게 했을 때, 아래 에러가 발생하여서 domain 인증서로만 작업을 하고 넘어갔었다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">error: tls: private key does not match public key</code></pre></div>\n<br>\n<p>아무리 찾아봐도 방법 자체에는 문제가 없는 것 같아서 합쳐진 combined.crt 인증서를 확인해보니 아래와 같이\nEND CERTIFICATE 부분과 BEGIN CERTIFICATE 부분이 ’----‘로 연결되어 있었다.</p>\n<h4 id=\"수정-전\" style=\"position:relative;\"><a href=\"#%EC%88%98%EC%A0%95-%EC%A0%84\" aria-label=\"수정 전 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>수정 전</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">## BEFORE</span>\n-----BEGIN CERTIFICATE-----\nMOdUgph2fOKBZVrROOUwDQYJKoZIhGlnb1JT\nQURvbWFpblZhbGlkYXNLYanoVX8ET4pp\ndeJV9b9rWYUYUJja0i3+1LZrsAurhUZZtmlHy9ATgtStyITX5cDekv/21tK+0JcV\nvO4F6r2gFH/+oT1\n<span class=\"token punctuation\">(</span>생략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">..</span>\n-----END CERTIFICATE----------BEGIN CERTIFICATE-----\nfVtRJrR2uhHbdBYLvFMNpzANBgkqhkiG9w0BAQwFADCB\niDELMAVyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOC\nAQ8AMIIBCgKCAQEA1nMz1tc8INAA0hdFuNY+B6I/x0H</code></pre></div>\n<h4 id=\"수정-후\" style=\"position:relative;\"><a href=\"#%EC%88%98%EC%A0%95-%ED%9B%84\" aria-label=\"수정 후 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>수정 후</h4>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">\n<span class=\"token comment\">## AFTER</span>\n-----BEGIN CERTIFICATE-----\nMOdUgph2fOKBZVrROOUwDQYJKoZIhGlnb1JT\nQURvbWFpblZhbGlkYXNLYanoVX8ET4pp\ndeJV9b9rWYUYUJja0i3+1LZrsAurhUZZtmlHy9ATgtStyITX5cDekv/21tK+0JcV\nvO4F6r2gFH/+oT1\n<span class=\"token punctuation\">(</span>생략<span class=\"token punctuation\">)</span><span class=\"token punctuation\">..</span>\n-----END CERTIFICATE-----\n----BEGIN CERTIFICATE-----\nfVtRJrR2uhHbdBYLvFMNpzANBgkqhkiG9w0BAQwFADCB\niDELMAVyIENBMIIBIjANBgkqhkiG9w0BAQEFAAOC\nAQ8AMIIBCgKCAQEA1nMz1tc8INAA0hdFuNY+B6I/x0H</code></pre></div>\n<p>위와 같이 개행을 제대로 해주고 나니 k8s tls secret 생성 시 정상적으로 tls secret이 생성에 성공했고,\nSSL checker에서도 경고 메세지가 사라졌으며, 모든 환경에서 tls 접속이 잘 되게 되었다.</p>\n<h2 id=\"2-istio-gateway-virtualservice-설정\" style=\"position:relative;\"><a href=\"#2-istio-gateway-virtualservice-%EC%84%A4%EC%A0%95\" aria-label=\"2 istio gateway virtualservice 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Istio Gateway, VirtualService 설정</h2>\n<h3 id=\"gateway-설정\" style=\"position:relative;\"><a href=\"#gateway-%EC%84%A4%EC%A0%95\" aria-label=\"gateway 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gateway 설정</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1alpha3\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Gateway\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>gateway\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>system\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">istio</span><span class=\"token punctuation\">:</span> ingressgateway\n  <span class=\"token key atrule\">servers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">443</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> https\n        <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> HTTPS\n      <span class=\"token key atrule\">tls</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">mode</span><span class=\"token punctuation\">:</span> SIMPLE\n        <span class=\"token key atrule\">credentialName</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>tls<span class=\"token punctuation\">-</span>secret\n      <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'abc.company'</span></code></pre></div>\n<h3 id=\"virtualservice-설정\" style=\"position:relative;\"><a href=\"#virtualservice-%EC%84%A4%EC%A0%95\" aria-label=\"virtualservice 설정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VirtualService 설정</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1alpha3\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> VirtualService\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>virtualservice\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>system\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">'abc.company'</span>\n  <span class=\"token key atrule\">gateways</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> my<span class=\"token punctuation\">-</span>gateway.istio<span class=\"token punctuation\">-</span>system.svc.cluster.local\n  <span class=\"token key atrule\">http</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">match</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">uri</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">prefix</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'/'</span>\n      <span class=\"token key atrule\">route</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">destination</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>service\n            <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">80</span></code></pre></div>\n<h2 id=\"3-istio에서-tls-작업-시-유의-사항\" style=\"position:relative;\"><a href=\"#3-istio%EC%97%90%EC%84%9C-tls-%EC%9E%91%EC%97%85-%EC%8B%9C-%EC%9C%A0%EC%9D%98-%EC%82%AC%ED%95%AD\" aria-label=\"3 istio에서 tls 작업 시 유의 사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Istio에서 TLS 작업 시 유의 사항</h2>\n<ul>\n<li>나는 dev라는 별도의 namespace에 gateway, vs, secret을 두고 https 연동이 안되어 많은 시간을 버렸다.</li>\n<li><strong>반드시, ingress-gateway가 존재하는 istio-system namespace에 gateway와 secret을 설정하여야 하고</strong>, VirtualService같은 경우는 FQDN으로 gateway를 위의 yaml과 같이 지정하면 어떤 namespace에 있어도 상관없지만, 이 또한 같은 namespace에 두고 FQDN을 안 적는 것이 속편할 수 있다.</li>\n<li>tls secret 생성 시 반드시 도메인 인증서와 체인 인증서를 결합한 ( 결합 시 개행에 유의 ) cominbed 인증서로 생성할 것!</li>\n</ul>","frontmatter":{"date":"May 08, 2024","title":"Istio 클러스터에 가비아 Sectico SSL/TLS 인증서 설치하기","categories":"Troubleshoot","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/troubleshoot-istio-tls/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/spa1/","nextSlug":"/rhcsa/","prevSlug":"/troubleshoot-istio-tls/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}