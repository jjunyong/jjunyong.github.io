{"componentChunkName":"component---src-templates-blog-template-js","path":"/onyou-restrospect/","result":{"data":{"cur":{"id":"e5369fc4-4b61-5ccb-b3f3-caeb1444a97d","html":"<h2 id=\"1-온유-앱을-시작하고-출시하기-까지\" style=\"position:relative;\"><a href=\"#1-%EC%98%A8%EC%9C%A0-%EC%95%B1%EC%9D%84-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B3%A0-%EC%B6%9C%EC%8B%9C%ED%95%98%EA%B8%B0-%EA%B9%8C%EC%A7%80\" aria-label=\"1 온유 앱을 시작하고 출시하기 까지 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 온유 앱을 시작하고 출시하기 까지</h2>\n<h2 id=\"2-배운-점--liked-learned-\" style=\"position:relative;\"><a href=\"#2-%EB%B0%B0%EC%9A%B4-%EC%A0%90--liked-learned-\" aria-label=\"2 배운 점  liked learned  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 배운 점 ( Liked, Learned )</h2>\n<h3 id=\"기술적-요소\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%88%A0%EC%A0%81-%EC%9A%94%EC%86%8C\" aria-label=\"기술적 요소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기술적 요소</h3>\n<h3 id=\"협업적-요소\" style=\"position:relative;\"><a href=\"#%ED%98%91%EC%97%85%EC%A0%81-%EC%9A%94%EC%86%8C\" aria-label=\"협업적 요소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>협업적 요소</h3>\n<h3 id=\"기획적-요소\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%ED%9A%8D%EC%A0%81-%EC%9A%94%EC%86%8C\" aria-label=\"기획적 요소 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기획적 요소</h3>\n<h2 id=\"3-아쉬웠던-점--lacked-\" style=\"position:relative;\"><a href=\"#3-%EC%95%84%EC%89%AC%EC%9B%A0%EB%8D%98-%EC%A0%90--lacked-\" aria-label=\"3 아쉬웠던 점  lacked  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 아쉬웠던 점 ( Lacked )</h2>\n<h3 id=\"기술적-요소--기술-부채와-개선점-\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%EC%88%A0%EC%A0%81-%EC%9A%94%EC%86%8C--%EA%B8%B0%EC%88%A0-%EB%B6%80%EC%B1%84%EC%99%80-%EA%B0%9C%EC%84%A0%EC%A0%90-\" aria-label=\"기술적 요소  기술 부채와 개선점  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기술적 요소 ( 기술 부채와 개선점 )</h3>\n<h3 id=\"기획적-요소-1\" style=\"position:relative;\"><a href=\"#%EA%B8%B0%ED%9A%8D%EC%A0%81-%EC%9A%94%EC%86%8C-1\" aria-label=\"기획적 요소 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>기획적 요소</h3>\n<h2 id=\"4-앞으로의-기대--longed-for-\" style=\"position:relative;\"><a href=\"#4-%EC%95%9E%EC%9C%BC%EB%A1%9C%EC%9D%98-%EA%B8%B0%EB%8C%80--longed-for-\" aria-label=\"4 앞으로의 기대  longed for  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 앞으로의 기대 ( Longed for )</h2>\n<h3 id=\"앱-스토어-링크\" style=\"position:relative;\"><a href=\"#%EC%95%B1-%EC%8A%A4%ED%86%A0%EC%96%B4-%EB%A7%81%ED%81%AC\" aria-label=\"앱 스토어 링크 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>앱 스토어 링크</h3>","excerpt":"1. 온유 앱을 시작하고 출시하기 까지 2. 배운 점 ( Liked, Learned ) 기술적 요소 협업적 요소 기획적 요소 3. 아쉬웠던 점 ( Lacked ) 기술적 요소 ( 기술 부채와 개선점 ) 기획적 요소 4. 앞으로의 기대 ( Longed for ) 앱 스토어 링크","frontmatter":{"date":"December 01, 2023","title":"[온유] 앱 개발&운영 회고","categories":"회고","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/onyou-restrospect/"}},"next":{"id":"ab4f7141-fb9a-569f-9981-99fdf7a64004","html":"<p>VM이 갑자기 재기동 되어 k8s 클러스터를 복구하였으나, redis가 재기동되지 않아서 <code class=\"language-text\">journalctl -xe</code> 명령으로 로그를 확인해보니</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">type=1400 audit(1700663555.037:17): avc:  denied ....</code></pre></div>\n<p>와 같은 오류가 출력되었다. 이는 SELinux의 audit 정책과 관련된 이슈이고, SELinux 정책을 off했다가 redis 재기동 후 on을 하는 방식으로 해결하였다.</p>\n<ul>\n<li>정책 off</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo setenforce 0</code></pre></div>\n<ul>\n<li>정책 on</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo setenforce 1</code></pre></div>","frontmatter":{"date":"November 22, 2023","title":"[Error] Redis 기동 실패 : SELinux","categories":"Error","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/error-redis-fail/"}},"prev":{"id":"734e5057-c036-5554-93b9-2360a0551aa2","html":"<h3 id=\"1-aem-core-technology의-구성\" style=\"position:relative;\"><a href=\"#1-aem-core-technology%EC%9D%98-%EA%B5%AC%EC%84%B1\" aria-label=\"1 aem core technology의 구성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. AEM Core Technology의 구성</h3>\n<ul>\n<li>Apache Sling</li>\n<li>OSGI Felix application runtime</li>\n<li>JCR content repository</li>\n</ul>\n<br>\nSling + OSGI Felix 가 Spring과 같은 역할을 하고 있는 것이고, JCR은 DB역할을 하는 것이다. \n<h3 id=\"2-osgi-felix-application-runtime\" style=\"position:relative;\"><a href=\"#2-osgi-felix-application-runtime\" aria-label=\"2 osgi felix application runtime permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. OSGI Felix application runtime</h3>\n<p>OSGI 주요 콘솔은 아래와 같다.</p>\n<ul>\n<li><code class=\"language-text\">/system/console/configMgr</code> 콘솔</li>\n<li><code class=\"language-text\">/system/console/bundles</code> 콘솔</li>\n<li><code class=\"language-text\">/system/console/servicegraph</code> 콘솔\n<ul>\n<li>모든 bundle은 서로 간의 dependency를 가지며, apache felix가 가장 root인 (id=0) bundle이다. 해당 콘솔에서는 bundle간의 의존 관계를 파악할 수 있다.</li>\n<li>하위의 bundle이 죽게 되면 거기에 의존하고 있는 상위의 bundle도 malfunction하게 된다. 이는 트러블슈팅 시에 중요한 개념이다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-데이터-저장-방식\" style=\"position:relative;\"><a href=\"#3-%EB%8D%B0%EC%9D%B4%ED%84%B0-%EC%A0%80%EC%9E%A5-%EB%B0%A9%EC%8B%9D\" aria-label=\"3 데이터 저장 방식 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 데이터 저장 방식</h3>\n<ul>\n<li>데이터 저장 시 현대기아는 tarMK 방식 사용 (서버의 repository 폴더), Cluster 방식에서는 mmongoDB, AWS s3, Azure blob storage등을 활용할 수도 있다.</li>\n</ul>\n<h3 id=\"4-reusability\" style=\"position:relative;\"><a href=\"#4-reusability\" aria-label=\"4 reusability permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Reusability</h3>\n<p>AEM에는 Reusability를 위한 여러가지 컴포넌트가 있는데, Live copy 기능을 활용한 K dealer site가 가장 강력한 예시이다.</p>\n<ul>\n<li>AEM core components</li>\n<li>Multi stie manager : Live copy\n<ul>\n<li>Dealer website</li>\n</ul>\n</li>\n<li>Content Fragment, Experience Fragment</li>\n</ul>\n<h3 id=\"5-caching\" style=\"position:relative;\"><a href=\"#5-caching\" aria-label=\"5 caching permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. Caching</h3>\n<ul>\n<li>caching layer\n<ul>\n<li>CDN, dispatcher, application 레벨에서 캐싱이 일어난다.</li>\n<li>CDN, dispatcher에서 캐싱 룰을 적용하지만 <code class=\"language-text\">resonse.setHeader(\"Dispatcher\", \"no-cache\")</code> 와 같이 cache policy를 application level에서 설정하는 경우도 있다.</li>\n</ul>\n</li>\n<li>특히 이벤트/캠페인 시 일관되지 못한 parameter들이 url에 붙게 되는데 이를 AEM에서는 cache의 key로 인식하여 매번 html을 생성하게 되는데 이는 publisher에 대한 부하를 야기하기 때문에 Ignoring URL parameter 사용하면 cache의 key가 아님을 명시해줄 수 있다.\n<ul>\n<li>이는 dispatcher.any에서 설정 가능</li>\n</ul>\n</li>\n<li>그리고 jennifer, scouter 등에서 html에 대해서는 디폴트로 측정을 안하게 되어 있는데 이를 측정하게 enable해야 실제 html생성에 대한 부하까지 확인할 수 있다.</li>\n</ul>\n<h3 id=\"6-monitoring--request-performance\" style=\"position:relative;\"><a href=\"#6-monitoring--request-performance\" aria-label=\"6 monitoring  request performance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Monitoring &#x26; Request performance</h3>\n<ul>\n<li>stack trace 뜨면 어디에 transaction이 위치하는 지 알 수 있다.</li>\n<li><code class=\"language-text\">kill -3 {pid}</code> 명령을 하면 stack trace를 남길 수 있다.\n<ul>\n<li>crx-quickstart/logs/stdout.log</li>\n<li>crx-quickstart/threaddump</li>\n<li>queued thread pool</li>\n<li>qtpXXXXXXX 가 실제 작업 thread id</li>\n<li>I/O bind, CPU bind등에 대한 판단 근거를 알 수 있다.</li>\n<li>S차량 case의 경우 transaction id가 전부 하나로 묶여 있었을 것임.</li>\n</ul>\n</li>\n<li>qtpXXXXX thread 개수는 AEM publishe(jetty)에서 디폴트 200개로 잡혀 있다.\n<ul>\n<li>이를 고려할 때 AEM proxyfilter에서의 connPool size는 200정도로 잡는 것이 무방하다.</li>\n</ul>\n</li>\n<li>로그 볼 때 hx editor + vs code 활용하기</li>\n</ul>\n<h4 id=\"부하테스터-oha\" style=\"position:relative;\"><a href=\"#%EB%B6%80%ED%95%98%ED%85%8C%EC%8A%A4%ED%84%B0-oha\" aria-label=\"부하테스터 oha permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>부하테스터 (oha)</h4>\n<ul>\n<li>oha -c 200 -n 2000 {url} 로 간단하게 CLI 기반 부하 테스트가 가능하다.</li>\n<li>qtp* thread는 디폴트 200개이므로 단일 request에 sleep 10초를 걸어둔 url을 위와 같이 200개 동시 부하로 테스트해도 모두 10.X초 이내에 들어온다. 그러나 -c 200을 넘기게 되면 일부 request들이 queueing되면서 response time이 길어지게 된다.</li>\n</ul>\n<h4 id=\"request-sequence\" style=\"position:relative;\"><a href=\"#request-sequence\" aria-label=\"request sequence permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Request sequence</h4>\n<ul>\n<li>request.log에서 request sequence번호에 대해 확인 가능하여 동일한 sequence 번호에 대해 시작과 끝을 확인할 수 있다.\n<ul>\n<li><code class=\"language-text\">java -jar /opt/.../rlog.jar request.log</code> 명령과 같이 rlog.jar 활용하면 reuqest.log의 내용을 시간으로 정리된 상태로 볼 수 있음.</li>\n<li><code class=\"language-text\">perl graph-request-log.pl --title \"Request graph log\" --output output.png reqeust.log | grep gnuplot</code> 명령을 활용하면 request.log의 내용을 시각화하여 볼 수 있고, 이를 통해 평소와 문제 상황에서의 request 처리 시간에 대한 모니터링이 가능하다.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"query-performance\" style=\"position:relative;\"><a href=\"#query-performance\" aria-label=\"query performance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Query performance</h4>\n<ul>\n<li>JCR에 대한 slow query, populoar query를 확인할 수 있음</li>\n<li>AEM 순수 기능을 이용 많이 할 때 활용하기 좋음. API로 외부에서 데이터 가져오는 시스템의 경우 활용도가 낮음</li>\n</ul>\n<h3 id=\"7-배포\" style=\"position:relative;\"><a href=\"#7-%EB%B0%B0%ED%8F%AC\" aria-label=\"7 배포 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. 배포</h3>\n<ul>\n<li>Jenkins 배포 시 purge 자동화 ( GCP ) 가능</li>\n<li>Dispatcher flush도 자동화 할 수도 있음\n<ul>\n<li>Dispatcher flush도 trigger로 작업</li>\n<li>AEM dispatcher custom invalidation script 활용\n<ul>\n<li>invalidateHandler</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>frontend영역은 배포 시 웹팩 사용하도록 개선 됨</li>\n</ul>\n<h3 id=\"8-security\" style=\"position:relative;\"><a href=\"#8-security\" aria-label=\"8 security permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. Security</h3>\n<ul>\n<li>Authentication 방법으로는 현재 SAML 방식의 하나인 keycloak 사용 중\n<ul>\n<li>퍼블도 AEM 로그인을 해야 되도록 설정할 수 있음</li>\n</ul>\n</li>\n<li>Authorization\n<ul>\n<li>crx/de에서 /content/rep:policy 노드의 ‘Access control’에 권한이 정의됨.</li>\n</ul>\n</li>\n<li>kia.com 호출 시 kwpapi.kia.com 호출하는게 CORS가 문제가 된다면 dispatcher 레벨에서 reverseProxy rule 설정해서 넘겨주도록 해야 함\n<ul>\n<li>H 해외 동영상 이슈 ?</li>\n</ul>\n</li>\n<li>graphql instrospection code 비활성화 방법 ?</li>\n</ul>\n<h3 id=\"qa\" style=\"position:relative;\"><a href=\"#qa\" aria-label=\"qa permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q&#x26;A</h3>\n<ul>\n<li>car-managmenet.html 검색 노출\n<ul>\n<li>구글 webmaster에서 비활성화 설정 가능</li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"December 09, 2023","title":"[AEM] Training course","categories":"WEB","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/aem-seminar/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/onyou-restrospect/","nextSlug":"/error-redis-fail/","prevSlug":"/aem-seminar/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}