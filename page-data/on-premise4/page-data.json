{"componentChunkName":"component---src-templates-blog-template-js","path":"/on-premise4/","result":{"data":{"cur":{"id":"ca567892-1197-5142-89b7-611bdfc77df1","html":"<h2 id=\"istio-í™˜ê²½êµ¬ì„±\" style=\"position:relative;\"><a href=\"#istio-%ED%99%98%EA%B2%BD%EA%B5%AC%EC%84%B1\" aria-label=\"istio í™˜ê²½êµ¬ì„± permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Istio í™˜ê²½êµ¬ì„±</h2>\n<h3 id=\"istio-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#istio-%EC%84%A4%EC%B9%98\" aria-label=\"istio ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Istio ì„¤ì¹˜</h3>\n<p>ìƒê°ë³´ë‹¤ istio ì„¤ì¹˜í•˜ëŠ” ê²ƒ ìì²´ëŠ” ê°„ë‹¨í•˜ë‹¤. ì•„ë˜ì™€ ê°™ì€ ê³¼ì •ì„ ë”°ë¼ í•˜ë©´ ëì´ë‹¤.</p>\n<ul>\n<li>\n<p>Istioctl ë‹¤ìš´ë¡œë“œ : controlplaneì—ì„œ ë‹¤ìš´ë¡œë“œ í•œë‹¤.</p>\n<p><code class=\"language-text\">curl -L https://istio.io/downloadIstio | sh -</code></p>\n</li>\n<li>\n<p>istioctl ëª…ë ¹ì–´ ì‚¬ìš©í•˜ê¸° ìœ„í•œ PATH ë“±ë¡</p>\n<p><code class=\"language-text\">cd istio-1.17.2</code></p>\n<p><code class=\"language-text\">export PATH=$PWD/bin:$PATH</code></p>\n</li>\n<li>\n<p>istio ì„¤ì¹˜ ( <a href=\"https://istio.io/latest/docs/setup/install/istioctl/\">https://istio.io/latest/docs/setup/install/istioctl/</a> )</p>\n<ul>\n<li>\n<p>istioctlë¡œ ë°”ë¡œ ì„¤ì¹˜í•˜ê¸°</p>\n<p><code class=\"language-text\">istioctl install</code></p>\n<ul>\n<li>default Profileìœ¼ë¡œ ì„¤ì¹˜ë¨</li>\n<li>ì„¤ì¹˜ í›„ deploymentì— istiod, istio-ingressgatewayì„¤ì¹˜ë˜ì—ˆìŒì„ í™•ì¸ ê°€ëŠ¥</li>\n</ul>\n</li>\n<li>\n<p>istio-operatorë¡œ ì„¤ì¹˜í•˜ê¸°</p>\n<ul>\n<li><code class=\"language-text\">istioctl operator init</code> : ì´ë ‡ê²Œ í•˜ë©´ istio-operator namespaceì™€ í•¨ê»˜ istio-operator podê°€ ìƒì„±ëœë‹¤.</li>\n<li>ê·¸ëŸ° í›„ k apply -f ë¥¼ í•´ì„œ ì•„ë˜ istio-operator íŒŒì¼ì„ apply í•´ì£¼ë©´ istiod, istio-ingressgateway, egressgateway ë“± istioê°€ ì„¤ì¹˜ëœë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> install.istio.io/v1alpha1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> IstioOperator\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>system\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> example<span class=\"token punctuation\">-</span>istiocontrolplane\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n<span class=\"token key atrule\">profile</span><span class=\"token punctuation\">:</span> demo</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<h3 id=\"istio-ì„¤ì¹˜-ì¤‘-ingress-egress-podì„¤ì¹˜-ì•ˆë˜ë˜-error\" style=\"position:relative;\"><a href=\"#istio-%EC%84%A4%EC%B9%98-%EC%A4%91-ingress-egress-pod%EC%84%A4%EC%B9%98-%EC%95%88%EB%90%98%EB%8D%98-error\" aria-label=\"istio ì„¤ì¹˜ ì¤‘ ingress egress podì„¤ì¹˜ ì•ˆë˜ë˜ error permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>istio ì„¤ì¹˜ ì¤‘ ingress, egress podì„¤ì¹˜ ì•ˆë˜ë˜ error</h3>\n<p>istioë¥¼ ì„¤ì¹˜í•˜ë©´ ingress/egress podê°€ istio-system namespaceì—ì„œ 1/1 running ìƒíƒœê°€ ë˜ì–´ì•¼ í•˜ëŠ”ë°, 0/1 runningìœ¼ë¡œ ê³„ì† ë‚˜ì™€ì„œ í™•ì¸í•´ë³´ë‹ˆ ì•„ë˜ì™€ ê°™ì€ ë¡œê·¸ê°€ ë°˜ë³µë˜ê³  ìˆì—ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">warning envoy config external/envoy/source/common/config/grpc_stream.h:153 StreamSecrets gRPC config stream to sds-grpc closed: 2, failed to generate secret for default: failed to generate workload certificate: create certificate: rpc error: code = Unavailable desc = connection error: desc = \"transport: Error while dialing: dial tcp: lookup istiod.istio-system.svc on 10.96.0.10:53: read udp 172.16.189.76:32810->10.96.0.10:53: i/o timeout\"  thread=12</code></pre></div>\n<p>ë‚´ìš©ì„ ë³´ë©´ istiodì™€ ingressgatewayë¥¼ ë­”ê°€ ì—°ê²°í•´ì£¼ì§€ ëª»í•˜ëŠ” ë¬¸ì œë¡œ ìƒê°ë˜ì—ˆë‹¤. â€˜lookup istiod.istio-system.svc on 10.96.0.10:53â€™ timeoutì´ ë‚˜ê³  ìˆì—ˆê¸° ë•Œë¬¸ì—.\nì´ê²ƒì €ê²ƒ êµ¬ê¸€ë§ í•´ë³´ë‹¤ë³´ë‹ˆ ê²°êµ­ corednsì™€ ì—°ê´€ëë‹¤ëŠ” íŒë‹¨ì„ í•˜ê³ , coredns serviceì˜ cluster_ipë¥¼ ì§ì ‘ ëª…ì‹œí•´ì£¼ë„ë¡ Corefileì„ ìˆ˜ì •í–ˆë‹¤. Corefileì€ configmap ìˆ˜ì •ì„ í†µí•´ì„œë§Œ ë°˜ì˜ëœë‹¤.</p>\n<ul>\n<li>ë³€ê²½ ì „ Corefile\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">.:53 <span class=\"token punctuation\">{</span>\n    errors\n    health <span class=\"token punctuation\">{</span>\n      lameduck 5s\n    <span class=\"token punctuation\">}</span>\n    ready\n    kubernetes cluster.local in-addr.arpa ip6.arpa <span class=\"token punctuation\">{</span>\n      pods insecure\n      fallthrough in-addr.arpa ip6.arpa\n      ttl <span class=\"token number\">30</span>\n    <span class=\"token punctuation\">}</span>\n    prometheus :9153\n    forward <span class=\"token builtin class-name\">.</span> /etc/resolv.conf <span class=\"token punctuation\">{</span>\n      max_concurrent <span class=\"token number\">1000</span>\n    <span class=\"token punctuation\">}</span>\n    cache <span class=\"token number\">30</span>\n    loop\n    reload\n    loadbalance\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>ë³€ê²½ í›„ Corefile\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">.:53 <span class=\"token punctuation\">{</span>\n    errors\n    health <span class=\"token punctuation\">{</span>\n      lameduck 5s\n    <span class=\"token punctuation\">}</span>\n    ready\n    kubernetes cluster.local in-addr.arpa ip6.arpa <span class=\"token punctuation\">{</span>\n      pods insecure\n      fallthrough in-addr.arpa ip6.arpa\n      ttl <span class=\"token number\">30</span>\n    <span class=\"token punctuation\">}</span>\n    prometheus :9153\n    forward <span class=\"token builtin class-name\">.</span> <span class=\"token number\">10.96</span>.0.10 <span class=\"token punctuation\">{</span>\n      max_concurrent <span class=\"token number\">1000</span>\n    <span class=\"token punctuation\">}</span>\n    cache <span class=\"token number\">30</span>\n    loop\n    reload\n    loadbalance\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ê¸°ì¡´ì˜ CoreDns configmap ì €ì¥</span>\nkubectl <span class=\"token parameter variable\">-n</span> kube-system get configmap coredns <span class=\"token parameter variable\">-o</span> yaml <span class=\"token operator\">></span> coredns-configmap.yaml \n<span class=\"token comment\"># ìœ„ì™€ ê°™ì´ ë³€ê²½ì „ -> í›„ì˜ ë‚´ìš©ì°¨ì´ë¥¼ ë°˜ì˜í•˜ê¸° </span>\n<span class=\"token function\">vi</span> coredns-configmap.yaml \n<span class=\"token comment\"># Configmap ì—…ë°ì´íŠ¸ </span>\nkubectl replace <span class=\"token parameter variable\">-f</span> coredns-configmap.yaml \n<span class=\"token comment\"># CoreDNS pod ì¬ì‹œì‘</span>\nkubectl <span class=\"token parameter variable\">-n</span> kube-system delete pod <span class=\"token parameter variable\">-l</span> k8s-app<span class=\"token operator\">=</span>kube-dns </code></pre></div>\n<p>ì´ë ‡ê²Œ í•˜ê³  í™•ì¸í•´ë³´ë‹ˆ istio-ingressgateway/egressgatewayê°€ ì •ìƒì ìœ¼ë¡œ â€˜1/1 runningâ€™ ìƒíƒœë¡œ ì„¤ì¹˜ëœ ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆì—ˆë‹¤.</p>\n<hr>\n<h3 id=\"istio-proxy-ë°°í¬í•˜ê¸°\" style=\"position:relative;\"><a href=\"#istio-proxy-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"istio proxy ë°°í¬í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Istio proxy ë°°í¬í•˜ê¸°</h3>\n<p>istioëŠ” application podì— sidecarë¡œ istio-proxy ì»¨í…Œì´ë„ˆë¥¼ ë°°í¬í•¨ìœ¼ì¨ istio-proxy ì»¨í…Œì´ë„ˆê°€ podì— ëŒ€í•œ ëª¨ë“  íŠ¸ë˜í”½ì„ ì¤‘ê°œí•˜ê²Œ ëœë‹¤.\nì´ë¯¸ êµ¬ì„±ëœ k8s í´ëŸ¬ìŠ¤í„°ì—ì„œ istio-proxy ì»¨í…Œì´ë„ˆë¥¼ injectí•˜ëŠ” ë°©ë²•ì€ ì•„ë˜ì™€ ê°™ë‹¤.</p>\n<h3 id=\"kube-inject\" style=\"position:relative;\"><a href=\"#kube-inject\" aria-label=\"kube inject permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kube-inject</h3>\n<p><code class=\"language-text\">istioctl kube-inject -f deployment-nginx.yaml | kubectl apply -f -</code>\nâ†’ ì´ë ‡ê²Œ í•˜ë©´ nginx deploymentì— í•´ë‹¹í•˜ëŠ” podì— istio-proxyê°€ ì‚½ì…ëœë‹¤.</p>\n<h3 id=\"auto-injection\" style=\"position:relative;\"><a href=\"#auto-injection\" aria-label=\"auto injection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Auto Injection</h3>\n<ul>\n<li>\n<p><strong>namespace labelì„ í†µí•œ ìë™ ì£¼ì… ë°©ë²•</strong></p>\n<p>ì¼ë°˜ì ìœ¼ë¡œ ë” ê°„í¸í•œ ë°©ë²•ì€ í•´ë‹¹í•˜ëŠ” namespaceì˜ ì „ì²´ podì— istio-proxyë¥¼ ì£¼ì…í•˜ëŠ” ë°©ë²•ì´ë‹¤.</p>\n<p><code class=\"language-text\">kubectl label namespace default istio-injection=enabled --</code>\n: default namespaceì˜ ëª¨ë“  Podì— ì‚¬ì´ë“œì¹´ ì£¼ì…</p>\n<ul>\n<li>ì‚¬ì´ë“œì¹´ ì œê±° ëª…ë ¹ : <code class=\"language-text\">kubectl label namespace default istio-injection-</code></li>\n</ul>\n</li>\n<li>\n<p>k logs -c ì˜µì…˜ í†µí•´ istio-proxyì˜ ë¡œê·¸ë§Œ ë”°ë¡œ ë³¼ ìˆ˜ë„ ìˆë‹¤.</p>\n<p><code class=\"language-text\">k logs nginx-deployment-xxxyyzz -c istio-proxy</code></p>\n</li>\n<li>\n<p>enableëœ namespace ë¼ë„ injectionì„ ì›ì¹˜ì•ŠëŠ” podëŠ” podì˜ labelì„ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ë©´ istio-proxy ì£¼ì…ì´ ë˜ì§€ ì•Šë„ë¡ disableì„¤ì • ê°€ëŠ¥í•˜ë‹¤.</p>\n<p><code class=\"language-text\">sidecar.istio.io/inject: â€œfalseâ€</code></p>\n</li>\n</ul>\n<h3 id=\"metallb-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#metallb-%EC%84%A4%EC%B9%98\" aria-label=\"metallb ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MetalLB ì„¤ì¹˜</h3>\n<p>ì•„ë˜ ê³µì‹ ì„¤ì¹˜ urlì—ì„œ â€˜installation by manifestâ€™ ë¶€ë¶„ì„ ìˆ˜í–‰í•œë‹¤.\n<a href=\"https://metallb.universe.tf/installation/#installation-by-manifest\">https://metallb.universe.tf/installation/#installation-by-manifest</a></p>\n<ul>\n<li>\n<p>kubemodeë¥¼ ipvsë¡œ, strictARPë¥¼ trueë¡œ ì„¤ì •í•œë‹¤</p>\n</li>\n<li>\n<p><code class=\"language-text\">kubectl edit configmap -n kube-system kube-proxy</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\napiVersion: [kubeproxy.config.k8s.io/v1alpha1](http://kubeproxy.config.k8s.io/v1alpha1)\nkind: KubeProxyConfiguration\nmode: \"ipvs\"\nipvs:\n  strictARP: true</code></pre></div>\n</li>\n<li>\n<p>ì„¤ì¹˜</p>\n<ul>\n<li><code class=\"language-text\">kubectl apply -f https://raw.githubusercontent.com/metallb/metallb/v0.13.10/config/manifests/metallb-native.yaml</code></li>\n</ul>\n</li>\n</ul>\n<p>ìœ„ì™€ ê°™ì´ í•˜ë©´ ì„¤ì¹˜ëŠ” ë‹¤ ë˜ê²Œ ë˜ëŠ”ë°, ì´ ìƒíƒœì—ì„œëŠ” LoadBalancer typeì˜ ì„œë¹„ìŠ¤ì¸ istio-ingressgateway serviceì˜ EXTERNAL-IPê°€ ì•„ì§ Pendingìƒíƒœì¼ ê²ƒì´ë‹¤.\nMetablLBë¥¼ í†µí•´ í•´ë‹¹ ì„œë¹„ìŠ¤ì— ipë¥¼ í• ë‹¹í•´ì£¼ë ¤ë©´ ì•„ë˜ ì„¤ì • pageë¥¼ ì°¸ê³ í•˜ì—¬ Layer2 Configurationìœ¼ë¡œ ipaddresspoolê³¼ l2advertisementë¥¼ ì„¤ì •í•´ì£¼ë©´ ëœë‹¤.\nipaddresspoolì—ì„œëŠ” í˜¸ìŠ¤íŠ¸ ì„œë²„ì™€ í†µì‹  ê°€ëŠ¥í•œ ëŒ€ì—­ì„ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ì„¤ì •í•´ì£¼ë„ë¡ í•˜ì.</p>\n<ul>\n<li><a href=\"https://metallb.universe.tf/configuration/#layer-2-configuration\">https://metallb.universe.tf/configuration/#layer-2-configuration</a></li>\n</ul>\n<h3 id=\"istio-íŠ¸ë˜í”½-ë¼ìš°íŒ…-ì„¤ì •\" style=\"position:relative;\"><a href=\"#istio-%ED%8A%B8%EB%9E%98%ED%94%BD-%EB%9D%BC%EC%9A%B0%ED%8C%85-%EC%84%A4%EC%A0%95\" aria-label=\"istio íŠ¸ë˜í”½ ë¼ìš°íŒ… ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Istio íŠ¸ë˜í”½ ë¼ìš°íŒ… ì„¤ì •</h3>\n<p>ì™¸ë¶€ì—ì„œ istio ê¸°ë°˜ k8s í´ëŸ¬ìŠ¤í„°ë¡œ podë¡œ ìš”ì²­ì´ ì™”ì„ ë•Œ, íŠ¸ë˜í”½ì˜ ìˆœì„œëŠ” ë‹¤ìŒê³¼ ê°™ë‹¤.</p>\n<ol>\n<li>ì™¸ë¶€ -> LoadBlancer Typeì˜ istio-ingressgateway service</li>\n<li>istio-gw service -> istio-ingressgateway pod</li>\n</ol>\n<ul>\n<li>ì—¬ê¸°ì„œ Gateway, VirtualService ë¦¬ì†ŒìŠ¤ì™€ ë°”ì¸ë”© ëœë‹¤.</li>\n</ul>\n<ol start=\"3\">\n<li>istio-gw pod -> application service</li>\n</ol>\n<ul>\n<li>VirtualServiceì˜ ì„¤ì •ì„ í†µí•´ istio-gw podê°€ íŠ¸ë˜í”½ì„ applicationì˜ serviceë¡œ ë³´ë‚´ê²Œ ëœë‹¤.</li>\n</ul>\n<p>ë”°ë¼ì„œ ë§Œì•½ì— â€˜7777â€™ ì´ë¼ëŠ” istio ë””í´íŠ¸ ì„¤ì •ì—ëŠ” ì—†ëŠ” íŠ¹ì • portë¥¼ í†µí•´ applicaitonì„ ì„œë¹„ìŠ¤í•˜ê³  ì‹¶ë‹¤ë©´ ëª‡ ê°€ì§€ë¥¼ ì¶”ê°€ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>\n<h4 id=\"istio-ingressgateway-serviceì—-port-ì¶”ê°€\" style=\"position:relative;\"><a href=\"#istio-ingressgateway-service%EC%97%90-port-%EC%B6%94%EA%B0%80\" aria-label=\"istio ingressgateway serviceì— port ì¶”ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>istio-ingressgateway serviceì— Port ì¶”ê°€</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7777</span>\n  <span class=\"token key atrule\">targetPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7777</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> custom<span class=\"token punctuation\">-</span>port\n  <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> TCP</code></pre></div>\n<h4 id=\"gatewayì—ì„œ-í•´ë‹¹-port-listení•˜ë„ë¡-ì¶”ê°€\" style=\"position:relative;\"><a href=\"#gateway%EC%97%90%EC%84%9C-%ED%95%B4%EB%8B%B9-port-listen%ED%95%98%EB%8F%84%EB%A1%9D-%EC%B6%94%EA%B0%80\" aria-label=\"gatewayì—ì„œ í•´ë‹¹ port listení•˜ë„ë¡ ì¶”ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Gatewayì—ì„œ í•´ë‹¹ port Listení•˜ë„ë¡ ì¶”ê°€</h4>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.istio.io/v1beta1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Gateway\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> my<span class=\"token punctuation\">-</span>gateway\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">selector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">istio</span><span class=\"token punctuation\">:</span> ingressgateway\n  <span class=\"token key atrule\">servers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7777</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http\n        <span class=\"token key atrule\">protocol</span><span class=\"token punctuation\">:</span> HTTP\n      <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token string\">'*'</span>\n      <span class=\"token punctuation\">...</span></code></pre></div>\n<ul>\n<li>Gatewayì— ì´ë ‡ê²Œ portë¥¼ ì¶”ê°€í•˜ë©´ ingressgatewayì— 7777 portì— ëŒ€í•œ listenerê°€ ì¶”ê°€ëœë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">$ istioctl proxy-config listener istio-ingressgateway-9f6bc6bd7-szd5k <span class=\"token parameter variable\">-n</span> istio-system\n  ADDRESS PORT  MATCH DESTINATION\n  <span class=\"token number\">0.0</span>.0.0 <span class=\"token number\">7777</span>  ALL   Route: http.7777</code></pre></div>\n</li>\n</ul>\n<h4 id=\"ë§ˆì§€ë§‰ìœ¼ë¡œ-virtualservice-ì„¤ì •-ì¶”ê°€\" style=\"position:relative;\"><a href=\"#%EB%A7%88%EC%A7%80%EB%A7%89%EC%9C%BC%EB%A1%9C-virtualservice-%EC%84%A4%EC%A0%95-%EC%B6%94%EA%B0%80\" aria-label=\"ë§ˆì§€ë§‰ìœ¼ë¡œ virtualservice ì„¤ì • ì¶”ê°€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë§ˆì§€ë§‰ìœ¼ë¡œ VirtualService ì„¤ì • ì¶”ê°€</h4>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ virtualserviceì—ì„œë„ routing ì„¤ì •ì„ í•˜ì—¬ application serviceë¡œ íŠ¸ë˜í”½ì´ ì—°ê²°ë  ìˆ˜ ìˆë„ë¡ í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"> <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">match</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span> <span class=\"token number\">7777</span>\n    <span class=\"token key atrule\">route</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">destination</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">host</span><span class=\"token punctuation\">:</span> custom<span class=\"token punctuation\">-</span>service.<span class=\"token punctuation\">{</span>namespace<span class=\"token punctuation\">}</span>.svc.cluster.local\n        <span class=\"token key atrule\">port</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">number</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>application service's port<span class=\"token punctuation\">}</span></code></pre></div>\n<hr>\n<h2 id=\"ì°¸ê³ ìë£Œ\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"ì°¸ê³ ìë£Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ìë£Œ</h2>\n<ul>\n<li><a href=\"https://istio.io\">https://istio.io</a></li>\n<li><a href=\"https://learncloudnative.com/blog/2022-08-01-istio-gateway\">https://learncloudnative.com/blog/2022-08-01-istio-gateway</a></li>\n</ul>","excerpt":"Istio í™˜ê²½êµ¬ì„± Istio ì„¤ì¹˜ ìƒê°ë³´ë‹¤ istio ì„¤ì¹˜í•˜ëŠ” ê²ƒ ìì²´ëŠ” ê°„ë‹¨í•˜ë‹¤. ì•„ë˜ì™€ ê°™ì€ ê³¼ì •ì„ ë”°ë¼ í•˜ë©´ ëì´ë‹¤. Istioctl ë‹¤ìš´ë¡œë“œ : controlplaneì—ì„œ ë‹¤ìš´ë¡œë“œ í•œë‹¤.  istioctl ëª…ë ¹ì–´ ì‚¬ìš©í•˜ê¸° ìœ„í•œ PATH ë“±ë¡   istio ì„¤ì¹˜ ( https://istio.io/latest/docs/setup/install/istioctl/ ) istioctlë¡œ ë°”ë¡œ ì„¤ì¹˜í•˜ê¸°  default Profileìœ¼ë¡œ ì„¤ì¹˜ë¨ ì„¤ì¹˜ í›„ deploymentì— istiod, istio-ingressgatewayì„¤ì¹˜ë˜ì—ˆìŒì„ í™•ì¸ ê°€ëŠ¥ istio-operatorë¡œ ì„¤ì¹˜í•˜ê¸°  : ì´ë ‡ê²Œ í•˜ë©´ istio-operator namespaceì™€ í•¨ê»˜ istio-operator podê°€ ìƒì„±ëœë‹¤. ê·¸ëŸ° í›„ k apply -f ë¥¼ í•´ì„œ ì•„ë˜ istio-operator íŒŒì¼ì„ apply í•´ì£¼ë©´ istiod, istio-ingressgateway, egressgateway ë“± istioê°€ â€¦","frontmatter":{"date":"July 02, 2023","title":"On-premise 4. Istio í™˜ê²½ êµ¬ì¶•í•˜ê¸°","categories":"DevOps","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/on-premise4/"}},"next":{"id":"db355e4e-68b0-52ba-bab3-1048577684ab","html":"<h1 id=\"1-ì„œë²„vm-êµ¬ì¶•\" style=\"position:relative;\"><a href=\"#1-%EC%84%9C%EB%B2%84vm-%EA%B5%AC%EC%B6%95\" aria-label=\"1 ì„œë²„vm êµ¬ì¶• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ì„œë²„/VM êµ¬ì¶•</h1>\n<h2 id=\"1-ì„œë²„-ì…‹íŒ…\" style=\"position:relative;\"><a href=\"#1-%EC%84%9C%EB%B2%84-%EC%85%8B%ED%8C%85\" aria-label=\"1 ì„œë²„ ì…‹íŒ… permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ì„œë²„ ì…‹íŒ…</h2>\n<h3 id=\"1-ê³µìœ ê¸°-ì„¤ì •\" style=\"position:relative;\"><a href=\"#1-%EA%B3%B5%EC%9C%A0%EA%B8%B0-%EC%84%A4%EC%A0%95\" aria-label=\"1 ê³µìœ ê¸° ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) ê³µìœ ê¸° ì„¤ì •</h3>\n<ul>\n<li>ê³µìœ ê¸° ì–´ë“œë¯¼ ì½˜ì†”ì— ì ‘ê·¼í•˜ì—¬ DDNS ì„¤ì •, í¬íŠ¸í¬ì›Œë”©, ê³ ì •IP í• ë‹¹ì„ í•´ì¤€ë‹¤. ê³µìœ ê¸° ì½˜ì†”ì— ì ‘ê·¼ í•˜ëŠ” ë°©ë²•ì€ ê³µìœ ê¸° ì œì¡°ì‚¬ ë§ˆë‹¤ ë‹¤ë¥¸ë°, ë‚˜ì˜ ê²½ìš°ëŠ” tplinkë¼ì„œ 192.168.0.1ë¡œ ì ‘ê·¼ ê°€ëŠ¥</li>\n<li>ê³ ì • IP ì„¤ì •\n<ul>\n<li>ê³µìœ ê¸° ì½˜ì†”ì— ë“¤ì–´ê°€ë©´ ì—°ê²°ëœ ì„œë²„ì— ê³ ì • ipë¥¼ í• ë‹¹</li>\n</ul>\n</li>\n<li>í¬íŠ¸í¬ì›Œë”© ì„¤ì •\n<ul>\n<li>í• ë‹¹ëœ ê³ ì • ipì— í¬íŠ¸í¬ì›Œë”©ì„ ì„¤ì •í•œë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ê³µìœ ê¸°ë¡œ 8080 í¬íŠ¸ë¡œ ë“¤ì–´ì™”ì„ ë•Œ ì„œë²„ì˜ 9090í¬íŠ¸ë¡œ í¬ì›Œë”© ë˜ë„ë¡ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤.</li>\n</ul>\n</li>\n<li>ë™ì  DNS ì„¤ì • ( DDNS )\n<ul>\n<li>ì‹¤ì œ ê³µìœ ê¸°ì˜ ê³µì¸ ipëŠ” ë³€ë™ë˜ê¸° ë•Œë¬¸ì— ë™ì  DNS ì„¤ì •ì„ í†µí•´ â€˜aaa.tplinkdns.comâ€™ ì´ëŸ° ë„ë©”ì¸ìœ¼ë¡œ ì™¸ë¶€ì—ì„œ ì„œë²„ë¡œ ì ‘ì† í•  ìˆ˜ ìˆë„ë¡ í•´ì£¼ì–´ì•¼ í•œë‹¤.</li>\n</ul>\n</li>\n<li>ì—¬ê¸°ê¹Œì§€ í•˜ë©´ aaa.tplinikdns.com:8080ìœ¼ë¡œ ì ‘ì†í–ˆì„ ë•Œ, ë‚´ ì„œë²„ê°€ ì„¤ì¹˜ëœ ê³µìœ ê¸°ì˜ 8080í¬íŠ¸ë¡œ ì ‘ì†ì´ ë˜ê²Œ ë˜ê³ , ê³ ì •ipì™€ í¬íŠ¸í¬ì›Œë”© ì„¤ì •ì„ í†µí•´ LANë‚´ì— ì¡´ì¬í•˜ëŠ” ë‚´ ì„œë²„ì˜ 9090í¬íŠ¸ë¡œ ì ‘ì†ë˜ê²Œ ë˜ëŠ” ê²ƒì´ë‹¤.</li>\n</ul>\n<h2 id=\"2-hyper-vë¡œ-vm-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#2-hyper-v%EB%A1%9C-vm-%EC%84%A4%EC%B9%98\" aria-label=\"2 hyper vë¡œ vm ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Hyper-Vë¡œ VM ì„¤ì¹˜</h2>\n<p><a href=\"https://keyhyuk-kim.medium.com/hyper-v-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C-%EC%BF%A0%EB%B2%84%EB%84%A4%ED%8B%B0%EC%8A%A4-master-worker-%ED%81%B4%EB%9F%AC%EC%8A%A4%ED%84%B0-%EA%B5%AC%EC%B6%95%ED%95%98%EA%B8%B0-b7aead20132f\">https://keyhyuk-kim.medium.com/hyper-v-í™˜ê²½ì—ì„œ-ì¿ ë²„ë„¤í‹°ìŠ¤-master-worker-í´ëŸ¬ìŠ¤í„°-êµ¬ì¶•í•˜ê¸°-b7aead20132f</a></p>\n<h3 id=\"ê°€ìƒ-ìŠ¤ìœ„ì¹˜-ì„¤ì •í•˜ê¸°\" style=\"position:relative;\"><a href=\"#%EA%B0%80%EC%83%81-%EC%8A%A4%EC%9C%84%EC%B9%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"ê°€ìƒ ìŠ¤ìœ„ì¹˜ ì„¤ì •í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê°€ìƒ ìŠ¤ìœ„ì¹˜ ì„¤ì •í•˜ê¸°</h3>\n<p>default switchëŠ” í˜¸ìŠ¤íŠ¸ ì„œë²„ê°€ ì¬ë¶€íŒ…ë  ë•Œ ë§ˆë‹¤ ipê°€ ë³€ê²½ë˜ë¯€ë¡œ, Hyper-Vì—ì„œ ìƒˆë¡œìš´ ê°€ìƒ ìŠ¤ìœ„ì¹˜ë¥¼ ìƒì„±í•˜ì—¬ VMë“¤ì´ í•´ë‹¹ ìŠ¤ìœ„ì¹˜ë¥¼ ì„ íƒí•˜ë„ë¡ í•´ì£¼ì–´ì•¼ í•œë‹¤. ë˜í•œ í˜¸ìŠ¤íŠ¸ ì„œë²„ì˜ ë„¤íŠ¸ì› ì„¤ì •ì—ì„œ ê°€ìƒ ìŠ¤ìœ„ì¹˜ì˜ ipì™€ subnet maskë¥¼ ì„¤ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>\n<ul>\n<li>\n<p>Hyper-V ê°€ìƒ ìŠ¤ìœ„ì¹˜ ì„¤ì •</p>\n<ul>\n<li>ë‚´ë¶€ ë„¤íŠ¸ì›Œí¬ë¡œ ì„ íƒ</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 95%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAACNklEQVQ4y42UyY7TQBCG/b5zQIK3QRy4IMQBpBGcOYDmwAWksUZJxo4z3tpuO17aS+whdn5UNbGVRImJpU+u3v7qqq5uzZEpgjBGGK2xTsiWSNIcTduiaRrUdc2QfQka32w2SNMUmlwnWPoBokCgVimwbQFs0VQlDGuF1WoF27bh+z48z7uIoHHfh/Z9JvHhl4v3Pyx8/JPhs17g032Jn2aOB/0eIghQliXyPJ9EqQJShtDe3fm4+eLi9a3Aq68R3nwLcXMr8fYuQBKFKMtqDPsSFG5VVQiEgJblBTyZwhcS6P4C6AD0eG5q9tx1Hfq+5/92u71I27bwXRcaKfd9x8ndNC2a9pmp6g1Mw8B8PsdsNoNlWWMuKflZlh1BzkMKmQTPfeQgDEMW03UdpmliuVyysOM4R5AjPhhxILjb7UYGQSEECxiGwYsGXNdlAfoHQcCOoyji+UeCh38StB0bpmng0TCQK4WyKFAUBZRSR9AY9QdSXhakJD/ta9Db1yDl71wOuU059NzpHdLiITzPc9kmqJ/CG8ONYxYle1JQSokkScZdDFDfwNher6dDJsE4jjlH50qEIJvGaacry4L7v0MhwWHhFDSHDiU83eFp2VwjOIy/FHZ0veA1wnEcTd+U0x2qPEdVFigLxTaF+fLSKH6RaL5GRrt/TAeoTY6GpBOFUgjjDIuVB8uLIKOYy4lEhvLim0K1Q6d0CvUfQm/d0hH4/WBCf7TxZDv8eFDh0z1fLBZ8Rf8BwZ+c/vC8/KQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1.png\"\n        title=\"image1.png\"\n        src=\"/static/2d4f7180998ab040fc5e9ad289f70a39/37523/image1.png\"\n        srcset=\"/static/2d4f7180998ab040fc5e9ad289f70a39/e9ff0/image1.png 180w,\n/static/2d4f7180998ab040fc5e9ad289f70a39/f21e7/image1.png 360w,\n/static/2d4f7180998ab040fc5e9ad289f70a39/37523/image1.png 720w,\n/static/2d4f7180998ab040fc5e9ad289f70a39/302a4/image1.png 1080w,\n/static/2d4f7180998ab040fc5e9ad289f70a39/07a9c/image1.png 1440w,\n/static/2d4f7180998ab040fc5e9ad289f70a39/cb425/image1.png 1678w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>ì´ë”ë„· ì†ì„± - ê³µìœ  ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ì—¬ LANê³¼ ipëŒ€ì—­ì„ ê³ ìœµí•˜ë„ë¡ ì„¤ì •í•œë‹¤.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABa0lEQVQoz41S7W6DMAzM+z/Zfm2rVKnSJFa0gkggkECSElrgJrsDdVM/Zskywrnz+RIRh4g+RnSuw/F4RNu28N5zds6BYpomADOuYxxHnE4nxvR9j3ma0HYdRKUbSFVCVRq6btAYy9XaFqrUUGUFF3p8ZhqyrKBrg7xQXGMcWIzzHi2dOSiILMuR5zmc8zyJJi5TQzhCKcX1ZbPH69s7ttstdrsd0jT9UQ5WR+GyDMJ7ByUlpJQsOXiPEAK6rkOMkS0g4DyNvOb5fMY4nvl7ni82LJWwgpSUZYkkSaC1XkFxGNgja+0KuBXUW/rOOQhSQ4SHw4FXJwJrDV8KES+E9/JaIWGY8OJX4B/DMDAReWeM4ZX/Am+pvBAGCLqAW7EMekZ4rZR8XwlvrULxbOVfHj4iXJIU/jeMtfRs/ONDxrCvdOOPsu8jCikhyPymaVDXNZq6Rq4qbD5SJF8F0nSPoijWp3QvqU+eS1ngGyKXpYRIVVfJAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2.png\"\n        title=\"image2.png\"\n        src=\"/static/a5b70267b8169b16bbcc0d659d80f5c7/37523/image2.png\"\n        srcset=\"/static/a5b70267b8169b16bbcc0d659d80f5c7/e9ff0/image2.png 180w,\n/static/a5b70267b8169b16bbcc0d659d80f5c7/f21e7/image2.png 360w,\n/static/a5b70267b8169b16bbcc0d659d80f5c7/37523/image2.png 720w,\n/static/a5b70267b8169b16bbcc0d659d80f5c7/f4281/image2.png 1016w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n<h3 id=\"vm-ìƒì„±í•˜ê¸°\" style=\"position:relative;\"><a href=\"#vm-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"vm ìƒì„±í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VM ìƒì„±í•˜ê¸°</h3>\n<p>Hyper-Vì—ì„œ â€˜ìƒˆë¡œ ë§Œë“¤ê¸°â€™ í†µí•´ì„œ VM ìƒì„±í•˜ë©´ ë¨.\nVM ìƒì„± ì‹œ,</p>\n<ul>\n<li>2ì„¸ëŒ€ VMìœ¼ë¡œ ìƒì„±</li>\n<li>VMë§ˆë‹¤ ì •ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ ì§€ì •í•´ì„œ í• ë‹¹í•˜ì˜€ìŒ.</li>\n<li>ê°€ìƒ ìŠ¤ìœ„ì¹˜ë¥¼ ìœ„ì—ì„œ ì„¤ì •í•œ â€˜ë‚´ë¶€â€™ ê°€ìƒ ìŠ¤ìœ„ì¹˜ ì„¤ì •</li>\n<li>controlplaneì€ VM, disk ëª¨ë‘ Cë“œë¼ì´ë¸Œì—ì„œ ì„¤ì¹˜í•˜ì˜€ìœ¼ë©°, worker ë…¸ë“œëŠ” hard diskëŠ” Dë“œë¼ì´ë¸Œì— .vhdx í• ë‹¹í•¨.</li>\n</ul>\n<h3 id=\"centos-79ì„¤ì¹˜í•˜ê¸°\" style=\"position:relative;\"><a href=\"#centos-79%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\" aria-label=\"centos 79ì„¤ì¹˜í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CentOS 7.9ì„¤ì¹˜í•˜ê¸°</h3>\n<p>í•˜ê¸° ë§í¬ë¥¼ ë”°ë¼ ì„¤ì¹˜í•˜ë©´ ë¨ ì‹ ê²½ ì¨ì•¼ í•  ë¶€ë¶„ì€,</p>\n<ul>\n<li>Timezone ì„œìš¸ë¡œ ì„¤ì •</li>\n<li>Disk ì„¤ì •</li>\n<li>Network interface ì„¤ì •</li>\n<li>VMì— OS ì„¤ì¹˜ë˜ëŠ” ë™ì•ˆ root ë° ê¸°íƒ€ adminê³„ì • ì„¤ì • ê°€ëŠ¥.</li>\n</ul>\n<p><a href=\"https://da2uns2.tistory.com/entry/Hyper-V-Hyper-V%EC%97%90-CentOS-%EC%84%A4%EC%B9%98%ED%95%98%EA%B8%B0\">https://da2uns2.tistory.com/entry/Hyper-V-Hyper-Vì—-CentOS-ì„¤ì¹˜í•˜ê¸°</a></p>\n<h3 id=\"vm-ê³ ì •-ip-ì„¤ì •\" style=\"position:relative;\"><a href=\"#vm-%EA%B3%A0%EC%A0%95-ip-%EC%84%A4%EC%A0%95\" aria-label=\"vm ê³ ì • ip ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>VM ê³ ì • IP ì„¤ì •</h3>\n<p>â€˜ë‚´ë¶€â€™ ê°€ìƒ ìŠ¤ìœ„ì¹˜ì˜ ip ë° ì„œë¸Œë„· ë§ˆìŠ¤í¬ë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ VMì— ë™ì (DHCP)ìœ¼ë¡œ ipê°€ í• ë‹¹ë˜ì§€ë§Œ, ë‚´ê°€ ì›í•˜ëŠ” ê²ƒì€ k8s í´ëŸ¬ìŠ¤í„° êµ¬ì¶•ì´ê³ \nì´ë¥¼ ìœ„í•´ì„œëŠ” ê° ë…¸ë“œì˜ ipëŠ” ê³ ì •ë˜ì–´ ìˆì–´ì•¼ í•œë‹¤. k8s apiserver ipê°€ ê³„ì† ë°”ë€Œë©´ ì•ˆë˜ë‹ˆê¹.\në”°ë¼ì„œ CentOS 7.9 ê¸°ì¤€ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì´ ê° VMì—ì„œ ipë¥¼ ì„¤ì •í•´ì£¼ì—ˆê³ , ì™¸ë¶€ì™€ì˜ ì—°ê²°ì„ ìœ„í•´ DNS ì„¤ì •ë„ í•´ì£¼ì–´ì•¼ í•œë‹¤.</p>\n<ul>\n<li>sudo vi /etc/sysconfig/network-scripts/ifcfg-eth0 ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ë‚´ìš© ì¶”ê°€ ( controlplane ê¸°ì¤€ )</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">    BOOTPROTO=static\n    IPADDR=192.168.X.Y\n    NETMASK=255.255.255.0\n    GATEWAY=192.168.X.1\n    DNS1=8.8.8.8\n    DNS2=8.8.4.4</code></pre></div>\n<ul>\n<li>ìœ„ì™€ ê°™ì´ ì„¤ì • í›„ sudo systemctl restart network ëª…ë ¹ì„ ì‹¤í–‰í•˜ë©´ ê³ ì •ipê°€ VMì— í• ë‹¹ëœë‹¤.</li>\n</ul>\n<p>ì´ë ‡ê²Œ VM ì„¤ì •, OS ì„¤ì¹˜ ë° ë„¤íŠ¸ì› ì„¤ì •ì´ ëë‚˜ë©´ K8S ì„¤ì¹˜ë¥¼ ì‹œì‘í•œë‹¤.</p>","frontmatter":{"date":"July 01, 2023","title":"On-premise 1. ê³µìœ ê¸°, ì„œë²„, ë„¤íŠ¸ì› ì„¤ì •","categories":"DevOps","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/on-premise1/"}},"prev":{"id":"5ddab0e0-9d57-5cdc-bf2f-23512b7453bb","html":"<h2 id=\"ssl-ì„¤ì •\" style=\"position:relative;\"><a href=\"#ssl-%EC%84%A4%EC%A0%95\" aria-label=\"ssl ì„¤ì • permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>SSL ì„¤ì •</h2>\n<hr>\n<h2 id=\"k8s-ë„¤íŠ¸ì›Œí¬-ê´€ë ¨-ì—ëŸ¬\" style=\"position:relative;\"><a href=\"#k8s-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EA%B4%80%EB%A0%A8-%EC%97%90%EB%9F%AC\" aria-label=\"k8s ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ ì—ëŸ¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>K8S ë„¤íŠ¸ì›Œí¬ ê´€ë ¨ ì—ëŸ¬</h2>\n<h3 id=\"cni-ì¬ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#cni-%EC%9E%AC%EC%84%A4%EC%B9%98\" aria-label=\"cni ì¬ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CNI ì¬ì„¤ì¹˜</h3>\n<h3 id=\"calico\" style=\"position:relative;\"><a href=\"#calico\" aria-label=\"calico permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calico</h3>\n<h4 id=\"calico-ì œê±°\" style=\"position:relative;\"><a href=\"#calico-%EC%A0%9C%EA%B1%B0\" aria-label=\"calico ì œê±° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calico ì œê±°</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl delete -f https://docs.projectcalico.org/manifests/calico.yaml</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">rm -rf /var/run/calico/\nrm -rf /var/lib/calico/\nrm -rf /etc/cni/net.d/\nrm -rf /var/lib/cni/</code></pre></div>\n<h4 id=\"calico-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#calico-%EC%84%A4%EC%B9%98\" aria-label=\"calico ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Calico ì„¤ì¹˜</h4>\n<p>On-premise2 k8s êµ¬ì„± ì°¸ì¡°</p>\n<h3 id=\"flannel\" style=\"position:relative;\"><a href=\"#flannel\" aria-label=\"flannel permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flannel</h3>\n<h4 id=\"flannel-ì„¤ì¹˜\" style=\"position:relative;\"><a href=\"#flannel-%EC%84%A4%EC%B9%98\" aria-label=\"flannel ì„¤ì¹˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flannel ì„¤ì¹˜</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">kubectl apply -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml</code></pre></div>\n<p>pod-cidr ì„¤ì •ì„ k8s clusterì™€ ë§ì¶°ì£¼ë„ë¡ í•˜ì.</p>\n<h4 id=\"flannel-ì œê±°\" style=\"position:relative;\"><a href=\"#flannel-%EC%A0%9C%EA%B1%B0\" aria-label=\"flannel ì œê±° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Flannel ì œê±°</h4>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">## flannel ì‚­ì œ\nkubectl delete -f https://raw.githubusercontent.com/flannel-io/flannel/master/Documentation/kube-flannel.yml\nkubeadm reset\n\nsystemctl stop kubelet\nsystemctl stop docker\n\nrm -rf /var/lib/cni/\nrm -rf /etc/cni/\nrm -rf /run/flannel\n\n## kube ì„¤ì • íŒŒì¼ ì‚­ì œ ##\nrm -rf $HOME/.kube\n\n## ë„¤íŠ¸ì›Œí¬ ì„¤ì • ì‚­ì œ ##\nifconfig cni0 down\nip link delete cni0\nip link delete flannel.1\n\nsystemctl start docker\n\n# ì„œë²„ reboot</code></pre></div>\n<hr>\n<h2 id=\"ì°¸ê³ ìë£Œ\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"ì°¸ê³ ìë£Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ìë£Œ</h2>\n<ul>\n<li><a href=\"https://lcc3108.github.io/articles/2020-12/certmanager\">https://lcc3108.github.io/articles/2020-12/certmanager</a></li>\n<li><a href=\"https://www.youtube.com/watch?v=BlzRx6ROiX0\">https://www.youtube.com/watch?v=BlzRx6ROiX0</a></li>\n</ul>","frontmatter":{"date":"July 02, 2023","title":"On-premise 5. ë„¤íŠ¸ì›Œí¬ ì„¤ì •","categories":"DevOps","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/on-premise5/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/on-premise4/","nextSlug":"/on-premise1/","prevSlug":"/on-premise5/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}