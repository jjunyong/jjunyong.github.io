{"componentChunkName":"component---src-templates-blog-template-js","path":"/cks6/","result":{"data":{"cur":{"id":"ef53088b-f9cf-5722-8183-1a6391e2a5e5","html":"<h3 id=\"base-image-footpring-ìµœì†Œí™”í•˜ê¸°\" style=\"position:relative;\"><a href=\"#base-image-footpring-%EC%B5%9C%EC%86%8C%ED%99%94%ED%95%98%EA%B8%B0\" aria-label=\"base image footpring ìµœì†Œí™”í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Base image footpring ìµœì†Œí™”í•˜ê¸°</h3>\n<ul>\n<li>base imageë€ ë¬´ì—‡ì¸ê°€? dockerfileì˜ <code class=\"language-text\">FROM</code> ì ˆì—ì„œ ëª…ì‹œí•˜ëŠ” ì´ë¯¸ì§€ëŠ” parent ì´ë¯¸ì§€ì´ë‹¤. ê°€ë ¹ ì•„ë˜ ì˜ˆì‹œì—ì„œ ë³´ëŠ” ê²ƒì²˜ëŸ¼ httpd ì´ë¯¸ì§€ëŠ” debianì´ë¼ëŠ” ì´ë¯¸ì§€ë¥¼ parentë¡œ ê°€ì§„ë‹¤. ê·¸ë¦¬ê³  debian ì´ë¯¸ì§€ëŠ” <code class=\"language-text\">FROM scratch</code> ë¡œ ë¶€í„° ìƒì„±ë˜ëŠ”ë°, ì´ë ‡ê²Œ scratchë¡œ ë¶€í„° ìƒì„±ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ base ì´ë¯¸ì§€ë¼ê³  í•˜ëŠ”ë°, parent ì´ë¯¸ì§€ë¼ëŠ” ì˜ë¯¸ë¡œ í˜¼ìš©ë˜ê¸°ë„ í•œë‹¤.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACj0lEQVQoz4WSW0tUURiG929S8ELEs3kospk9mjqKlEnEiJOmUkGQZXdKmWWamlrjMJVTeddNgdWdN4lTIHTQ0dTZe88+zklNn5hFBnXTgoe1btbD+718km7ofFh8z+TYOLNT00xPTDEz+Ui8J8YfMjc3R2QlwvLyMtFoFF3X0TTtL1T16FaRVC3O7N1hPCUFNNU1IJ+o5fixKipLyikvKqWwsJCKigry8/MJhUJkMhnxOR6PC45EiqKgKgqSYzm8fvmSm9euMHBrgBv9/fRf7+fq5Sv09fX9obOzkzdv3pJOp0VKwzCI63FUTWV7Z5u16Jq4JV3V+PrlGx9XVljJEokQ+fSJRDLBvyebzjJNLMvCMEy2YhsomsJ2TOVbdJ0dRUVKJVK8ehyks+0MvRcv0eXzC0ZvjzAxOsbQ0BDDd4YZHBxkaWlJSG3bFik3N38Qj+2gb66jf19D21hD0uI60/fvUVtWive0l0ZPPfWnZFzZLqtqqK6uFuTk5BAKPeXw8FAkdGwLJ/MT5/M7koHzJOZ7STztQko6KaZGhnFXFuBtasDb3Iy32UtjUxMutwu3201NTQ15eXnMP58Xo2cTOo6DbTtYpo6pbmMoW+ixH0i76QxPZmZpbqyn7ewZ2trO0d7eTmtrKy0tLfj9fnp6evD5OlhcXBTCRCIhEFLHwbIdDMtGN0ykdDLNi+AzfOcvcMnfzcUOPz6fT9Dd1U0gECAcDhMMBlldXeXg4IBUKiU4kmYrME1T9Crt7u7xeHSMkyWFNMh1nKw6TmX5McrKygTFxcWC3NxcwvNhkTAry65PMpn8PbothNlVkvb295l8+IDK0iI8njpktxvZLYvuZFnG4/HgcrnEgi8sLPxX+AvWCKLPlKLDXwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/b5a20678429702cc3b1acaaf391979d6/37523/image1.png\"\n        srcset=\"/static/b5a20678429702cc3b1acaaf391979d6/e9ff0/image1.png 180w,\n/static/b5a20678429702cc3b1acaaf391979d6/f21e7/image1.png 360w,\n/static/b5a20678429702cc3b1acaaf391979d6/37523/image1.png 720w,\n/static/b5a20678429702cc3b1acaaf391979d6/302a4/image1.png 1080w,\n/static/b5a20678429702cc3b1acaaf391979d6/07a9c/image1.png 1440w,\n/static/b5a20678429702cc3b1acaaf391979d6/ad1ae/image1.png 2270w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>Modularize : ê°ê°ì˜ ì´ë¯¸ì§€ëŠ” ì—¬ëŸ¬ ê¸°ëŠ¥ì„ í•˜ì§€ì•Šê³  1ê°œì˜ ì£¼ìš” ì—­í• ë§Œ í•˜ë„ë¡ ëª¨ë“ˆí™”ë˜ì–´ì•¼ í•œë‹¤.</li>\n<li>Persist state : ë°ì´í„°/stateì„ ì»¨í…Œì´ë„ˆë‚´ì— ë³´ê´€í•˜ì§€ ì•ŠëŠ”ë‹¤.</li>\n<li>â€˜Official imageâ€™ ì‚¬ìš©í•˜ê¸°</li>\n<li>ì´ë¯¸ì§€ë¥¼ ìµœì†Œí™”í•˜ê¸°\n<ul>\n<li>yum, wget, curl ê³¼ ê°™ì´ ê³µê²©ìê°€ í™œìš©í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ë“¤ì„ imageì— í¬í•¨ì‹œí‚¤ì§€ ì•Šì•„ì•¼ í•œë‹¤.</li>\n<li>production ì´ë¯¸ì§€ì™€ dev/stg ì´ë¯¸ì§€ëŠ” ë¶„ë¦¬ë˜ì–´ì•¼ í•œë‹¤.</li>\n<li>ê²°êµ­, ì´ë¯¸ì§€ì—ëŠ” application + runtime dependencyë§Œ ì¡´ì¬í•´ì•¼ í•œë‹¤.</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"vulnerability-scanning\" style=\"position:relative;\"><a href=\"#vulnerability-scanning\" aria-label=\"vulnerability scanning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vulnerability scanning</h4>\n<ul>\n<li>trivy íˆ´ì„ í™œìš©í•´ì„œ ì´ë¯¸ì§€ì˜ vulnerabilityë¥¼ ì¸¡ì •í•  ìˆ˜ ìˆë‹¤.</li>\n<li>alpineê³¼ ê°™ì´ image ë‚´ì— íŒ¨í‚¤ì§€ê°€ ì ì€ ê²ƒì€ vulnerabilityê°€ ë§¤ìš° ì ê²Œ ì¸¡ì •ëœë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">trivy image httpd # 124ê°œ ì·¨ì•½ì  ì¡´ì¬\ntrivy image httpd:alpine # 0ê°œ ì·¨ì•½ì  ì¡´ì¬ </code></pre></div>\n<h3 id=\"image-ë³´ì•ˆ\" style=\"position:relative;\"><a href=\"#image-%EB%B3%B4%EC%95%88\" aria-label=\"image ë³´ì•ˆ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>image ë³´ì•ˆ</h3>\n<ul>\n<li>image ì´ë¦„ ê·œì¹™</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 38.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABNElEQVQoz11Sy46DMAzk//9rD9tbhUor9SFUIATEq4QklKqa1ZimXfUwjGM7Yxsn6mqFTmfoawUzDmjaFnVdQ+sKbdtiGAZ0XSe+sixRVZUwkec5lFLim6YJ4zgiqtM9ivgHZfKLsatRKIU0TXG5XJBlGZqmeQtprd9CtMlFkaPUWgSNMYgm52HnBdbPcM4LxPYzLG05+4/tPO73O+Z5jRvrYKz9CBozgrB2gnNOYK0V4ck5uei9F2aRz9nDs/DrbF+iET+rwCrGIPlwOCDZ7WTEx+Mh1ZMkQXa9YlkWyTkej9hsNpITREXwvxjHIegn6Hs+n7IgFjmfzyLIZW23W8RxjNPp9L4fhe7CWNwUuwlbI263m1QPYwV/yGW87/u1w+/uWJkJZHbFJ/MNxhnj5skB/Id/D+JgDTgWT7AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/0dde4d9803111fc4bdc455ea132c9b96/37523/image2.png\"\n        srcset=\"/static/0dde4d9803111fc4bdc455ea132c9b96/e9ff0/image2.png 180w,\n/static/0dde4d9803111fc4bdc455ea132c9b96/f21e7/image2.png 360w,\n/static/0dde4d9803111fc4bdc455ea132c9b96/37523/image2.png 720w,\n/static/0dde4d9803111fc4bdc455ea132c9b96/302a4/image2.png 1080w,\n/static/0dde4d9803111fc4bdc455ea132c9b96/07a9c/image2.png 1440w,\n/static/0dde4d9803111fc4bdc455ea132c9b96/ddc6c/image2.png 1534w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>private registry\n<ul>\n<li>â€˜docker-registryâ€™ íƒ€ì…ì˜ secretìœ¼ë¡œ private registryì— ëŒ€í•œ credential ì •ë³´ë¥¼ ë³´ê´€.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 46.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB4klEQVQoz32R22oaURSG50XsxVjq1NFmMqlECmmrQ0Kv+wzpjVc+gga8EWdGSLRaj6WOh9ImUC+KpxtlWkHqe6QXOup4Pvxl7xygoXTBx1p7bfbiX/9mvny/ROwihmQyiUQiQUmn04hGo+h0OiCx2WxgmiZSifc4jyqIXZxD13+g3/+FXq/3F8zPfhe1Wg31eh3NZpPSarXQaDTQbrfR7XYpuq7jzZELov0xbDYbheO425q77zHfalWkPqSQyWSQzWaRy+XuyefztEfuCpqGt8dHeHXgwIEowul8BrvdDp7nab6DWcwWWK/XdC3CdrvFbrfDw5iYJqTXLyG5HHhx6IKwvw9BELC3J0AQbmoCMxgMQBgOhzCGBkajEcbjMWUymVDm8zmur3/j8LkIN/cIIs/B+fQJWNYKlmVhtVop5MwsFjcK71T+Sx2J1WqFq6tLVMolVCqfUS6XUSqVUCwWoWkaCoUChfn49RNCoRBkWYYciUCOyJBlBaqiQlVVKIqCYDBIP+l/QYQQu5jTd6fgeQdOjk/g8XggSRIkrwSv1wuPxwu32w2LxYJwOEwfTqdTasFsNqM1sYTYYxgGhYnH4/D7/QgGzxAIBChntzVRTrLP50O1WqUDl8slXZ9kYtfDwX8AtbsMfVNpFC8AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/b71e38be4e50ee55a8731dc5d2b0a732/37523/image3.png\"\n        srcset=\"/static/b71e38be4e50ee55a8731dc5d2b0a732/e9ff0/image3.png 180w,\n/static/b71e38be4e50ee55a8731dc5d2b0a732/f21e7/image3.png 360w,\n/static/b71e38be4e50ee55a8731dc5d2b0a732/37523/image3.png 720w,\n/static/b71e38be4e50ee55a8731dc5d2b0a732/302a4/image3.png 1080w,\n/static/b71e38be4e50ee55a8731dc5d2b0a732/07a9c/image3.png 1440w,\n/static/b71e38be4e50ee55a8731dc5d2b0a732/fc477/image3.png 2426w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></li>\n</ul>\n</li>\n</ul>\n<h4 id=\"registryì—-ëŒ€í•œ-whitelist-ë“±ë¡í•˜ê¸°\" style=\"position:relative;\"><a href=\"#registry%EC%97%90-%EB%8C%80%ED%95%9C-whitelist-%EB%93%B1%EB%A1%9D%ED%95%98%EA%B8%B0\" aria-label=\"registryì— ëŒ€í•œ whitelist ë“±ë¡í•˜ê¸° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Registryì— ëŒ€í•œ whitelist ë“±ë¡í•˜ê¸°</h4>\n<ul>\n<li>ì•ì„œ ë³´ì•˜ë“¯, ValidatingAdmissionWebhookì„ webhook ì„œë²„ ë˜ëŠ” OPAì™€ ì—°ë™í•˜ì—¬ registry ì´ë¦„ì— ëŒ€í•œ ê²€ì¦ì„ í•  ìˆ˜ ìˆì—ˆë‹¤.</li>\n<li>ì—¬ê¸°ì„œëŠ” ImagePolicyWebhookì„ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì„ ì¶”ê°€ë¡œ ì•Œì•„ë³¸ë‹¤.</li>\n<li><code class=\"language-text\">/etc/kuberenetes/admission-config.yaml</code> ê²½ë¡œì— ì•„ë˜ì™€ ê°™ì´ AdmissionConfiguration íŒŒì¼ì„ ìƒì„±í•˜ì—¬ ImagePolicyWebhook pluginì„ ëª…ì‹œí•˜ê³ , kubeconfig ì— ëŒ€í•œ ê²½ë¡œë¥¼ ì‘ì„±í•´ì¤˜ì•¼ í•œë‹¤. ê·¸ë¦¬ê³  kubeconfig íŒŒì¼ì—ì„œëŠ” registryë¥¼ ê²€ì¦í•´ì£¼ëŠ” api ì„œë²„ì— ëŒ€í•œ ì •ë³´ì™€ ì¸ì¦ì„œ ì •ë³´ë¥¼ í¬í•¨í•œë‹¤.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 32.22222222222222%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABVklEQVQY0yXQS47aQBSFYS+Lhx9FvcvgssF00y1QsoBAoigSCbQSKcNmB20YM2CTfwsz+CZHutI5N/mx+8bP71t2ux3b7ZbT6cTlcqH7+ODcdQ/nM13X8f/fX477Xxz//Ob49sbhcGC/3/P+fuJ2u3G9XklcMaRWI4zRCCEQoiDPM8REkKYpWZ4xHA4ZDAa0fkI0GdYanA/48KC1ZjweMxqPSCaTCa0vWARJXVoWU0sz88S6ppk31E1DFSu0MbQx8FQKmjilmpX4siSUoS9SFEUvcUrgtUArhbEOYy3OO4wxPW00VhucNpQ+8GQLvpYFqyAJSva5N7YXrCMJMqUyeX9stcRoiVKKvLhPz3tZmiJzgTUOLzKeXco8aII1KCnRUj0KKU1SzWZsFtPeyyKyXrW8vr6w3mx4Xq1YLpeP6XVNbBrq0vClsawbTzuPVDH2/78vu5f6BEiI6pt1OEagAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image4\"\n        title=\"image4\"\n        src=\"/static/0253b7967bc1799559a35eb29c47054a/37523/image4.png\"\n        srcset=\"/static/0253b7967bc1799559a35eb29c47054a/e9ff0/image4.png 180w,\n/static/0253b7967bc1799559a35eb29c47054a/f21e7/image4.png 360w,\n/static/0253b7967bc1799559a35eb29c47054a/37523/image4.png 720w,\n/static/0253b7967bc1799559a35eb29c47054a/302a4/image4.png 1080w,\n/static/0253b7967bc1799559a35eb29c47054a/07a9c/image4.png 1440w,\n/static/0253b7967bc1799559a35eb29c47054a/20a65/image4.png 2490w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></li>\n<li>ê·¸ë¦¬ê³  kube-apiserverì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•´ì¤˜ì•¼ í•œë‹¤.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB2UlEQVQoz22PzYsSARTABxETylaQKWnze3RmnNFx/G6LdqFD9Y9IoOKyFy8Kay4k2y2ctbsfYKx1aLuLXjy2t+0Piehj+8UMbRT04Pfeu7zfe0/odDp0u13a7TaWZbHZbFiv16xWK6cul0s+np/z4eyM+rMaB/v7NJpNmr9pNBrU63VqtRqtVgshlUohyzKqqpJMJgmHI4iiiMfjcRAEATNf4PXwFff1KEVDR1VkFFnGnr2at1EUBcFOtsyuwWAQj+eaI/kbXc9gDYfsGhKPdvLs3itTrVTQMxk0TfsHQUkrZI0syVSSO9vb+Hw+vF4vLpfLwRYahsGJZVHVJfbKWTRdJ61pqGmVdDqNZnMllMISSlwhfjdG6HYIMSASCAScd91utyPMm3mGQ4tUQuJh9QHV0g7lQoWiWaKQKzqX2mIb4WbBjy+3xXXjBoGCiBi6hX/L/0dmI0kSI+uEiBYj+6SA+biI+bSEYfd7RUrFCjnTxDByCL1Zn97kuUN/ekR/dMTgxYDj45cMBgMOD3tMJhMsa0Qw5CdZihI240TMGOF8lFhWQpFVUrJMIiEh/Pj8ncsvl/AV+Ab85L9xcfGJ09mU96dvWbx5x2K+YD6dM5vMmE6nztLxeMwvwTk3QlhCsN4AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image5\"\n        title=\"image5\"\n        src=\"/static/daa78a4d67226b238d52a14e145d2bca/37523/image5.png\"\n        srcset=\"/static/daa78a4d67226b238d52a14e145d2bca/e9ff0/image5.png 180w,\n/static/daa78a4d67226b238d52a14e145d2bca/f21e7/image5.png 360w,\n/static/daa78a4d67226b238d52a14e145d2bca/37523/image5.png 720w,\n/static/daa78a4d67226b238d52a14e145d2bca/302a4/image5.png 1080w,\n/static/daa78a4d67226b238d52a14e145d2bca/07a9c/image5.png 1440w,\n/static/daa78a4d67226b238d52a14e145d2bca/92a6b/image5.png 2334w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></li>\n<li><code class=\"language-text\">k describe po &lt;pod-name> | grep --registry-whitelist</code> ëª…ë ¹ì„ í•˜ë©´</li>\n</ul>\n<h3 id=\"kubesecì„-í™œìš©í•œ-resource-definition-ì •ì -ë¶„ì„\" style=\"position:relative;\"><a href=\"#kubesec%EC%9D%84-%ED%99%9C%EC%9A%A9%ED%95%9C-resource-definition-%EC%A0%95%EC%A0%81-%EB%B6%84%EC%84%9D\" aria-label=\"kubesecì„ í™œìš©í•œ resource definition ì •ì  ë¶„ì„ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>kubesecì„ í™œìš©í•œ resource-definition ì •ì  ë¶„ì„</h3>\n<ul>\n<li><code class=\"language-text\">kubesec scan pod.yaml</code> ê³¼ ê°™ì´ í•˜ì—¬ reportë¥¼ ë°›ì•„ë³¼ ìˆ˜ ìˆë‹¤.</li>\n<li>ë¬¸ì œ\n<ul>\n<li><code class=\"language-text\">/root/node.yaml</code>ë¥¼ ìŠ¤ìº”í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ <code class=\"language-text\">/root/kubesec_report.json</code> ì— ì €ì¥í•˜ê¸°\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  kubesec scan /root/node.yaml > /root/kubesec_report.json</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"image-scan\" style=\"position:relative;\"><a href=\"#image-scan\" aria-label=\"image scan permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Image scan</h3>\n<ul>\n<li>CVE ( Common vulnerability and exposures ) : ì•Œë ¤ì ¸ìˆëŠ” ë³´ì•ˆ ì·¨ì•½ì ë“¤ì„ CVEì—ì„œ ë“±ë¡í•˜ê³  ê´€ë¦¬í•œë‹¤.\n<ul>\n<li>CVE serverity scores\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.00000000000001%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACVElEQVQoz3WRPWjUcBjGM+rk2MlNRxdBBydBkS4VcVGhIArqUHGwuAgKImgdBBEEBxEUpRRErNVSlCJFtO31Wkux9uPS9preJZdcvj8uubvc/eQfabkOvvDkn+R98jzv80aaXv3N96U8U8t5ZlZmmFudYaGQY7GQY0WeRpan2FibRFn/gSL/RFmdQlnKoSzm2VyYpfhrjuLsPBu5Bdbyf5DOD/Vx8tVRLr49Qv/gIQaGDvLy3X5G3ncx+WEf8sge/FGJ9JNEOriX9HkX6aMDNG8fptF3nKS3h9rpXuJjV9novo90b+wx/cNXefD5Gs9GL/FmrJePX84x8fUs8+M9rH/rpjpxAnv8FNbwGazBC5gvLmM+vY7x8Bb6nbtoNweoXHnC8o3XSKpawdAtDMOmWnVQNRPLCdGrbnZWrQBVd6g6EeWKjelG6LaH4fiUDQvNtFEqOppts761hWTbNq7j4PseURSSxDFhEOy88zyXehJnaNQTAt/D9zw818nOJK4RhQGe6+LYNpLjOAhEUUSbNo1GHdOssrlZZLNYRJYLhGFAq9UiSWIqmkqpVEIuFDJOkiS00hRXCDoOkrgRqNVqiDIMHcuyiOMYXdcxTZNyuUQYhiiKgu/72WSGYWR9raKRpime52U6uwTFFNslnDtLrENwms0mQRDs6onvhJEQlcRFQAjU6/UsRi2KsqlEhO0SHE1TiWs1VFX9Z9hu0263/y+Ypk0sy9yJ0DmJWLqqljNTYdaZQAgK7o6gUO+MLFw7yeJZRBU/TpgJbqPZyHoC22sQOn8BXsIXcyvPAmcAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image6\"\n        title=\"image6\"\n        src=\"/static/fdb70620644711278fedc05d76554eae/37523/image6.png\"\n        srcset=\"/static/fdb70620644711278fedc05d76554eae/e9ff0/image6.png 180w,\n/static/fdb70620644711278fedc05d76554eae/f21e7/image6.png 360w,\n/static/fdb70620644711278fedc05d76554eae/37523/image6.png 720w,\n/static/fdb70620644711278fedc05d76554eae/302a4/image6.png 1080w,\n/static/fdb70620644711278fedc05d76554eae/07a9c/image6.png 1440w,\n/static/fdb70620644711278fedc05d76554eae/09262/image6.png 1896w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></li>\n<li>CVE Scanner : Trivy</li>\n</ul>\n</li>\n<li>Trivy\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">trivy image nginx:1.18.0\ntrivy image --serverity CRITICAL,HIGH nginx:1.18.0 # CRITICAL, HIGH êµ¬ë¶„ì˜ CVEë§Œ ì¡°íšŒ \ntrivy image --ignore-unfixed nginx:1.18.0 # s/w package upgrade ë¡œ í•´ê²°í•  ìˆ˜ ìˆëŠ” CVEë§Œ ì¡°íšŒ</code></pre></div>\n<ul>\n<li>Docker save ëª…ë ¹ìœ¼ë¡œ ì €ì¥ëœ .tar íŒŒì¼ë„ ê²€ì¦í•  ìˆ˜ ìˆë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">trivy image --input archive.tar</code></pre></div>\n<ul>\n<li>ë¬¸ì œ\n<ul>\n<li><code class=\"language-text\">python:3.10.0a4-alpine</code> imageë¥¼ pullë°›ì€ í›„ì— trivyë¡œ í•´ë‹¹ ì´ë¯¸ì§€ë¥¼ ìŠ¤ìº”í•˜ê³  ê·¸ ê²°ê³¼ë¥¼ <code class=\"language-text\">/root/python_alpine.txt</code> ì— ì €ì¥í•˜ë¼\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  crictl pull python:3.10.0a4-alpine\n  trivy image --output /root/python_alpine.txt python:3.10.0a4-alpine</code></pre></div>\n</li>\n<li><code class=\"language-text\">python:3.6.12-alpine3.11</code> imageë¥¼ ìŠ¤ìº”í•˜ê³  HIGH vulnerabilityì— ëŒ€í•œ ê²°ê³¼ë§Œ <code class=\"language-text\">/root/python.txt</code>ì— ì €ì¥í•˜ê¸°\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  trivy image --severity HIGH --output /root/python.txt </code></pre></div>\n</li>\n<li>trivy image â€”input /root/alpine.tar â€”format json â€”output /root/alpine.json</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h4 id=\"best-practice\" style=\"position:relative;\"><a href=\"#best-practice\" aria-label=\"best practice permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Best practice</h4>\n<ul>\n<li>ì¶”ê°€ì ì¸ vulnerabilityê°€ reportë  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ì§€ì†ì ìœ¼ë¡œ imageë¥¼ ìŠ¤ìº”í•˜ê¸°</li>\n<li>admission controllerë¥¼ í™œìš©í•˜ì—¬ deployë  ë•Œ scanë‹¨ê³„ë¥¼ ì¶”ê°€í•˜ê¸°</li>\n<li>í•˜ì§€ë§Œ deploy ì†ë„ì— ì˜í–¥ì´ ìˆì„ ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë³„ë„ì˜ image repositoryë¥¼ í™œìš©í•˜ì—¬ pre-scanned imageë§Œ ì‚¬ìš©í•˜ë„ë¡ í•˜ê¸°</li>\n<li>CI/CD ë‹¨ê³„ì—ì„œ image scan ë‹¨ê³„ ì¶”ê°€í•˜ê¸°</li>\n</ul>","excerpt":"Base image footpring ìµœì†Œí™”í•˜ê¸° base imageë€ ë¬´ì—‡ì¸ê°€? dockerfileì˜  ì ˆì—ì„œ ëª…ì‹œí•˜ëŠ” ì´ë¯¸ì§€ëŠ” parent ì´ë¯¸ì§€ì´ë‹¤. ê°€ë ¹ ì•„ë˜ ì˜ˆì‹œì—ì„œ ë³´ëŠ” ê²ƒì²˜ëŸ¼ httpd ì´ë¯¸ì§€ëŠ” debianì´ë¼ëŠ” ì´ë¯¸ì§€ë¥¼ parentë¡œ ê°€ì§„ë‹¤. ê·¸ë¦¬ê³  debian ì´ë¯¸ì§€ëŠ”  ë¡œ ë¶€í„° ìƒì„±ë˜ëŠ”ë°, ì´ë ‡ê²Œ scratchë¡œ ë¶€í„° ìƒì„±ë˜ëŠ” ì´ë¯¸ì§€ë¥¼ base ì´ë¯¸ì§€ë¼ê³  í•˜ëŠ”ë°, parent ì´ë¯¸ì§€ë¼ëŠ” ì˜ë¯¸ë¡œ í˜¼ìš©ë˜ê¸°ë„ í•œë‹¤.  Modularize : ê°ê°ì˜ ì´ë¯¸ì§€ëŠ” ì—¬ëŸ¬ ê¸°ëŠ¥ì„ í•˜ì§€ì•Šê³  1ê°œì˜ ì£¼ìš” ì—­í• ë§Œ í•˜ë„ë¡ ëª¨ë“ˆí™”ë˜ì–´ì•¼ í•œë‹¤. Persist state : ë°ì´í„°/stateì„ ì»¨í…Œì´ë„ˆë‚´ì— ë³´ê´€í•˜ì§€ ì•ŠëŠ”ë‹¤. â€˜Official imageâ€™ ì‚¬ìš©í•˜ê¸° ì´ë¯¸ì§€ë¥¼ ìµœì†Œí™”í•˜ê¸° yum, wget, curl ê³¼ ê°™ì´ ê³µê²©ìê°€ í™œìš©í•  ìˆ˜ ìˆëŠ” ëª…ë ¹ì–´ë“¤ì„ imageì— í¬í•¨ì‹œí‚¤ì§€ ì•Šì•„ì•¼ í•œë‹¤. production ì´ë¯¸ì§€ì™€ dev/stg ì´ë¯¸ì§€ëŠ” ë¶„ë¦¬ë˜ì–´ì•¼ í•œë‹¤. ê²°êµ­, ì´ë¯¸ì§€ì—ëŠ” applicatiâ€¦","frontmatter":{"date":"October 31, 2023","title":"[CKS] Supply chain ë³´ì•ˆ","categories":"DevOps","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/cks6/"}},"next":{"id":"a7c839c3-ea66-5eaf-982b-81c4c148d570","html":"<h2 id=\"powercenter-ê°œìš”\" style=\"position:relative;\"><a href=\"#powercenter-%EA%B0%9C%EC%9A%94\" aria-label=\"powercenter ê°œìš” permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PowerCenter ê°œìš”</h2>","frontmatter":{"date":"October 19, 2023","title":"Informatica 1","categories":"Data","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/etl1/"}},"prev":{"id":"1134ca78-268e-5c4a-a31f-00bb791ab714","html":"<h2 id=\"exam-1\" style=\"position:relative;\"><a href=\"#exam-1\" aria-label=\"exam 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>EXAM 1</h2>\n<h3 id=\"q1\" style=\"position:relative;\"><a href=\"#q1\" aria-label=\"q1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q1</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\nA pod has been created in the omni namespace. However, there are a couple of issues with it.\n\nThe pod has been created with more permissions than it needs.\nIt allows read access in the directory /usr/share/nginx/html/internal causing an Internal Site to be accessed publicly.\n\nTo check this, click on the button called Site (above the terminal) and add /internal/ to the end of the URL.\nUse the below recommendations to fix this.\n\nUse the AppArmor profile created at /etc/apparmor.d/frontend to restrict the internal site.\nThere are several service accounts created in the omni namespace. Apply the principle of least privilege and use the service account with the minimum privileges (excluding the default service account).\nOnce the pod is recreated with the correct service account, delete the other unused service accounts in omni namespace (excluding the default service account).\n\n\nYou can recreate the pod but do not create a new service accounts and do not use the default service account.\ncorrect service account used?\n\n- obsolete service accounts deleted?\n- internal-site restricted?\n- pod running?</code></pre></div>\n<h3 id=\"q1-answer\" style=\"position:relative;\"><a href=\"#q1-answer\" aria-label=\"q1 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q1 Answer</h3>\n<ol>\n<li>AppAromor profile ë¡œë“œí•˜ê¸°</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">apparmor_parser <span class=\"token parameter variable\">-q</span> /etc/apparmor.d/frontend</code></pre></div>\n<ol start=\"2\">\n<li>profile ì´ë¦„ìœ¼ë¡œ ì •ìƒ ë¡œë“œ í™•ì¸í•˜ê¸°</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">aa-status <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> restricted-frontend                      </code></pre></div>\n<ol start=\"3\">\n<li>default saë¥¼ ì œì™¸í•˜ê³  ê°€ì¥ ê¶Œí•œì´ ì ì€ <code class=\"language-text\">frontend-default</code> saë¥¼ frontend-site podì—ì„œ ì ìš©í•˜ë„ë¡ ì„¤ì •</li>\n</ol>\n<h3 id=\"q2\" style=\"position:relative;\"><a href=\"#q2\" aria-label=\"q2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q2</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A pod has been created in the orion namespace. It uses secrets as environment variables. Extract the decoded secret for the CONNECTOR_PASSWORD and place it under /root/CKS/secrets/CONNECTOR_PASSWORD.\n\nYou are not done, instead of using secrets as an environment variable, mount the secret as a read-only volume at path /mnt/connector/password that can be then used by the application inside.</code></pre></div>\n<h3 id=\"q2-answer\" style=\"position:relative;\"><a href=\"#q2-answer\" aria-label=\"q2 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q2 Answer</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">labels</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> app<span class=\"token punctuation\">-</span>xyz\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> app<span class=\"token punctuation\">-</span>xyz\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> orion\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span>\n            <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx\n            <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> app<span class=\"token punctuation\">-</span>xyz\n            <span class=\"token key atrule\">ports</span><span class=\"token punctuation\">:</span>\n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">containerPort</span><span class=\"token punctuation\">:</span> <span class=\"token number\">3306</span>\n            <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span> \n            <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>volume\n              <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /mnt/connector/password\n              <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>volume\n      <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">secretName</span><span class=\"token punctuation\">:</span> a<span class=\"token punctuation\">-</span>safe<span class=\"token punctuation\">-</span>secret</code></pre></div>\n<h3 id=\"q3\" style=\"position:relative;\"><a href=\"#q3\" aria-label=\"q3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q3</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A number of pods have been created in the delta namespace. Using the trivy tool, which has been installed on the controlplane, identify and delete pods except the one with least number of CRITICAL level vulnerabilities.\n\nNote: Do not modify the objects in anyway other than deleting the ones that have critical vulnerabilities.</code></pre></div>\n<h3 id=\"q3-answer\" style=\"position:relative;\"><a href=\"#q3-answer\" aria-label=\"q3 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q3 Answer</h3>\n<ul>\n<li>trivy image ëª…ë ¹ì–´ë¥¼ ì´ìš©í•´ ì‹¤í–‰ ì¤‘ì¸ pod ì¤‘ì— ê°€ì¥ vulnerabilityê°€ ì ì€ imageë¥¼ ì‹¤í–‰í•˜ê³  ìˆëŠ” podë§Œ ë‚¨ê¸°ê³  ëª¨ë‘ ì‚­ì œí•˜ê¸°</li>\n</ul>\n<h3 id=\"q4\" style=\"position:relative;\"><a href=\"#q4\" aria-label=\"q4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q4</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">Create a new pod called audit-nginx in the default namespace using the nginx image. Secure the syscalls that this pod can use by using the audit.json seccomp profile in the pod's security context.\n\nThe audit.json is provided at /root/CKS directory. Make sure to move it under the profiles directory inside the default seccomp directory before creating the pod</code></pre></div>\n<h3 id=\"q4-answer\" style=\"position:relative;\"><a href=\"#q4-answer\" aria-label=\"q4 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q4 Answer</h3>\n<ul>\n<li>mv /root/CKS/audit.json /var/lib/kubelet/seccomp/profiles</li>\n<li>Seccomp ì ìš©í•˜ì—¬ pod replaceí•˜ê¸°\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  apiVersion: v1\n  kind: Pod\n  metadata:\n    labels:\n      run: nginx\n    name: audit-nginx\n  spec:\n    securityContext:\n      seccompProfile:\n        type: Localhost\n        localhostProfile: profiles/audit.json\n    containers:\n    - image: nginx\n      name: nginx</code></pre></div>\n</li>\n</ul>\n<h3 id=\"q5\" style=\"position:relative;\"><a href=\"#q5\" aria-label=\"q5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q5</h3>\n<p>The CIS Benchmark report for the Controller Manager and Scheduler is available at the tab called CIS Report 1.</p>\n<p>Report ë‚´ìš©:</p>\n<ul>\n<li>[FAIL] 1.1.12 Ensure that the etcd data directory ownership is set to etcd:etcd (Automated)</li>\n<li>[FAIL] 1.3.2 Ensure that the â€”profiling argument is set to false (Automated)</li>\n<li>[FAIL] 1.4.1 Ensure that the â€”profiling argument is set to false (Automated)</li>\n</ul>\n<h3 id=\"q5-answer\" style=\"position:relative;\"><a href=\"#q5-answer\" aria-label=\"q5 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q5 Answer</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">The fixes are mentioned in the same report. Update the Controller Manager and Scheduler static pod definition file as per the recommendations.\n1. Make sure that the --profiling=false parameter is set.</code></pre></div>\n<h3 id=\"q6\" style=\"position:relative;\"><a href=\"#q6\" aria-label=\"q6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q6</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">There is something suspicious happening with one of the pods running an httpd image in this cluster.\nThe Falco service shows frequent alerts that start with: File below a known binary directory opened for writing.\n\nIdentify the rule causing this alert and update it as per the below requirements:\n\nOutput should be displayed as: CRITICAL File below a known binary directory opened for writing (user_id=user_id file_updated=file_name command=command_that_was_run)\nAlerts are logged to /opt/security_incidents/alerts.log\n\nDo not update the default rules file directly. Rather use the falco_rules.local.yaml file to override.\nNote: Once the alert has been updated, you may have to wait for up to a minute for the alerts to be written to the new log location.</code></pre></div>\n<h3 id=\"q6-answer\" style=\"position:relative;\"><a href=\"#q6-answer\" aria-label=\"q6 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q6 Answer</h3>\n<ul>\n<li><code class=\"language-text\">/etc/falco/falco.yaml</code>ì—ì„œ file_outputì„ enable í•˜ê¸°\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  file_output:\n    enabled: true\n    keep_alive: false\n    filename: /opt/security_incidents/alerts.log</code></pre></div>\n</li>\n<li><code class=\"language-text\">/etc/falco/falco_rules.local.yaml</code>ì—ì„œ rule ì‘ì„±í•˜ê¸°\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  - rule: Write below binary dir\n    desc: an attempt to write to any file below a set of binary directories\n    condition: >\n      bin_dir and evt.dir = &lt; and open_write\n      and not package_mgmt_procs\n      and not exe_running_docker_save\n      and not python_running_get_pip\n      and not python_running_ms_oms\n      and not user_known_write_below_binary_dir_activities\n    output: >\n      File below a known binary directory opened for writing (user_id=%user.uid file_updated=%fd.name command=%proc.cmdline)\n    priority: CRITICAL\n    tags: [filesystem, mitre_persistence]</code></pre></div>\n</li>\n<li><code class=\"language-text\">kill -1 $(cat /var/run/falco.pid)</code></li>\n</ul>\n<h3 id=\"q7\" style=\"position:relative;\"><a href=\"#q7\" aria-label=\"q7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q7</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">A pod called busy-rx100 has been created in the production namespace. Secure the pod by recreating it using the runtimeClass called gvisor. You may delete and recreate the pod.``</code></pre></div>\n<h3 id=\"q7-answer\" style=\"position:relative;\"><a href=\"#q7-answer\" aria-label=\"q7 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q7 Answer</h3>\n<ul>\n<li>ì•„ë˜ yamlíŒŒì¼ë¡œ gvisor runtimeClassë¡œ pod ìƒì„±í•˜ê¸°</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">apiVersion: v1\nkind: Pod\nmetadata:\n    labels:\n        run: busy-rx100\n    name: busy-rx100\n    namespace: production\nspec:\n    runtimeClassName: gvisor\n    containers:\n        -\n            image: nginx\n            name: busy-rx100</code></pre></div>\n<h3 id=\"q8\" style=\"position:relative;\"><a href=\"#q8\" aria-label=\"q8 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q8</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">We need to make sure that when pods are created in this cluster, they cannot use the latest image tag, irrespective of the repository being used.\n\nTo achieve this, a simple Admission Webhook Server has been developed and deployed. A service called image-bouncer-webhook is exposed in the cluster internally. \nThis Webhook server ensures that the developers of the team cannot use the latest image tag.\nMake use of the following specs to integrate it with the cluster using an ImagePolicyWebhook:\n\nCreate a new admission configuration file at /etc/admission-controllers/admission-configuration.yaml\nThe kubeconfig file with the credentials to connect to the webhook server is located at /root/CKS/ImagePolicy/admission-kubeconfig.yaml. \n\nNote: The directory /root/CKS/ImagePolicy/ has already been mounted on the kube-apiserver at path /etc/admission-controllers so use this path to store the admission configuration.\nMake sure that if the latest tag is used, the request must be rejected at all times.\nEnable the Admission Controller.\n\nFinally, delete the existing pod in the magnum namespace that is in violation of the policy and recreate it, ensuring the same image but using the tag 1.27.\n\nNOTE: If the kube-apiserver becomes unresponsive, this can affect the validation of this exam. In such a case, please restore the kube-apiserver using the backup file created at: /root/backup/kube-apiserver.yaml, wait for the API to be available again and proceed.\n</code></pre></div>\n<h3 id=\"q8-answer\" style=\"position:relative;\"><a href=\"#q8-answer\" aria-label=\"q8 answer permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Q8 Answer</h3>\n<ul>\n<li>\n<ol>\n<li>ì•„ë˜ì™€ ê°™ì€ <code class=\"language-text\">admission-configuration.yaml</code> íŒŒì¼ì„ k8s docì˜ ImagePolicyWebhook plugin ì˜ˆì‹œë¥¼ ì°¸ì¡°í•˜ì—¬ <code class=\"language-text\">/root/CKS/ImagePolicy</code> ê²½ë¡œì— ìƒì„±í•œë‹¤.</li>\n</ol>\n<ul>\n<li><code class=\"language-text\">/root/CKS/ImagePolicy</code> ê²½ë¡œëŠ” ë¬¸ì œì—ì„œ kube-apiserver podì˜ <code class=\"language-text\">/etc/admission-contollers</code> ê²½ë¡œì— ë§ˆìš´íŠ¸ ëœë‹¤. ë”°ë¼ì„œ kubeConfigFileì˜ ê²½ë¡œ ë˜í•œ <code class=\"language-text\">/root/CKS/ImagePolicy/admission-kubeconfig.yaml</code> ê°€ ì•„ë‹Œ <code class=\"language-text\">/etc/admission-controllers/admission-kubeconfig.yaml</code>ë¡œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •í•˜ëŠ” ê²ƒì´ë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">apiVersion: apiserver.config.k8s.io/v1\nkind: AdmissionConfiguration\nplugins:\n- name: ImagePolicyWebhook\n  configuration:\n    imagePolicy:\n      kubeConfigFile: /etc/admission-controllers/admission-kubeconfig.yaml\n      allowTTL: 50\n      denyTTL: 50\n      retryBackoff: 500\n      defaultAllow: false</code></pre></div>\n<ul>\n<li>ì‹¤ì œ kube-apiserverì—ì„œ volume mountì— ëŒ€í•œ ì„¤ì •ì„ í™•ì¸í•´ ë³¼ ìˆ˜ë„ ìˆë‹¤.</li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>kube-apiserverdì—ì„œ ImagePolicyWebhookì„ enableì‹œí‚¤ê³ , ìœ„ì—ì„œ ì‘ì„±í•œ admission-configuration.yamlíŒŒì¼ì„ configë¡œ ì‚¬ìš©í•˜ë„ë¡ ì„¤ì •í•œë‹¤. ì—¬ê¸°ì„œ ìœ ì˜í•´ì•¼ í• ì ì€ kubeConfigFile ì˜ ê²½ë¡œì™€ ë§ˆì°¬ê°€ì§€ë¡œ pod ë‚´ì˜ ê²½ë¡œë¥¼ ê¸°ì¤€ìœ¼ë¡œ í•˜ì—¬ ì‘ì„±í•´ì•¼ í•œë‹¤ëŠ” ì ì´ë‹¤.</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">- --admission-control-config-file=/etc/admission-controllers/admission-configuration.yaml\n- --enable-admission-plugins=NodeRestriction,ImagePolicyWebhook</code></pre></div>\n</li>\n</ul>","frontmatter":{"date":"November 01, 2023","title":"[CKS] Mockexam 1","categories":"DevOps","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/cks-mockexam1/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/cks6/","nextSlug":"/etl1/","prevSlug":"/cks-mockexam1/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}