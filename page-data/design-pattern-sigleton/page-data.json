{"componentChunkName":"component---src-templates-blog-template-js","path":"/design-pattern-sigleton/","result":{"data":{"cur":{"id":"d350fa6c-4b34-530c-b3d0-972493169349","html":"<h3 id=\"싱글톤-패턴의-정의와-uml은-아래와-같다\" style=\"position:relative;\"><a href=\"#%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%A0%95%EC%9D%98%EC%99%80-uml%EC%9D%80-%EC%95%84%EB%9E%98%EC%99%80-%EA%B0%99%EB%8B%A4\" aria-label=\"싱글톤 패턴의 정의와 uml은 아래와 같다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>싱글톤 패턴의 정의와 UML은 아래와 같다.</h3>\n<blockquote>\n<h4 id=\"소프트웨어-디자인-패턴에서-싱글턴-패턴singleton-pattern을-따르는-클래스는-생성자가-여러-차례-호출되더라도-실제로-생성되는-객체는-하나이고-최초-생성-이후에-호출된-생성자는-최초의-생성자가-생성한-객체를-리턴한다-이와-같은-디자인-유형을-싱글턴-패턴이라고-한다\" style=\"position:relative;\"><a href=\"#%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4%EC%97%90%EC%84%9C-%EC%8B%B1%EA%B8%80%ED%84%B4-%ED%8C%A8%ED%84%B4singleton-pattern%EC%9D%84-%EB%94%B0%EB%A5%B4%EB%8A%94-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%8A%94-%EC%83%9D%EC%84%B1%EC%9E%90%EA%B0%80-%EC%97%AC%EB%9F%AC-%EC%B0%A8%EB%A1%80-%ED%98%B8%EC%B6%9C%EB%90%98%EB%8D%94%EB%9D%BC%EB%8F%84-%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%98%EB%8A%94-%EA%B0%9D%EC%B2%B4%EB%8A%94-%ED%95%98%EB%82%98%EC%9D%B4%EA%B3%A0-%EC%B5%9C%EC%B4%88-%EC%83%9D%EC%84%B1-%EC%9D%B4%ED%9B%84%EC%97%90-%ED%98%B8%EC%B6%9C%EB%90%9C-%EC%83%9D%EC%84%B1%EC%9E%90%EB%8A%94-%EC%B5%9C%EC%B4%88%EC%9D%98-%EC%83%9D%EC%84%B1%EC%9E%90%EA%B0%80-%EC%83%9D%EC%84%B1%ED%95%9C-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%A6%AC%ED%84%B4%ED%95%9C%EB%8B%A4-%EC%9D%B4%EC%99%80-%EA%B0%99%EC%9D%80-%EB%94%94%EC%9E%90%EC%9D%B8-%EC%9C%A0%ED%98%95%EC%9D%84-%EC%8B%B1%EA%B8%80%ED%84%B4-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%9D%BC%EA%B3%A0-%ED%95%9C%EB%8B%A4\" aria-label=\"소프트웨어 디자인 패턴에서 싱글턴 패턴singleton pattern을 따르는 클래스는 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이고 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴한다 이와 같은 디자인 유형을 싱글턴 패턴이라고 한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong><em>“소프트웨어 디자인 패턴에서 싱글턴 패턴(Singleton pattern)을 따르는 클래스는, 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이고 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴한다. 이와 같은 디자인 유형을 싱글턴 패턴이라고 한다”</em></strong></h4>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/klEQVQ4y5WSDU/aUBSG+///wZxZZraYLSYi1jmdWwZmflXpB3RVYykyxVLRIlAKlyLPcuvAmkWzneTJTd57znvvOfcqvBCTyYT/DeU5o6nZ3d0dURTR6/XodDq0223CMHyC1G5ubhBCPG84XWXieDyekSTJjNFolCJ1eXC320XJFmeRIZOl4b9EHMdpF0rW4O+kAVW3+uKMp7VyLOkN4UFIkhFCxAgxYJwMYTKmH3ep16WhbFekew/EaZvZ8fT7/ceW7+/lCZcIYTMZn+IFGuVaEb+xx8XFDo3LXYLgACEckuSEOK4QhsEfw/unhsPhkMFAcHt7Ri/SEAOTqr+NWd3EPd3ArqxxcrxOzftKFJWIoiPa7X0aDQ8hRsT9fvq6ctatVgsl/QbtDpe/yjSrW1iWira3RElb5thZ5+hwmUNtGb2Uw3HWCcMDrhpFytYR5+d1PK9KrVbDdV2CIEDx/St8P+DsTMNx8hxqS3zbesvm5zcc7H9ku/Ce4vd3/NheZHfnA85PFdfd4OTY4vq6he/7NJvNGYrneZzX6mh6AbWwgJp/jbo6z6e1eVbzc6jqPF82F1jJvWIlN0c+N0exsIhpaLMbSo8piuM4SGy7QsWysCyTctnKYFLOaJWKhWka2LbNtDaLous6MwwDwzDQ9UcM45GsJvNLpRJP6nWd39AzwjsQ0kJpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/d57d190477e22a986eb306bd3aa81966/37523/image.png\"\n        srcset=\"/static/d57d190477e22a986eb306bd3aa81966/e9ff0/image.png 180w,\n/static/d57d190477e22a986eb306bd3aa81966/f21e7/image.png 360w,\n/static/d57d190477e22a986eb306bd3aa81966/37523/image.png 720w,\n/static/d57d190477e22a986eb306bd3aa81966/612f7/image.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다르게 말하면 프로세스가 실행될 때 한 번만 메모리를 할당하고 해당 메모리에 인스턴스를 만들어서 전역에서 공유하기 위한 패턴이다. 클래스에 딱 하나의 인스턴스만 존재해야 되고, 어플리케이션 전역적인 접근이 필요한 경우에 이를 사용한다.</p>\n<br>\n전역적으로 적용되어야 하는 앱의 Setting 클래스라던가, Logger, datasource 같은 것이 싱글톤의 예시이며 Spring에서 bean을 전역적으로 관리하고 Dependency Injection을 통해 필요한 곳에 빈을 주입하는 것도 싱글톤 패턴이 적용된 예이다.\n<hr>\n<p>정의에서는 ‘생성자가 여러 차례 호출되더라도’ 라고 표현했지만, 실제 싱글톤 클래스(A 클래스라고 하자)를 구현할 때는 애초에 외부에서 인스턴스를 생성할 수 없도록 생성자를 private으로 두고, 클래스 안에서 A를 타입으로 하는 static 변수에 static 메소드인 getInstance 메소드를 통해 인스턴스를 생성하여 할당한다.</p>\n<p>이렇게 하면 프로세스 실행 시에는 미리 할당된 정적 메모리에 A 타입의 변수가 할당되게 되고, (static 변수이기에)</p>\n<p>외부에서는 객체의 생성(new) 없이도 static 메소드인 getInstance 메소드를 통해 기 할당된 static 변수의 공간에 인스턴스를 생성할 수 있게 된다.\n<br></p>\n<p>Settings 클래스 예시를 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@Getter\n@Setter\npublic class Settings{\n    private static Settings settings;\n    private Settings(){}\n    public static Settings getSettings(){\n        if( settings == null ){\n            settings = new Settings();\n        }\n        return settings;\n    }\n\n    private boolean darkMode = false;\n    private int fontSize = 10;\n    private String fontColor = 'black';\n}</code></pre></div>\n<p>위와 같이 선언된 Settings 클래스는 이제 어디에서나 사용가능하며, 서로 다른 클래스에서 Setting 클래스의 변수를 getSetting 메소드를 통해 할당하면 darkMode, fontSize, fontColor값을 변경하더라도 공통으로 적용되게 될 것이다.\n<br></p>\n<p>이는 결국 어디에서든 getSetting 메소드를 통해 반환된 동일한 인스턴스라는 것을 의미하기 때문에 아래 코드로 테스트를 해보면 true 값이 출력되는 것을 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">public static void main(String[] args){\n    Settings setting1 = Settings.getSettings();\n    Settings setting2 = Settings.getSettings();\n\n    System.out.println(setting1 == setting2);\n}</code></pre></div>\n<br>\n별거 아닌 것 처럼 보이는 디자인 패턴이지만 늘 디자인 패턴을 공부할 때 가장 앞에 나오는 이유는 가장 유용하게 많이 쓰이는 패턴이기 때문이어서가 아닐까.\n<br>\n<br>\nSpring과 같은 framework에서 bean으로 등록하는 어노테이션(@bean, @Service, @Controller, @Repository 등)을 통해 등록 해 두기만 하면 어디서든 @Autowired 를 통해 사용하고자 하는 곳 어디에서든 bean을 주입 받을 수 있는 것처럼.\n<hr>\n<br>\n* private 생성자 : 외부 생성 막기 위함\n<ul>\n<li>\n<p>클래스 type static 변수 : 미리 정적 메모리에 인스턴스 할당을 위한 공간 마련하기 위함</p>\n</li>\n<li>\n<p>static getInstance 메소드 : 외부에서 인스턴스 생성 없이 마련된 정적 메모리 공간에 인스턴스를 생성하고, 이미 있을 경우 해당 인스턴스를 반환 받기 위함</p>\n</li>\n</ul>\n<br>\n<h3 id=\"멀티스레드-환경에서의-싱글톤\" style=\"position:relative;\"><a href=\"#%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%93%9C-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EC%8B%B1%EA%B8%80%ED%86%A4\" aria-label=\"멀티스레드 환경에서의 싱글톤 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>멀티스레드 환경에서의 싱글톤</h3>\n<p>: 2개 이상의 스레드가 인스턴스를 얻기 위해 getInstance 메소드( 위에서는 getSettings메소드 )에 진입하게 되면 서로 다른 2개 이상의 인스턴스가 만들어질 수 있다. 따라서 멀티스레드 환경에서는 그냥 처음부터 인스턴스를 만들어 버리면 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">public class Settings{\n    private Settings(){}\n    private static Settings settings = new Settings();\n    public static Settings getSettings(){\n        return settings;\n    }\n}</code></pre></div>","excerpt":"싱글톤 패턴의 정의와 UML은 아래와 같다. “소프트웨어 디자인 패턴에서 싱글턴 패턴(Singleton pattern)을 따르는 클래스는, 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이고 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴한다. 이와 같은 디자인 유형을 싱글턴 패턴이라고 한다”  다르게 말하면 프로세스가 실행될 때 한 번만 메모리를 할당하고 해당 메모리에 인스턴스를 만들어서 전역에서 공유하기 위한 패턴이다. 클래스에 딱 하나의 인스턴스만 존재해야 되고, 어플리케이션 전역적인 접근이 필요한 경우에 이를 사용한다. 정의에서는 ‘생성자가 여러 차례 호출되더라도’ 라고 표현했지만, 실제 싱글톤 클래스(A 클래스라고 하자)를 구현할 때는 애초에 외부에서 인스턴스를 생성할 수 없도록 생성자를 private으로 두고, 클래스 안에서 A를 타입으로 하는 static 변수에 static 메소드인 getInstance 메소드를 통해 인스턴스를 생성하…","frontmatter":{"date":"February 10, 2022","title":"[디자인 패턴] 1.Singleton 패턴","categories":"디자인패턴","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/design-pattern-sigleton/"}},"next":{"id":"c2fcb249-3189-5828-b2e1-d04bc2273100","html":"<h2 id=\"1-aws에서-프리티어로-ec2와-rds-발급하기\" style=\"position:relative;\"><a href=\"#1-aws%EC%97%90%EC%84%9C-%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C-ec2%EC%99%80-rds-%EB%B0%9C%EA%B8%89%ED%95%98%EA%B8%B0\" aria-label=\"1 aws에서 프리티어로 ec2와 rds 발급하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. AWS에서 프리티어로 EC2와 RDS 발급하기</h2>\n<h3 id=\"1-ec2-인스턴스-발급\" style=\"position:relative;\"><a href=\"#1-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%B0%9C%EA%B8%89\" aria-label=\"1 ec2 인스턴스 발급 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) EC2 인스턴스 발급</h3>\n<p>AWS 에 들어가서 EC2 인스턴스 생성하기로 가서 생성하면 된다. 프리티어로 발급 가능한 인스턴스를 발급 받았다.</p>\n<p>발급 시 신경 써 주어야 할 부분은 프리티어에서 사용 가능한 최대 스토리지 설정(30GB)과 보안그룹에서 규칙을 설정하는 것이다.</p>\n<p>보안그룹을 설정하지 않으면 생성한 EC2 서버로 모든 통신이 불가능하기 때문에 필요한 port와 사용자에 대해 꼭 설정해주어야 함!</p>\n<p>나는 Front/Back-end를 위해 각각 3000,8080포트를 모든 사용자에게 허용하고 http,https를 통한 접근 허용을 위해 80,443 포트도 열어두었다.</p>\n<h3 id=\"2-ec2-ssh-접속-테스트\" style=\"position:relative;\"><a href=\"#2-ec2-ssh-%EC%A0%91%EC%86%8D-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"2 ec2 ssh 접속 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) EC2 ssh 접속 테스트</h3>\n<p>Windows에선 putty 설치해서, Mac에선 ssh 커맨드라인 툴을 이용해서 ssh priavte key를 사용해서 접속하면 된다.\n계정명은 ubuntu로 초기 로그인이 되며 su 명령어를 통해 root로 유저를 변경하여 root 및 ubuntu 계정의 비밀번호를 내가 원하는 대로 변경해두는 것이 좋다.</p>\n<h3 id=\"3-rds-발급\" style=\"position:relative;\"><a href=\"#3-rds-%EB%B0%9C%EA%B8%89\" aria-label=\"3 rds 발급 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) RDS 발급</h3>\n<p>rds 발급도 ‘데이터베이스 생성’을 클릭하여 간단하게 생성 가능하다. MySQL을 선택하여 생성하면 되고, 보안규칙에 MySQL port인 3306을 허용시켜주면 된다.</p>\n<h3 id=\"4-dbeaver에서-rds로-접속-테스트\" style=\"position:relative;\"><a href=\"#4-dbeaver%EC%97%90%EC%84%9C-rds%EB%A1%9C-%EC%A0%91%EC%86%8D-%ED%85%8C%EC%8A%A4%ED%8A%B8\" aria-label=\"4 dbeaver에서 rds로 접속 테스트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4) DBeaver에서 RDS로 접속 테스트</h3>\n<p>Server Host에는 엔드포인트 값을, Port에는 3306, Username/Password에는 RDS 생성 시 입력한 값을 넣으면 된다. 여기서 헷갈렸던 부분이 RDS db 인스턴스의 db식별자 명을 예를 들어 ‘abc’라고 했는데 Database이름에 계속 ‘abc’를 입력하고 test connection을 하니 연결이 되지 않았다. 알고 보니 <strong>Database이름은 비워둔 상태에서 접속한 후에 DB를 ‘abc’라는 이름으로 생성</strong>해주어야 했던 것임.</p>\n<p>이로써, aws의 도움을 받아 간단하게 백엔드를 위한 인프라 설정은 끝났다.</p>\n<hr>\n<h2 id=\"2-spring-boot-프로젝트-생성-및-db-연동\" style=\"position:relative;\"><a href=\"#2-spring-boot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-db-%EC%97%B0%EB%8F%99\" aria-label=\"2 spring boot 프로젝트 생성 및 db 연동 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Spring boot 프로젝트 생성 및 DB 연동</h2>\n<h3 id=\"1-프로젝트-생성\" style=\"position:relative;\"><a href=\"#1-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\" aria-label=\"1 프로젝트 생성 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) 프로젝트 생성​</h3>\n<p>IntelliJ에서 ‘New project’ - Spring intializr에서 원하는 jdk, spring boot 버전, 빌드 도구(maven,gradle) 등 선택해서 프로젝트 생성하면 된다.(너무 불친절한가…)</p>\n<h3 id=\"2-jpa-사용을-위해-gradle에-jpa-의존성-추가\" style=\"position:relative;\"><a href=\"#2-jpa-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%B4-gradle%EC%97%90-jpa-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%B6%94%EA%B0%80\" aria-label=\"2 jpa 사용을 위해 gradle에 jpa 의존성 추가 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) JPA 사용을 위해 gradle에 JPA 의존성 추가</h3>\n<p>Mybatis와 같은 sqlmapper를 사용해서 DB와 연동할 수도 있지만 Java진영의 ORM 표준인 JPA를 사용하여 DB와 연동할 것임.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">dependencies {\nimplementation 'mysql:mysql-connector-java'\nimplementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n}</code></pre></div>\n<h3 id=\"3-applicationproperties\" style=\"position:relative;\"><a href=\"#3-applicationproperties\" aria-label=\"3 applicationproperties permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3) application.properties</h3>\n<p>Mysql을 사용하기 위한 드라이버 설정, datasource 설정, DB계정 설정을 해주면 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\"># MySQL 설정\nspring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver\n# Datasource 설정(aws)\nspring.datasource.url=jdbc:mysql://{aws RDS endpoint값}:3306/{DB 스키마명}?useSSL=false&amp;useUnicode=true&amp;serverTimezone=Asia/Seoul\n# DB username\nspring.datasource.username=&lt;username>\n# DB password\nspring.datasource.password=&lt;password></code></pre></div>\n<hr>\n<h2 id=\"3spring-boot-어플리케이션-ec2-배포하기\" style=\"position:relative;\"><a href=\"#3spring-boot-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-ec2-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\" aria-label=\"3spring boot 어플리케이션 ec2 배포하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3.Spring boot 어플리케이션 EC2 배포하기</h2>\n<h3 id=\"1-ssh로-접속하여-git-clone하기\" style=\"position:relative;\"><a href=\"#1-ssh%EB%A1%9C-%EC%A0%91%EC%86%8D%ED%95%98%EC%97%AC-git-clone%ED%95%98%EA%B8%B0\" aria-label=\"1 ssh로 접속하여 git clone하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1) ssh로 접속하여 git clone하기</h3>\n<p>1에서 ssh 접속 테스트를 성공했다면 무리없이 EC2에 접속해서 2에서 생성한 Spring boot 프로젝트의 git repo를 clone하자. 2에서 생성한 프로젝트를 git에 push하는 것은 설명하지 않았지만, 구글링하면 바로 나온다.</p>\n<p>아니면 winscp나 Filezilla와 같은 sftp툴을 사용해서 로컬에서 빌드한 jar파일을 EC2에 업로드 해도 된다.</p>\n<p><strong>EC2에 git과 jdk가 설치되어있지 않다면 git clone하기 전에 해주어야 함</strong></p>\n<h3 id=\"2-소스코드-빌드-및-빌드된-jar-실행하기\" style=\"position:relative;\"><a href=\"#2-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C-%EB%B9%8C%EB%93%9C-%EB%B0%8F-%EB%B9%8C%EB%93%9C%EB%90%9C-jar-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\" aria-label=\"2 소스코드 빌드 및 빌드된 jar 실행하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2) 소스코드 빌드 및 빌드된 jar 실행하기</h3>\n<ul>\n<li>\n<p>gradlew 실행 권한 부여</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ sudo chmod 777 ./gradlew</code></pre></div>\n</li>\n<li>\n<p>빌드하기</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ ./gradlew build</code></pre></div>\n</li>\n<li>\n<p>실행하기</p>\n<p>빌드하기에서BUILD SUCCESSFUL이 되었다면 build/libs/ 아래의 SNAPSHOT.jar 파일을 실행시켜주자. Spring boot는 톰캣 서버가 내장 되어 있어서 jar만 실행 시켜주면 마침내 Spring boot 서버가 가동된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">$ java -jar Helloworld-0.0.1-SNAPSHOT.jar</code></pre></div>\n</li>\n</ul>\n<hr>\n<p>추가로 웹 브라우저 상에서 확인을 원한다면 EC2에서 public IP주소를 찾아 아래와 같이 실행하면 Helloworld!라고 나오는 것을 확인 가능하다.\n물론, Spring boot 소스코드에서 /test로 접근시 Restconroller에서 ‘Helloworld!’라는 String을 return하도록 구현이 되어있다면 ㅎㅎ</p>\n<div class=\"table-of-contents\">\n<ul>\n<li>\n<p><a href=\"#1-aws%EC%97%90%EC%84%9C-%ED%94%84%EB%A6%AC%ED%8B%B0%EC%96%B4%EB%A1%9C-ec2%EC%99%80-rds-%EB%B0%9C%EA%B8%89%ED%95%98%EA%B8%B0\">1. AWS에서 프리티어로 EC2와 RDS 발급하기</a></p>\n<ul>\n<li><a href=\"#1-ec2-%EC%9D%B8%EC%8A%A4%ED%84%B4%EC%8A%A4-%EB%B0%9C%EA%B8%89\">1) EC2 인스턴스 발급</a></li>\n<li><a href=\"#2-ec2-ssh-%EC%A0%91%EC%86%8D-%ED%85%8C%EC%8A%A4%ED%8A%B8\">2) EC2 ssh 접속 테스트</a></li>\n<li><a href=\"#3-rds-%EB%B0%9C%EA%B8%89\">3) RDS 발급</a></li>\n<li><a href=\"#4-dbeaver%EC%97%90%EC%84%9C-rds%EB%A1%9C-%EC%A0%91%EC%86%8D-%ED%85%8C%EC%8A%A4%ED%8A%B8\">4) DBeaver에서 RDS로 접속 테스트</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-spring-boot-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1-%EB%B0%8F-db-%EC%97%B0%EB%8F%99\">2. Spring boot 프로젝트 생성 및 DB 연동</a></p>\n<ul>\n<li><a href=\"#1-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EC%83%9D%EC%84%B1\">1) 프로젝트 생성​</a></li>\n<li><a href=\"#2-jpa-%EC%82%AC%EC%9A%A9%EC%9D%84-%EC%9C%84%ED%95%B4-gradle%EC%97%90-jpa-%EC%9D%98%EC%A1%B4%EC%84%B1-%EC%B6%94%EA%B0%80\">2) JPA 사용을 위해 gradle에 JPA 의존성 추가</a></li>\n<li><a href=\"#3-applicationproperties\">3) application.properties</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3spring-boot-%EC%96%B4%ED%94%8C%EB%A6%AC%EC%BC%80%EC%9D%B4%EC%85%98-ec2-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0\">3.Spring boot 어플리케이션 EC2 배포하기</a></p>\n<ul>\n<li><a href=\"#1-ssh%EB%A1%9C-%EC%A0%91%EC%86%8D%ED%95%98%EC%97%AC-git-clone%ED%95%98%EA%B8%B0\">1) ssh로 접속하여 git clone하기</a></li>\n<li><a href=\"#2-%EC%86%8C%EC%8A%A4%EC%BD%94%EB%93%9C-%EB%B9%8C%EB%93%9C-%EB%B0%8F-%EB%B9%8C%EB%93%9C%EB%90%9C-jar-%EC%8B%A4%ED%96%89%ED%95%98%EA%B8%B0\">2) 소스코드 빌드 및 빌드된 jar 실행하기</a></li>\n</ul>\n</li>\n</ul>\n</div>","frontmatter":{"date":"February 04, 2022","title":"Spring boot 개발환경 설정 (gradle,JPA,MySQL,EC2,RDS)","categories":"AWS","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/spring-boot-aws-environment/"}},"prev":{"id":"840157c6-ecff-56f7-85ef-eb0308fa3632","html":"<h3 id=\"strategy전략-패턴의-정의와-uml은-아래와-같다\" style=\"position:relative;\"><a href=\"#strategy%EC%A0%84%EB%9E%B5-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%A0%95%EC%9D%98%EC%99%80-uml%EC%9D%80-%EC%95%84%EB%9E%98%EC%99%80-%EA%B0%99%EB%8B%A4\" aria-label=\"strategy전략 패턴의 정의와 uml은 아래와 같다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Strategy(전략) 패턴의 정의와 UML은 아래와 같다.</h3>\n<blockquote>\n<h4 id=\"여러가지-알고리즘을-하나의-추상적인-접근점interface을-만들어-접근점에서-교환-가능하도록-하는-패턴을-strategy-패턴이라고-한다\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EB%9F%AC%EA%B0%80%EC%A7%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EC%9D%84-%ED%95%98%EB%82%98%EC%9D%98-%EC%B6%94%EC%83%81%EC%A0%81%EC%9D%B8-%EC%A0%91%EA%B7%BC%EC%A0%90interface%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4-%EC%A0%91%EA%B7%BC%EC%A0%90%EC%97%90%EC%84%9C-%EA%B5%90%ED%99%98-%EA%B0%80%EB%8A%A5%ED%95%98%EB%8F%84%EB%A1%9D-%ED%95%98%EB%8A%94-%ED%8C%A8%ED%84%B4%EC%9D%84-strategy-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%9D%BC%EA%B3%A0-%ED%95%9C%EB%8B%A4\" aria-label=\"여러가지 알고리즘을 하나의 추상적인 접근점interface을 만들어 접근점에서 교환 가능하도록 하는 패턴을 strategy 패턴이라고 한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“여러가지 알고리즘을 하나의 추상적인 접근점(interface)을 만들어 접근점에서 교환 가능하도록 하는 패턴을 Strategy 패턴이라고 한다”</h4>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVQ4y31T227CMAzt//8TT7wjHjaQRuiNNmVQem8KLXCm4xHUcZkly07iHDvHjnO5XHA6ndD3Pc7nM4ZhkDX3r9erKNdN06CqKpRlibZtZY9nFGspDoGOxyPSNIVSCvv9XkAJboXnSZJgOp1iMpmI33WdJH0CZCZqWVVYKSUVEMB1XWRZhs1mIwCUpq6R57kkewvICvmUb62x/lpBR9Hv06rqfpEgRVGI5kWOvCjk2S8BeSlLUwRK3ZVrG0wxxiD2fXzMZljM54g9Xzgdc2h9Z4w+lvG+9UlHZ7q357TOOMNYKWwOQeq6lorokw6uqfTJ/xjUeQQZZ+azyfF/lVvAPxU+8nA4HKSzQRDA931EUSTV2XM2R2uNMAzheZ7Y9Ma784oHzuI2SRDHsSiBCWJj2PXtdotEa1Ge73Y7oegJkF3nSAz8NecBp76XQDsmjGPXuceY/mY5u6TnCZCX2ICN62L1uRDlyNhBtoA6CKE+F1gvlwiVkjsvK7REd20L0zToWoPOGMluY+S7GgPTtmKp/e1v/wBQQ+/yu6GztwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/1c3af607c05f0f3316c6da654b587e75/37523/image1.png\"\n        srcset=\"/static/1c3af607c05f0f3316c6da654b587e75/e9ff0/image1.png 180w,\n/static/1c3af607c05f0f3316c6da654b587e75/f21e7/image1.png 360w,\n/static/1c3af607c05f0f3316c6da654b587e75/37523/image1.png 720w,\n/static/1c3af607c05f0f3316c6da654b587e75/612f7/image1.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>Strategy 패턴을 이해하기 위해서는 먼저 interface에 대한 이해, 그리고 delegation에 대한 이해가 필요하다. interface는 객체지향 프로그래밍에서 기능에 대한 선언과 구현을 분리하며 기능을 사용하기 위한 통로를 제공한다</strong></p>\n<br>\n1. Interface에 대한 이해 - 기능에 대한 선언과 분리\n<br>\n직관적으로 이해하자면 interface는 일종의 '자격증' 같은 것이다. fly()라는 메소드를 지닌 Flyable 이라는 인터페이스가 있을 때 Bird 클래스에서 이것을 implements 한다면 Bird클래스는 Flyable 의 fly() 기능을 사용하기 위한 자격을 갖춘 것으로 이해하면 좋을 것 같다. 물론 그 기능은 무조건 사용해야 한다. 이렇듯 기능에 대한 선은 Flyable 인터페이스해서 해두고, 그에 대한 직접적인 구현은 Bird, Airplane, Rocket 등 Flyable에 대한 \"자격을 갖춘 클래스\"에서 하는 것이다.\n<br>\n<br>\n2. Interface에 대한 이해 - 기능을 사용하기 위한 통로\n<br>\n아래 코드에서 작성한 것처럼 Flyable 인터페이스 타입의 객체는 이를 implement한 클래스의 인스턴스를 할당 받을 수 있고, 이를 통해 각 클래스에서 각각 구체적으로 구현된 fly() 메소드를 사용하기 위한 통로로서 사용된다.\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\nFlyable flyingObject1 = new Bird();\nFlyable flyingObject2 = new Airplane();\n\nflyingObject1.fly() // '훨훨~~\nflyingObject2.fly() // '슝~'\n</code></pre></div>\n<br>\n3. Delegation(위임)\n<p>Delegation은 특정 객체의 기능을 사용하기 위해 다른 객체의 기능을 호출하는 것을 말한다. 아래 코드를 보면 금방 이해가 될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic class Boss{\nEmployee employee = new Employee();\n\npublic void doCopy(){\nemployee.doCopy();\n}\n}\npublic class Employee{\npublic void doCopy(){\nSystem.out.println(\"1000장 째 복사중\");\n}\npublic void makeDoc(){\nSystem.out.println(\"쓸데없는 PPT 만드는 중\");\n}\n}</code></pre></div>\n<br>\n위와 같이 Boss 클래스에서 doCopy를 하기 위해 Employee 인스턴스의 doCopy 메소드를 호출하는 것을 의미한다.\n<p>이제 interface와 delegation에 대해 이해 했으니 다시 돌아가서 Strategy 패턴이 무엇인지 예를 통해 알아보자.</p>\n<h3 id=\"예제--게임-캐릭터의-공격-구현-전략\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C--%EA%B2%8C%EC%9E%84-%EC%BA%90%EB%A6%AD%ED%84%B0%EC%9D%98-%EA%B3%B5%EA%B2%A9-%EA%B5%AC%ED%98%84-%EC%A0%84%EB%9E%B5\" aria-label=\"예제  게임 캐릭터의 공격 구현 전략 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예제 : 게임 캐릭터의 공격 구현 전략</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic interface Weapon{\npublic void attack();\n}\n\npublic class Knife implements Weapon{\n@Override\npublic void attack(){\nSystem.out.println(\"칼로 찌르기\");\n}\n}\n\npublic class Shotgun implements Weapon{\n@Override\npublic void attack(){\nSYstem.out.println(\"샷건 쏘기\");\n}\n}\n</code></pre></div>\n<br>\nWeapon이란 인터페이스는 Knife와 Shotgun에 외부에서 접근할 수 있는 '접근점'을 제공하며, 기능의 선언은 Weapon에서 구현은 Knife,Shotgun에서 하였다.\n<p>이제 이를 사용하는 게임 캐릭터 클래스를 만들어 보자. GameCharacter 클래스에서는 외부에서 ‘장착’ 시켜준 weapon을 자기의 무기로 설정하고 이를 이용한 공격은 weapon 클래스에게 delegate(위임) 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic class GameCharacter{\n// 접근점인 인터페이스 타입의 객체 선언\nprivate Weapon weapon;\n// 무기 교체 가능\npublic void setWeapon(Weapon weapon){\nthis.weapon = weapon;\n}\n\n    //delagation GameCharacter 클래스에서 attack 메소드에 대한 동작을 Weapon클래스에 위임함\n    public void attack(){\n        if(weapon == null){\n            System.out.println(\"맨손 공격\");\n        }\n        else{\n            weapon.attack();\n        }\n    }\n\n}\n</code></pre></div>\n<br>\n이제 Main 메소드에서 게임캐릭터를 사용하여 공격해보자. 아래처럼 게임캐릭터에서는 attack이라는 동일한 메소드를 실행하지만 어떤 무기를 게임캐릭터에 장착시켜주냐에 따라 서로 다른 동작(알고리즘)을 하도록 구현할 수 있다.\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic class Main{\npublic static void main(String[] args){\nGameCharacter gameCharacter = new GameCharacter();\ngameCharacter.attack(); // 맨손 공격\ngameCharacter.setWeapon(new Knife());\ngameCharacter.attack(); // 칼로 찌르기\ngameCharacter.setWeapon(new ShotGun());\ngameCharacter.attack(); // 샷건 쏘기\n}\n}\n</code></pre></div>\n<hr>\n<ul>\n<li>\n<p>Strategy 패턴의 장점은 Context 클래스의 수정 없이(위에서는 game character가 context 클래스이다) 쉽게 새로운 기능(전략)을 추가하거나 수정할 수 있다는 데에 있다. 예컨대 위 예제에서 새로운 무기인 Arrow를 추가한다고 하면, 단순히 Weapon 인터페이스를 implements해주는 클래스로만 작성하면 되고, GameCharacter 클래스는 건들 필요가 없다.</p>\n</li>\n<li>\n<p>그래서 일일이 경우에 따른 else if 문이나 switch문을 추가할 필요가 없이 새로운 클래스를 만들어 객체지향적으로 해결할 수 있다는 장점을 지닌다.</p>\n</li>\n<li>\n<p>Strategy 패턴은 보통 하나의 메소드를 위임처리할 때 사용된다.</p>\n</li>\n</ul>\n<p>개인적으로 Strategy 패턴은 객체지향적 프로그래밍을 이해하는 데 좋은 예시라고 생각한다.</p>","frontmatter":{"date":"February 11, 2022","title":"[디자인 패턴] 2.Strategy 패턴","categories":"디자인패턴","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/design-pattern-strategy/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/design-pattern-sigleton/","nextSlug":"/spring-boot-aws-environment/","prevSlug":"/design-pattern-strategy/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}