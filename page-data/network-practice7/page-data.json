{"componentChunkName":"component---src-templates-blog-template-js","path":"/network-practice7/","result":{"data":{"cur":{"id":"016d5757-9480-5b12-938b-abb75ebf0106","html":"<h2 id=\"리눅스-vfs\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4-vfs\" aria-label=\"리눅스 vfs permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리눅스 VFS</h2>\n<ul>\n<li>\n<p>systemcall 중 가장 많이 쓰이는 것은 open, read, write이다. 리눅스에서는 모든 자원을 VFS를 통해 파일처럼 쓰고 읽을 수 있게 되어 있기 떄문이다.\n<br>\n<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.22222222222223%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAADZ0lEQVQ4y42U208iWRCH+ds3m+zzPuzDzO4mZrOTcRzNjLeZCF4Aoa/nnO4GRUABkZuiCA3NTdBv0y2zvs7Dl1/Vqf5V10l1OoYveRkqXnwJE492Kc7h9jtS3/7GTn6grL5ysvcn37f+4FLtkE2scbz7PuJ5IOCHd6giYmHy4q8ORw7jW412OcHjTYredZJZ1+Du6ohOOR7V/OYpj/Uk3coRLwMJK+8PYowkBApGIRLGDsvwzRMXpm6UL/p2pEyc6HwR1sNasPKMVv5wwnFDJ6hqBLU3Hoop/MopQd1k3BL0Khr+tUHQtPErGR6KSYJrnVFNZ/S/aq8T+jmdhVDMpeRJShZK4esaUymZJeLM1j8w2Nxg8nmd+eY6UyEY6lr0XOgJWUiFL3SWfUGsn88ykRZjZUZMHYt2JsnQEYyzSSaJfZrbmwxOEkzTRwyEQSubYuraBCvPRFk8ysxrw1Ety7IheLqxWYQ0BLNSnIn7madSnFlhl0l+g6n3L7PiF6bnOwT2P8zrJk+hr2GxaNoMK9prw2E1y6IueLq2IsJ4Xk4xPvvG4OKAnrvBvdihlfpKW99neJZgmttmeWNGA8wjj83watWwn8swtk0CYTCWFiNh0DaTtMwkXfOUnsxQP5A0kh7NU4erQ4dSwqF2LPAti6kyCWyLR7G6cnCm8yIVz0oyExYdPcFE6FH+7DjgSWYZxfhEQd5i6QgWjsTXBJXvCl+T4NiM1Wop3VyapmvQydtU3SwllaSTF9x4OveWzp2taBkutaM8HeVwbwqGtk3HzVHUC5jxAh03T90yee7bxJpnGYxKhmQ5jl5NkyofRvFJ6YCKMCmfdfCy95ifunhaj5pbpmMKUqUpa98DfvtrwL67RHiXLB8MYq2zDKqqE89/YVetsy0/sis/oV8eUxUGBfcGJ9PC2m7h6rdciQu6QrCV7vPLuwd+fX/P7+tDTFnkuWcQa+TTFFo5zOtT9twNNqw19rwtzm9zNJXGwFY8Ooq+p+hJh4EtCaTgVni0rBx30uPWztGxDZbhlVu5NMWaQ6EmkKU0+nki0ou6Q9cxwFUsnXBBkmf3laUreXEFeOJVXcnYWS3lwTmlp2n0jCyPpsHAMumbBg96Bt/UGVnmT2DRs1afzfzOYt55Y9Y23+KfpR2qGf0c/gPNPbBjKLUdeQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/67f1c02648713aebc6040d8ed1327779/37523/image1.png\"\n        srcset=\"/static/67f1c02648713aebc6040d8ed1327779/e9ff0/image1.png 180w,\n/static/67f1c02648713aebc6040d8ed1327779/f21e7/image1.png 360w,\n/static/67f1c02648713aebc6040d8ed1327779/37523/image1.png 720w,\n/static/67f1c02648713aebc6040d8ed1327779/302a4/image1.png 1080w,\n/static/67f1c02648713aebc6040d8ed1327779/203d3/image1.png 1322w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>file들이 반드시 ssd,hdd에 저장된게 아니라 메모리에 연결된 것들도 있고, 네트웍도 파일이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 일반 파일(ext4) 예시</span>\n<span class=\"token function\">file</span> hello.txt\n<span class=\"token function\">stat</span> hello.txt\n<span class=\"token comment\"># 디스크를 다루는 가상 파일 예시</span>\n<span class=\"token function\">file</span> /dev/sda\n<span class=\"token function\">stat</span> /dev/sda\n<span class=\"token comment\"># 시스템을 다루는 가상 파일 예시</span>\n<span class=\"token function\">file</span> /proc/1/comm\n<span class=\"token function\">stat</span> /proc/1/comm\n\n<span class=\"token function\">file</span> /run/snap.socket\n<span class=\"token function\">stat</span> /run/snap.socket</code></pre></div>\n</li>\n</ul>\n<ul>\n<li>df -h 했을 때 Filesystem이 tmpfs로 나오는 건 메모리에 연결된 것이며, /run 디렉토리가 이에 해당함을 확인할 수 있다.</li>\n<li>/proc 하위에 있는 파일들도 procfs라는 Filesystem을 사용하며 이는 커널이 메모리에 동적으로 데이터를 저장한다.</li>\n</ul>\n<hr>\n<h2 id=\"리눅스-네트워크-도구\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4-%EB%84%A4%ED%8A%B8%EC%9B%8C%ED%81%AC-%EB%8F%84%EA%B5%AC\" aria-label=\"리눅스 네트워크 도구 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리눅스 네트워크 도구</h2>\n<h3 id=\"hping3-명령어\" style=\"position:relative;\"><a href=\"#hping3-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"hping3 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>hping3 명령어</h3>\n<ul>\n<li>hping3의 옵션을 사용하여 다양한 테스트 가능\n<ul>\n<li>fast</li>\n<li>faster</li>\n<li>flood : 보낼 수 있는 만큼 응답기다리지 않고 많이 보내기 (ddos공격 시 활용 가능)</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\">#hping3 설치</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">apt</span> <span class=\"token function\">install</span> hping3\n\n<span class=\"token comment\">#TCP/IP 통신 SYN 패킷 보내기 위한 옵션 확인</span>\nhping3 <span class=\"token parameter variable\">--help</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> syn\n\n<span class=\"token comment\">#TCP/IP 통신 SYN 패킷 보내기 위한 옵션 확인</span>\nhping3 <span class=\"token parameter variable\">--help</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> syn\n\n<span class=\"token comment\">#daum, naver는 ICMP 응답을 안해주기 때문에 SYN 패킷 전송함으로써 응답 테스트</span>\nhping3 <span class=\"token parameter variable\">-S</span> www.daum.net <span class=\"token parameter variable\">-p</span> <span class=\"token number\">80</span>\n\n<span class=\"token comment\"># 더 빠르게 테스트 (1초 안에 10개 패킷 전송)</span>\nhping3 <span class=\"token parameter variable\">-S</span> www.daum.net <span class=\"token parameter variable\">-p</span> <span class=\"token number\">800</span> <span class=\"token parameter variable\">--fast</span></code></pre></div>\n<h3 id=\"iptables-명령어\" style=\"position:relative;\"><a href=\"#iptables-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"iptables 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iptables 명령어</h3>\n<ul>\n<li>blacklist 관리 가능</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 내 localhost IP 주소 기반으로 UDP 차단 규칙 추가하기</span>\niptables <span class=\"token parameter variable\">-I</span> OUTPUT <span class=\"token parameter variable\">-s</span> localhost <span class=\"token parameter variable\">-d</span> localhost <span class=\"token parameter variable\">-p</span> udp <span class=\"token parameter variable\">--sport</span> <span class=\"token number\">7000</span> <span class=\"token parameter variable\">-dport</span> <span class=\"token number\">8000</span> <span class=\"token parameter variable\">-j</span> DROP\n\n<span class=\"token comment\"># iptables 설정 확인하기</span>\niptables <span class=\"token parameter variable\">-L</span> <span class=\"token parameter variable\">-n</span>\n\n<span class=\"token comment\"># 다른 터미널에서 확인하기</span>\nhping3 <span class=\"token parameter variable\">--udp</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-s</span> <span class=\"token number\">7000</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">8000</span> <span class=\"token parameter variable\">--fast</span>\n\n<span class=\"token comment\"># 위 iptables 설정 삭제하기</span>\niptables <span class=\"token parameter variable\">-D</span> OUTPUT <span class=\"token parameter variable\">-s</span> localhost <span class=\"token parameter variable\">-d</span> localhost <span class=\"token parameter variable\">-p</span> udp <span class=\"token parameter variable\">--sport</span> <span class=\"token number\">7000</span> <span class=\"token parameter variable\">--dport</span> <span class=\"token number\">8000</span> <span class=\"token parameter variable\">-j</span> DROP\n\n<span class=\"token comment\"># 다른 터미널에서 재확인</span>\niptables <span class=\"token parameter variable\">-L</span> <span class=\"token parameter variable\">-n</span>\nhping3 <span class=\"token parameter variable\">--udp</span> <span class=\"token number\">127.0</span>.0.1 <span class=\"token parameter variable\">-s</span> <span class=\"token number\">7000</span> <span class=\"token parameter variable\">-p</span> <span class=\"token number\">800</span> <span class=\"token parameter variable\">--fast</span></code></pre></div>\n<ul>\n<li>3번째 단계에서 hping3 패킷을 보낼 떄 규칙이 설정되어 있으면 hping3 자체가 권한 없음으로 에러가 발생함을 확인할 수 있다. 규칙을 제거하면 hping3가 다시 잘 통신된다.</li>\n</ul>\n<h3 id=\"nslookup-dig-명령어\" style=\"position:relative;\"><a href=\"#nslookup-dig-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"nslookup dig 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nslookup, dig 명령어</h3>\n<ul>\n<li>domain Name을 ip주소로 변환</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># dig 명령을 통해 공인ip 알아내기</span>\n<span class=\"token function\">dig</span> TXT +short o-o.myaddr.l.google.com @ns1.google.com\n<span class=\"token comment\"># 또 다른 공인ip 알아내는 방법</span>\n<span class=\"token function\">curl</span> ifconfig.me</code></pre></div>\n<h3 id=\"nmap-명령어\" style=\"position:relative;\"><a href=\"#nmap-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"nmap 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>nmap 명령어</h3>\n<ul>\n<li>네트웍 스캐닝 도구 : 현재 LAN에서 사용하고 있는 ip, 열려있는 포트도 확인 가능</li>\n<li>주로 특정 서버에 어떤 포트가 열려있는지 확인하기 위해 사용한다.</li>\n<li>하기는 상대방 서버를 스캐닝하는 방법</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># nmap.org 웹서버 TCP connection 스캐징</span>\nnmap <span class=\"token parameter variable\">-sT</span> nmap.org\n\n<span class=\"token comment\"># 자세한 정보를 포함해서 확인하기</span>\nnmap <span class=\"token parameter variable\">-sT</span> <span class=\"token parameter variable\">-v</span> nmap.org\n\n<span class=\"token comment\"># daum.net.org 웹서버 TCP connection 스캐닝</span>\nnmap <span class=\"token parameter variable\">-sT</span> <span class=\"token parameter variable\">-v</span> daum.net</code></pre></div>\n<h3 id=\"iftop-명령어\" style=\"position:relative;\"><a href=\"#iftop-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"iftop 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>iftop 명령어</h3>\n<ul>\n<li>네트워크 I/O 트래픽 모니터링</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># root 권한이 있어야 실행 가능</span>\n<span class=\"token function\">sudo</span> iftop</code></pre></div>\n<h3 id=\"bmon-명령어\" style=\"position:relative;\"><a href=\"#bmon-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"bmon 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>bmon 명령어</h3>\n<ul>\n<li>네트워크 I/O 트래픽 모니터링</li>\n<li>좀 더 GUI처럼 볼 수 있음</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 네트워크 모니터링</span>\nbmon\n<span class=\"token comment\"># Hping으로 테스트후 bmon 모니터링 해보기</span>\nhping3 localhost <span class=\"token parameter variable\">--fast</span></code></pre></div>\n<h3 id=\"dstat-명령어\" style=\"position:relative;\"><a href=\"#dstat-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"dstat 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>dstat 명령어</h3>\n<ul>\n<li>네트워크 I/O 트래픽 모니터링</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 네트워크 모니터링 테스트</span>\ndstat\n<span class=\"token comment\"># 테스트</span>\nhping3 localhost <span class=\"token parameter variable\">--fast</span></code></pre></div>\n<h3 id=\"traceroute-명령어\" style=\"position:relative;\"><a href=\"#traceroute-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"traceroute 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>traceroute 명령어</h3>\n<ul>\n<li>네트워크 통신 중에 거친 라우터 경로 확인</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># traceroute</span>\n<span class=\"token function\">traceroute</span> google.com\n<span class=\"token comment\"># 도메인 네임 생략하고 ip주소로만 확인하기</span>\n<span class=\"token function\">traceroute</span> <span class=\"token parameter variable\">-n</span> google.com</code></pre></div>\n<h3 id=\"ss-명령어\" style=\"position:relative;\"><a href=\"#ss-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"ss 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ss 명령어</h3>\n<ul>\n<li>네트워크 소켓 상태 확인하는 명령어</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># ss 명령어 실행</span>\nss <span class=\"token operator\">|</span> <span class=\"token function\">less</span>\n\n<span class=\"token comment\"># TCP 소켓 기준 확인</span>\nss <span class=\"token parameter variable\">--help</span> <span class=\"token operator\">|</span> <span class=\"token function\">grep</span> tcp\nss <span class=\"token parameter variable\">-t</span>\n\n<span class=\"token comment\"># LISTEN 중인 소켓 포함 확인</span>\nss <span class=\"token parameter variable\">-ta</span>\n\n<span class=\"token comment\"># 도메인 이름 대신 ip주소로 확인</span>\nss <span class=\"token parameter variable\">-nta</span>\n\n<span class=\"token comment\"># LISTEN 중인 것만 추려서 보기</span>\nss <span class=\"token parameter variable\">-ntl</span>\n\n<span class=\"token comment\"># 프로세스 정보 함꼐 확인</span>\n<span class=\"token function\">sudo</span> ss <span class=\"token parameter variable\">-ntlp</span></code></pre></div>\n<h3 id=\"netstat-명령어\" style=\"position:relative;\"><a href=\"#netstat-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"netstat 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>netstat 명령어</h3>\n<ul>\n<li>네트워크 상태 확인하기 위한 툴</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">whatis <span class=\"token function\">netstat</span>\n\n<span class=\"token comment\"># 현재 TCP 네트웍 연결 상태 확인하기</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-t</span>\n\n<span class=\"token comment\"># 현재 TCP 네트웍 listening 중인 소켓 확인</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-tl</span>\n\n<span class=\"token comment\"># 현재 TCP 네트웍 listening 중인 소켓의 프로세스 명칭 확인</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-tlp</span>\n\n<span class=\"token comment\"># 현재 TCP 네트웍 listenting 중인 소켓의 프로세스 ip 확인</span>\n<span class=\"token function\">sudo</span> <span class=\"token function\">netstat</span> <span class=\"token parameter variable\">-tlpn</span></code></pre></div>\n<ul>\n<li>\n<p>netstat의 옵션 확인\n<br>\n<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.11111111111111%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABj0lEQVQoz42SSZbbMAxEdZDE1kASA0cNtrtz/3tVHmnJVjq96EU9EJAI4rPYsVdISmBllEDIgTEHQfYEpgHO9LDTFc78TB2FAM4zSAVzsEjeYguCxAYi096wb/En6qIYfG4J9zkiBYFXwrIkTOMFZrzs032/+etBNe8qsqYEUXkhF1+RGSkqhKZn0+mJfujd5FzbkW1MsMLIOiGpwaIOkQ14R/5+uut/07cJyVxhh19Q14PtgKIGa3Io1ZChYl9xWzM+HyuWEnDfCh63uWmd4+sbu7Ed0LEQNHiIEKI/xFjFoXiGs+M/WNac4kv9q9ZRjLCpwFWXvUGuLntGFgP1FnQg2ZNONftl/UQefyPQAKURazC4JQe2fcO1J+SP+9Lin4+todc85IB1Sa1WDeyYLUQZzA5eHJRtU1BqT4jMALs/n7feuTu73O4wZbiygtRjiw5zdHhERRELVdNwyA4NiXbkIx53+HK53WFdjBd4GiA04hZdc9ocJ49X3NeCEBxyJsRIKDPD+/rP5d10ejb8C4PjXPbxLo1UAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image7\"\n        title=\"image7\"\n        src=\"/static/811ee41ec2caecef50b1ab2b79777a59/37523/image7.png\"\n        srcset=\"/static/811ee41ec2caecef50b1ab2b79777a59/e9ff0/image7.png 180w,\n/static/811ee41ec2caecef50b1ab2b79777a59/f21e7/image7.png 360w,\n/static/811ee41ec2caecef50b1ab2b79777a59/37523/image7.png 720w,\n/static/811ee41ec2caecef50b1ab2b79777a59/302a4/image7.png 1080w,\n/static/811ee41ec2caecef50b1ab2b79777a59/07a9c/image7.png 1440w,\n/static/811ee41ec2caecef50b1ab2b79777a59/0faf1/image7.png 1956w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n<li>\n<p>netstat 명령을 통해 80 포트를 물고 있는 프로세스를 찾기\n<br>\n<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABjUlEQVQoz42S6Y6cMBCEeZAMjG8bMJjDnDuZaGeT93+jimgzq1WSXeXHJ7ctaFV1deacRlk5+IPaofElWl/Bav6OEgW0vELLAlp8giygZIHM1B4yDJinAUPnsS2RzspwrPOArq0geU4N1X+QOSvhrIazClVpUJ4n4QyMFqfCL9R9INO+gW576CZgnUfMsSO2ZaTmWjGy8hnPRs97Zo2gH60WqJw+rRUk/7Aq3z/+l8W/35PCMGKZR4xdQ3MbQo3acqxLUqzV9Qzla1IoR5LHDI2EM+o8BaXbWkU1Z98g2CUpZjnVf/IMLjNtjzr0uO0Ltm3Bvs6IY8C6RPzcZsShxb5G4lC7TD1xOHnOexoD+lBD8RyZ6Cb4ecXjtuD1tuLH/QW+NGkHrQTN2CniqA8HpU3QhnxwdGxDVtUVdO0RtMDgNObY0+6VRsAoltZF5lAiP+uCarqLAkYmrEoBZRMvEPgFjSgQrxfEtsLb445fjzst+xoYbj3DWDOqv/cMXcmwtAzRM+wdx9xy7CEp/A1lTUQl89QJgwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image8\"\n        title=\"image8\"\n        src=\"/static/c9be4797853b017afcef077a24ee5778/37523/image8.png\"\n        srcset=\"/static/c9be4797853b017afcef077a24ee5778/e9ff0/image8.png 180w,\n/static/c9be4797853b017afcef077a24ee5778/f21e7/image8.png 360w,\n/static/c9be4797853b017afcef077a24ee5778/37523/image8.png 720w,\n/static/c9be4797853b017afcef077a24ee5778/302a4/image8.png 1080w,\n/static/c9be4797853b017afcef077a24ee5778/07a9c/image8.png 1440w,\n/static/c9be4797853b017afcef077a24ee5778/a878e/image8.png 2048w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</li>\n</ul>\n<h3 id=\"리눅스-커널-tracepoint-명령어\" style=\"position:relative;\"><a href=\"#%EB%A6%AC%EB%88%85%EC%8A%A4-%EC%BB%A4%EB%84%90-tracepoint-%EB%AA%85%EB%A0%B9%EC%96%B4\" aria-label=\"리눅스 커널 tracepoint 명령어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>리눅스 커널 tracepoint 명령어</h3>\n<p>리눅스 커널에서는 네트웍 패킷 처리 시점마다 아래와 같은 디렉토리에 event를 남김으로써 tracing을 할 수 있게 해준다. 그 중에 실제 들여다볼 만한 부분만 색칠처리되어 있음.\n<br></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 89.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAABYlAAAWJQFJUiTwAAACzklEQVQ4y4VU6ZKbPBDkPfJlzakTSYAAGbDBR7xbef8H6mTkozZH5fsxJRWSerpnekikFlDWQosKkpdQgkHwIu61ZFCigpYVasXByhSs2P0zkrx2kK3HcRqxTAPC0GA/dugag661ETBPv6LI3lDmb6j+D9CHgG07YuzvQM5I8CqH0yWmlqE3JXpbYDAFrCzAqgys3EXgqkz/iGQ7BJzXGUbzCNZYBckLNEbidlmwLQNu5wXnY8D7dUUY2jtLkv+XEiTEaj3sMe97XM9HnNYZrdMwWuC47DGFPq6HJeC0LfEegVLSX4AfkayHGe+3C47LhNv1hNN6f9R3BudtwRR8BPCtiYkoSAU9/jvg0uC6dbide1w3j77JwYq3+PDjdo51pSS2Fiiyr7Exr+Y8QR/1jIBzaLAuHtthQOgN+lZGm1A9L6dDZLfsSXZAraoIwKv0D2bPBInSCtaSRRxaV8dQsoqHtXr4UHHUSqDMdyiyHYrPa777hW1incC8V9jmGuvsYwO0KKMPjWZoTArvMli1g7c5hjZD32TY+xxDk8O7PDJ+MRSSwVmBvlXoGooarEoheQ7OMkieQYv7qmgvMyiRQosUStC33ySHKWCZJ3ReYzpYDEGj7Tgaz2BsGaUSW99ahOE+QVKUUT6BlMVT8n1NjFForI7MQu8wdhZDZ9BYia7RL8PyMgWvsvuEEFBGnf7clEeXuzHgcJwxhg7jOqGbBzDNwGsBTk1pawinwI2M1uk7G31I6zPBC5QA+7aGbzQ4yzEEjzF4eO9grYJzNYbRox9auKaGYDmUKOOUfJ6Ul+Ryh4QpBesMRu9iVuowXaIHJDXffUGR/ocqf4uM2EP6M8jknw2enLYDPt4vUQ75jky9HSd8u6wx6C9E40fnZPT3byd8/7jGPZ3TALxAiSGNGD2iphBDuvDc09hRDN5FNnSPJifeb01UQWV4Sf9Zwx8bAh+CUgFvJQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image9\"\n        title=\"image9\"\n        src=\"/static/0f0c6e30c1f6aae81c2e4d4cf17e8fd9/37523/image9.png\"\n        srcset=\"/static/0f0c6e30c1f6aae81c2e4d4cf17e8fd9/e9ff0/image9.png 180w,\n/static/0f0c6e30c1f6aae81c2e4d4cf17e8fd9/f21e7/image9.png 360w,\n/static/0f0c6e30c1f6aae81c2e4d4cf17e8fd9/37523/image9.png 720w,\n/static/0f0c6e30c1f6aae81c2e4d4cf17e8fd9/302a4/image9.png 1080w,\n/static/0f0c6e30c1f6aae81c2e4d4cf17e8fd9/07a9c/image9.png 1440w,\n/static/0f0c6e30c1f6aae81c2e4d4cf17e8fd9/fe720/image9.png 1448w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"syskerneldebugtracing-디렉토리-하위의\" style=\"position:relative;\"><a href=\"#syskerneldebugtracing-%EB%94%94%EB%A0%89%ED%86%A0%EB%A6%AC-%ED%95%98%EC%9C%84%EC%9D%98\" aria-label=\"syskerneldebugtracing 디렉토리 하위의 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>/sys/kernel/debug/tracing 디렉토리 하위의..</h3>\n<ul>\n<li>\n<p>events/net 디렉토리</p>\n<ul>\n<li>net_dev_start_xmit : 패킷이 외부로 나갈 때 event</li>\n<li>netif_receive_skb : 패킷이 내부로 들어올 때 event</li>\n</ul>\n</li>\n<li>\n<p>events/skb 디렉토리</p>\n<ul>\n<li>제대로 패킷을 다 썼을 때는 consume event로 해지가 되고 문제/오류가 생겼을 땐 kfree event</li>\n<li>skb_copy_datagram_ioevc 는 패킷을 가져갈 때 (userspace가 wake up되서 커널로부터 패킷을 가져갈 때) 발생하는 이벤트</li>\n</ul>\n</li>\n<li>\n<p>events/sock 디렉토리</p>\n<ul>\n<li>\n<p>inet_sock_set_state\n: socket 상태에 대한 이벤트</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">echo</span> <span class=\"token number\">1</span> <span class=\"token operator\">></span> events/sock/inet_sock_set_state/enable\n<span class=\"token function\">cat</span> trace_pipe\n\n<span class=\"token comment\"># 위와 같이 해놓고 다른 터미널에서 ssh 접속을 연결하거나 끊어보면 커넥션 연결/해지에 대한 socket상태 확인 가능</span>\n<span class=\"token function\">ssh</span> <span class=\"token operator\">&lt;</span>테스트 대상 ip<span class=\"token operator\">></span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>events/irq 디렉토리</p>\n<ul>\n<li>irq_handler_entry : top half 처리 event</li>\n<li>softirq_entry : bottom half 처리 event</li>\n</ul>\n</li>\n</ul>\n<ul>\n<li>\n<p>tracepoint event들을 활용하여 추적하는 공통 방법</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 반드시 root로 진행 필요</span>\n<span class=\"token comment\"># 리눅스 커널 네트웍 관련 tracepoint 확인하기</span>\n<span class=\"token builtin class-name\">cd</span> /sys/kernel/debug/tracing\n\n<span class=\"token comment\"># Tracepoint 확인 방법</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token number\">1</span> <span class=\"token operator\">></span> events/<span class=\"token string\">\"Tracepoint 명칭\"</span>/enable\n\n<span class=\"token comment\"># 이벤트 발생기준 Backtrace 함수호출과정 추적</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token number\">1</span> <span class=\"token operator\">></span> options/stacktrace\n\n<span class=\"token comment\"># Tracepoint 결과 확인하기</span>\n<span class=\"token function\">cat</span> trace\n\n<span class=\"token comment\"># 연달아서 이어서 확인하기</span>\n<span class=\"token function\">cat</span> trace_pipe\n\n<span class=\"token comment\"># Tracepoint 종료 방법</span>\n<span class=\"token builtin class-name\">echo</span> <span class=\"token number\">0</span> <span class=\"token operator\">></span> events/enable\n<span class=\"token builtin class-name\">echo</span> <span class=\"token number\">0</span> <span class=\"token operator\">></span> options/staccktrace\n<span class=\"token builtin class-name\">echo</span> <span class=\"token operator\">></span> trace</code></pre></div>\n</li>\n</ul>","excerpt":"리눅스 VFS systemcall 중 가장 많이 쓰이는 것은 open, read, write이다. 리눅스에서는 모든 자원을 VFS를 통해 파일처럼 쓰고 읽을 수 있게 되어 있기 떄문이다.\n\n\n file들이 반드시 ssd,hdd에 저장된게 아니라 메모리에 연결된 것들도 있고, 네트웍도 파일이다. df -h 했을 때 Filesystem이 tmpfs로 나오는 건 메모리에 연결된 것이며, /run 디렉토리가 이에 해당함을 확인할 수 있다. /proc 하위에 있는 파일들도 procfs라는 Filesystem을 사용하며 이는 커널이 메모리에 동적으로 데이터를 저장한다. 리눅스 네트워크 도구 hping3 명령어 hping3의 옵션을 사용하여 다양한 테스트 가능 fast faster flood : 보낼 수 있는 만큼 응답기다리지 않고 많이 보내기 (ddos공격 시 활용 가능) iptables 명령어 blacklist 관리 가능 3번째 단계에서 hping3 패킷을 보낼 떄 규칙이 설정되어 있으면 …","frontmatter":{"date":"February 07, 2024","title":"리눅스VFS와 네트워크와 네트웍 도구","categories":"Linux","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/network-practice7/"}},"next":{"id":"2c244566-102b-527a-a252-0675250dd9af","html":"<h3 id=\"mss란\" style=\"position:relative;\"><a href=\"#mss%EB%9E%80\" aria-label=\"mss란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MSS란?</h3>\n<ul>\n<li>L4계층의 개념이며 Maximum segment size의 약자로서 TCP에서 전송할 수 있는 사용자 payload 크기\n<ul>\n<li>TCP header를 제외한 payload만의 크기이다. 그리고 payload는 각 네트웍 계층에 따라 상대적인 개념이다. (ex. L4에서는 http 헤더가 payload. L3에서는 tcp헤더도 payload)\n<br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAACA0lEQVQoz1WQ3XKaABhEef/n6U3TmTZJTUAQFAQUUEFENMqvghojno6av16c2flu9ttdocllTqtHTusWp+SJplQ5b7R3VXnNNF48k7VnsZ7cSAKTZWwzGtsEwYAwHBBMB2SrPsLF5Dj9wTH6yXF+R1N03g012Kjsky4TdYgvO/iagy+7TLtDxoGHqI5od0d09BHP6og4thGajcq56l4TXcnlL0oFtgrsRTiIN62foHqC7eV+ht03ShGhyWTe4tY1WVN2Po0vdY9LiV0okoc6eaBThDqp3yMLuuQvBvHUYBkaLGcGi9Bgu+4hnFKZY/j4ud1H3abqUTsPpMpvPHmE1/IYtz1GosdEdRlOxvyRJvxVJjxrEx4Un9l8iHAu1etWp0z5D4o2VB2oNdhJcJBuupeglqCUbhPsvlG0EXaJyipSYHOre3lwLhSC0GFhyWzNe0JjwEyziXSbmW4ztyyC6RC156D3Hfq2g2G7rBYmwi7Vrt2bsscx7/KaazS5ij+1mdsSuXnP1OwT6gYzyyDqW0S2iR/0MUwL07awBha9vs1ibiAcc5k4umMe/aJctzjkKkP/nnxtUhVjNpsxVemyLVy2ucsskIkChTrz2OUOu9yl/iAxEU6FSpWI1KnIWylzWGs4UodQGxDrLi+WQzp2qLMBVWKTzrtkce92p19skwH7zOAffE7X/fffW/gAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/2bc16affef3fb4aa9fef722a325d414a/37523/image2.png\"\n        srcset=\"/static/2bc16affef3fb4aa9fef722a325d414a/e9ff0/image2.png 180w,\n/static/2bc16affef3fb4aa9fef722a325d414a/f21e7/image2.png 360w,\n/static/2bc16affef3fb4aa9fef722a325d414a/37523/image2.png 720w,\n/static/2bc16affef3fb4aa9fef722a325d414a/302a4/image2.png 1080w,\n/static/2bc16affef3fb4aa9fef722a325d414a/07a9c/image2.png 1440w,\n/static/2bc16affef3fb4aa9fef722a325d414a/f705e/image2.png 2998w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<br>\n<ul>\n<li>그리고 전 layer에 걸쳐서 ethernet frame을 포함하여 패킷은 sk_buff 구조체로 리눅스 커널 내부에서는 관리된다.</li>\n</ul>\n</li>\n<li>MSS는 말 그대로 최대치를 의미하며 이것 보다 큰 데이터는 fragment로 조각을 내서 전송한다.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"mtu란\" style=\"position:relative;\"><a href=\"#mtu%EB%9E%80\" aria-label=\"mtu란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MTU란?</h3>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 58.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAACH0lEQVQoz2WTS2/aQBRG+f/bbrqpqqqVusmuURMpiaJQEwzYmEDbEFBsEh4x4+cY2+QBnGqMIYm6OLqvme/ac2cqa9mGhQmZAakBmQV5Z2szE3JjS2a891Ut2+0zUTqbxKRCYiJFh7v7PpP736SOTn5bQ9o64q7LfNhjPughnB7CLnF6eKNuSY9wYhViSrRC0sQZ9flclfxs+YijI/yPH7g7O8esu1Q/uVS/uGjfXbSvLvqBS/3gAe2bYoZ+OOdvd8gmMXaCJtGsgZhe4U8t0rHOclInuP2FP6wRjU2icYvQaRFN2sQPFtHYILANAkfZJuLmgnVisknaVNbSZOnVYWEUZ7lZtCG/YulqPI1OWXs1VnOtsE+DIx7/HLKaXRRxgVsls0/KM9wLNopgU3QxUV9ddEwtWJSkFs+jcx6HJ6yDBqSdbfPUYuk3UTp7QTmrkQmDzDPIvTdWbFF+rmzQJg8tcs98VwvvNVbxXrDJxDYQvsT3Qzw/KgkJwpjxZMbx8QnX1wOiKEGIoKjt1viBZHTb5yVq7QQN5EMLKQZI0ScpuCl86fWJ59dMbQNv0iXxyvwb1Npg2nn95Y1sk7gaz1GdVdxgFel7XiKdjWxuL3nS2ubj97zEOlINaSdI0ib1Lsn8Ok9hk8ewsec5ahLPq9jOD8Ts7L+6ivNAR861/VCLoRRTTKwyaZWoJ9kh8y+Zjo+JRfXNmldUTu1flzfjH7y/bkkOzrXtAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/faac02b9ff96a3a43c0e95d4986c1e08/37523/image1.png\"\n        srcset=\"/static/faac02b9ff96a3a43c0e95d4986c1e08/e9ff0/image1.png 180w,\n/static/faac02b9ff96a3a43c0e95d4986c1e08/f21e7/image1.png 360w,\n/static/faac02b9ff96a3a43c0e95d4986c1e08/37523/image1.png 720w,\n/static/faac02b9ff96a3a43c0e95d4986c1e08/302a4/image1.png 1080w,\n/static/faac02b9ff96a3a43c0e95d4986c1e08/07a9c/image1.png 1440w,\n/static/faac02b9ff96a3a43c0e95d4986c1e08/c211c/image1.png 1502w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>L3계층의 개념이며 Maximum Transmission Unit의 약자로서 네트욱에서 전송할 수 있는 최대 패킷 크기이다.</li>\n<li>라우터 마다 이 설정이 다를 수 있다. 예컨대 내 PC는 1000byte가 MTU여서 1000byte를 보냈더라도 중간에 어떤 라우터의 MTU가 700이면 패킷을 쪼개서 700을 먼저 보내고 300을 보내게 된다.</li>\n</ul>\n<h4 id=\"mtu값-확인하기\" style=\"position:relative;\"><a href=\"#mtu%EA%B0%92-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"mtu값 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MTU값 확인하기</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAYAAADDl76dAAAACXBIWXMAABYlAAAWJQFJUiTwAAABKElEQVQY002Q2W6DMBRE+ZIkgAEDXjBboTEk6aKqi9T//5pT2VWqPozueGQfzXUyjY55dFjd4KyiMy1tdsCpI1pVaN3SWU3bSIa+Yx77eA7emjaqswqjG2QlSJbJsW+PXP3Cvk4833b8w8i29vgHh58Hrn5gnQesqnGmxbQyFjCqjgXuWSVSks+PN77eX/l+u3DxK7tf2c4L192znxf2qefme5a5x5mwQRMhEWQVo9NYXUd4GYAvTxdeb1tseLtunOeO/XGidyY+GnrLFNYM3pm/VqGhDr4tkeJIdjogsiNJXUsaWVLLgroqaOoSWRVURUYhMor8hBQpVZlTFTmlyMjTw6+yY5TIT/FemIkyClmKqBAWIo0qIzCN/9KIU4Tfs/+A+xT5L/gHqIq3QUl2GqAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/581b328f589f1d25956f1ce7ecd240ff/37523/image3.png\"\n        srcset=\"/static/581b328f589f1d25956f1ce7ecd240ff/e9ff0/image3.png 180w,\n/static/581b328f589f1d25956f1ce7ecd240ff/f21e7/image3.png 360w,\n/static/581b328f589f1d25956f1ce7ecd240ff/37523/image3.png 720w,\n/static/581b328f589f1d25956f1ce7ecd240ff/302a4/image3.png 1080w,\n/static/581b328f589f1d25956f1ce7ecd240ff/07a9c/image3.png 1440w,\n/static/581b328f589f1d25956f1ce7ecd240ff/ea66f/image3.png 2828w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>enp0s3 의 mtu가 1500임을 확인가능</li>\n</ul>\n<h4 id=\"mtu값-계산하면서-ping-날려보기\" style=\"position:relative;\"><a href=\"#mtu%EA%B0%92-%EA%B3%84%EC%82%B0%ED%95%98%EB%A9%B4%EC%84%9C-ping-%EB%82%A0%EB%A0%A4%EB%B3%B4%EA%B8%B0\" aria-label=\"mtu값 계산하면서 ping 날려보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MTU값 계산하면서 ping 날려보기</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 61.66666666666666%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAAB5ElEQVQoz32S63KbMBCFeRLbGKE7EhcDBlzbTeJO3/+Fvg7CSZpO2x/f7GhnOZzVUSZFjjMaZxTeaowq8Vals5ICWR4TKlEgjnvK4vDJcaui2PqZj4G43OmawDj2tNFxOzdMQ8tt7glOE7zGapF+VFlJke8S7+KpPsnG1vPzcWeZeh6v37mMLT/e1vNAO83U85V5WWiGkft0IpwX2lgxdJFY2SS8OdzInMzp20hbB7o60FSGoauJ3nB0gTI0OGvR1tGs7lygWwXbQPQWcdgh0+p75OpQy5LKuXSPVku0FFTOYKVApaFdGpRppe1Dsa77XFkeDx/9TbAskps1EGsUNoViCd6hlUSI/BlA/jWM4jOMjU00U1pim446eGKskrux8XTRce47GqPQqkzOtRIYXX4J4U+ytm2Ybvd0b5fLRN9F3q4j89jwMjW8nk8MfUvf1XRNTGGss6uo+C2Mj1B6p/gWHPM8cL1MzOeecTjxeHvh9eXKspy5X2emZcJ2M48p0laK478EvSwISuB0SWUUlZY4Jai9TXgtU98bhZSKoAq0eA/h8BHYO5kqjlitcapMmFJQGYkuDuh8n5Dr0zjs0KnuUc/+38iUUshmJFSOWAe8lQxBpTc3nVqiM5T5HlXkT0f/5xelJGRG5hw0GQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image4\"\n        title=\"image4\"\n        src=\"/static/03486d2b37ce46fd76d1d6c521a6f0d8/37523/image4.png\"\n        srcset=\"/static/03486d2b37ce46fd76d1d6c521a6f0d8/e9ff0/image4.png 180w,\n/static/03486d2b37ce46fd76d1d6c521a6f0d8/f21e7/image4.png 360w,\n/static/03486d2b37ce46fd76d1d6c521a6f0d8/37523/image4.png 720w,\n/static/03486d2b37ce46fd76d1d6c521a6f0d8/302a4/image4.png 1080w,\n/static/03486d2b37ce46fd76d1d6c521a6f0d8/07a9c/image4.png 1440w,\n/static/03486d2b37ce46fd76d1d6c521a6f0d8/8079d/image4.png 2100w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>s옵션을 통해 68byte짜리 패킷 전송</li>\n<li>MTU값 보다 큰 패킷에 대해서는 쪼개서 전송되어야 하지만 ping이라는 프로그램에서 MTU값이 넘는 패킷에 대해서 전송하지 않는 것이다.</li>\n<li>icmp헤더(28byte)까지 고려하여 1472로 size를 설정해서 패킷을 보내면 전송은 되지만 구글서버에서 응답을 안해주는 걸 확인가능</li>\n</ul>\n<h4 id=\"mtumss값-계산하면서-hping3-날려보기\" style=\"position:relative;\"><a href=\"#mtumss%EA%B0%92-%EA%B3%84%EC%82%B0%ED%95%98%EB%A9%B4%EC%84%9C-hping3-%EB%82%A0%EB%A0%A4%EB%B3%B4%EA%B8%B0\" aria-label=\"mtumss값 계산하면서 hping3 날려보기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>MTU/MSS값 계산하면서 hping3 날려보기</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 40%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAABYlAAAWJQFJUiTwAAABM0lEQVQoz32SbW7bMBBEdZLUkshdckla1JdVpwjQ+1/qFVSMIEbd/ngYgMDOcobsVIWYEteSyKZY8KjryVGI6nDDj7/w4wXf9AWdqKJlok6FWhL1mjF13LaFkiJj/4a4/otmdho3fUGnZsRpYd9W9nVmzkotke0a2efCsW9YaLf1xCB41+PG/xh6N+C9I6gjyHjG9cMbwfcEP6Ay4obLt8iXlzW4/lM7DUpIibkWpkeP61K55vhJCmQTcg4kU3JWYhxR6QnaFg4EGbDHWedFcCFRUjOLmApLrWfMZEZqC3UkZ8GiI5k/h5tZfGjDzKG+p6vF8/FuHFvkfjPuu/C+Kceq/P4V+LjHs1Nx49mhuIGxf475FFmiEuvEsVVuS2HNjtskTDbwcxaOrVCSnK/99G3+wR8uQOkbIBsLrwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image5\"\n        title=\"image5\"\n        src=\"/static/51479068a57314d3819df2a7d12098c6/37523/image5.png\"\n        srcset=\"/static/51479068a57314d3819df2a7d12098c6/e9ff0/image5.png 180w,\n/static/51479068a57314d3819df2a7d12098c6/f21e7/image5.png 360w,\n/static/51479068a57314d3819df2a7d12098c6/37523/image5.png 720w,\n/static/51479068a57314d3819df2a7d12098c6/302a4/image5.png 1080w,\n/static/51479068a57314d3819df2a7d12098c6/07a9c/image5.png 1440w,\n/static/51479068a57314d3819df2a7d12098c6/43300/image5.png 2694w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<ul>\n<li>hping3에서는 MTU값보다 패킷이 커도 나누어서 전송함을 확인가능(“IPv4 Fragmented IP Protocol …” 메시지를 tshark에서 확인 가능)하지만 여전히 구글 서버로부터 응답은 되지 않음</li>\n<li>MTU를 68에서 점점 늘려가다보면 구글에서 MTU 사이즈를 어디까지 응답해주는지 확인 가능하다.</li>\n</ul>\n<hr>\n<h3 id=\"통신-시-mtu와-mss-size의-결정\" style=\"position:relative;\"><a href=\"#%ED%86%B5%EC%8B%A0-%EC%8B%9C-mtu%EC%99%80-mss-size%EC%9D%98-%EA%B2%B0%EC%A0%95\" aria-label=\"통신 시 mtu와 mss size의 결정 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>통신 시 MTU와 MSS size의 결정</h3>\n<ul>\n<li>MTU 값은 OS에서 수동으로 설정하지 않고 Path MTU Discovery라는 과정을 통해서 최적화된 size로 결정한다.</li>\n<li>MSS 값은 통신하는 양측 호스트의 아래와 같은 협상 과정을 통해 결정된다.\n<ul>\n<li>\n<ol>\n<li>클라이언트와 서버가 TCP 연결 시 서로 SYN / SYN-ACK 패킷을 교환한다.</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>해당 패킷들의 TCP헤더에 양쪽 호스트의 MSS값이 포함되어 있다.</li>\n</ol>\n<ul>\n<li>그리고 이 때 양 호스트가 서로 주고 받는 MSS의 값은 호스트 OS의 MTU값에 의해 동적으로 결정된다.</li>\n</ul>\n</li>\n<li>\n<ol start=\"3\">\n<li>두 호스트 중 작은 쪽의 MSS값을 채택한다.</li>\n</ol>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"January 31, 2024","title":"MTU와 MSS 이해와 실습","categories":"Linux","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/network-practice6/"}},"prev":null,"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/network-practice7/","nextSlug":"/network-practice6/","prevSlug":""}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}