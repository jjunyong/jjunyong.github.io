{"componentChunkName":"component---src-templates-blog-template-js","path":"/querydsl2/","result":{"data":{"cur":{"id":"b51639ee-d028-5ac6-875c-b4157e861f8d","html":"<p>QueryDSLì´ ë¬´ì—‡ì¸ì§€ì™€ í™˜ê²½ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë°°ì› ìœ¼ë‹ˆ ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ë¬¸ë²•ì„ ë°°ì›Œë³´ì.</p>\n<h2 id=\"1-ê¸°ë³¸-q-type-í™œìš©\" style=\"position:relative;\"><a href=\"#1-%EA%B8%B0%EB%B3%B8-q-type-%ED%99%9C%EC%9A%A9\" aria-label=\"1 ê¸°ë³¸ q type í™œìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ê¸°ë³¸ Q-Type í™œìš©</h2>\n<p>querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìƒì„±í•œ Q í´ë˜ìŠ¤ë¥¼ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ static ë³€ìˆ˜ë¡œ í´ë˜ìŠ¤ì— ëŒ€í•œ\nQê°ì²´ë¥¼ ìƒì„±í•´ ë‘” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">static</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">QMember</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QMember</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<br>\n<p>ë”°ë¼ì„œ ìš°ë¦¬ê°€ querydslì„ ì‚¬ìš©í•  ë•ŒëŠ” static importë¡œ í•´ë‹¹ ê°ì²´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ê°ì²´ì˜ ë©¤ë²„ ë³€ìˆ˜ì¸ â€˜memberâ€™ë¥¼ ì‚¬ìš©í•˜ë©´\nì•„ë˜ì™€ ê°™ì´ ê°„ê²°í•˜ê²Œ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆë‹¤.</p>\n<p>ê·¸ë¦¬ê³  Springì—ì„œ ì£¼ì…í•´ì£¼ëŠ” em ì€ ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— JPAQueryFactoryëŠ” ë™ì‹œì„± ë¬¸ì œë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³  ë”°ë¡œ í´ë˜ìŠ¤ì˜ í•„ë“œë¡œ ë¹¼ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\në©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œ í˜„ì¬ ë‚˜ì˜ transactionì´ ì–´ë””ì— ê±¸ë ¤ìˆëŠëƒì— ë”°ë¼ transactionì— ë°”ì¸ë”© ë˜ë„ë¡ emì„ ë¶„ë°°í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.\n<br></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">import</span> <span class=\"token keyword\">static</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>entity<span class=\"token punctuation\">.</span>QMember<span class=\"token punctuation\">.</span>*<span class=\"token punctuation\">;</span>  <span class=\"token comment\">// static import </span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n\n<span class=\"token class-name\">JPAQueryFactory</span> queryFactory <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">JPAQueryFactory</span><span class=\"token punctuation\">(</span>em<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// JPAQueryFactoryì˜ ìƒì„±ìì— EntityManagerë¥¼ ë„£ì–´ì£¼ê³ , queryFactoryëŠ” ë©¤ë²„ë¡œ ëº€ë‹¤. </span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">startQuerydsl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Member</span> findMember <span class=\"token operator\">=</span> queryFactory\n          <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span> <span class=\"token comment\">// static import </span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">fetchOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"2-ê²€ìƒ‰-ì¡°ê±´-ì¿¼ë¦¬\" style=\"position:relative;\"><a href=\"#2-%EA%B2%80%EC%83%89-%EC%A1%B0%EA%B1%B4-%EC%BF%BC%EB%A6%AC\" aria-label=\"2 ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬</h2>\n<p>querydslì€ JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ì¡°ê±´ì— ëŒ€í•œ ë©”ì†Œë“œë¥¼ ì œê³µí•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// =</span>\nmember<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">ne</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// !=</span>\nmember<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">isNotNull</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmember<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">in</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmember<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">notin</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmember<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">between</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">,</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nmember<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">goe</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// greator or equal to  ( >= )</span>\nmember<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">gt</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// greater than</span>\nmember<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">loe</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//lessor or equal to </span>\nmember<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">lt</span><span class=\"token punctuation\">(</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span>  <span class=\"token comment\">// less than </span>\n\nmember<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">like</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member%\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//like ê²€ìƒ‰</span>\nmember<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">contains</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// like %member%</span>\nmember<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">startsWith</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// like member%</span>\n</code></pre></div>\n<p>where ë¬¸ì— and ì¡°ê±´ì„ ì—¬ëŸ¬ê°œë¥¼ ì£¼ëŠ” ê²½ìš°ëŠ” .andë¡œ ì²´ì´ë‹ í•´ì¤˜ë„ ë˜ì§€ë§Œ where ë©”ì†Œë“œ ì•ˆì—ì„œ ì‰¼í‘œë¡œ êµ¬ë¶„í•´ì£¼ë©´ ëœë‹¤.\nê·¸ë¦¬ê³  ì´ ë°©ë²•ì„ ì‚¬ìš©í•˜ë©´ ê²½ìš°ì— ë”°ë¼ nullê°’ì´ ë“¤ì–´ê°ˆ ìˆ˜ ìˆëŠ” ë™ì ì¿¼ë¦¬ë¥¼ ì§¤ ë•Œ ì½”ë“œë¥¼ ê¹”ë”í•˜ê²Œ ë§Œë“¤ì–´ ì¤€ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">search</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">Member</span> findMember <span class=\"token operator\">=</span> queryFactory\n      <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>\n        member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n        member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">.</span><span class=\"token function\">fetchOne</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"3-ê²°ê³¼-ì¡°íšŒ--ì •ë ¬\" style=\"position:relative;\"><a href=\"#3-%EA%B2%B0%EA%B3%BC-%EC%A1%B0%ED%9A%8C--%EC%A0%95%EB%A0%AC\" aria-label=\"3 ê²°ê³¼ ì¡°íšŒ  ì •ë ¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ê²°ê³¼ ì¡°íšŒ / ì •ë ¬</h2>\n<p>querydslì—ì„œ ì¿¼ë¦¬ì— ëŒ€í•œ ê²°ê³¼ë¥¼ ê°€ì ¸ì˜¬ ë•Œ fetchOne ë¿ë§Œì´ ì•„ë‹ˆë¼ ì•„ë˜ì™€ ê°™ì€ ë‹¤ì–‘í•œ ë©”ì†Œë“œë¥¼ í†µí•´ì„œ ê°€ì ¸ì˜¬ ìˆ˜ ìˆë‹¤.</p>\n<ul>\n<li>fetch()\n<ul>\n<li>ì¿¼ë¦¬ê²°ê³¼ ì „ì²´ ë°˜í™˜</li>\n</ul>\n</li>\n<li>fetchOne()\n<ul>\n<li>fetchê²°ê³¼ê°€ 2ê°œ ì´ìƒì´ê±°ë‚˜ ì—†ìœ¼ë©´ ì—ëŸ¬</li>\n</ul>\n</li>\n<li>fetchFirst()\n<ul>\n<li>limit(1).fetchOne() ê³¼ ê°™ì€ ì˜ë¯¸</li>\n</ul>\n</li>\n<li>fetchResults()\n<ul>\n<li>totalCountë¥¼ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— countìš© ì¿¼ë¦¬ì™€ contentsìš© ì¿¼ë¦¬ 2ë²ˆì„ ì‹¤í–‰í•œë‹¤.</li>\n<li>í˜ì´ì§€ë„¤ì´ì…˜ì„ ìœ„í•´ ì‚¬ìš©ë˜ë©° QueryResults<T> íƒ€ì…ì„ ë°˜í™˜í•œë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">QueryResult</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> results <span class=\"token operator\">=</span> queryFactory\n                <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n                <span class=\"token punctuation\">.</span><span class=\"token function\">fetchResults</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>fetchCount()</li>\n</ul>\n<br>\n<p>ë°ì´í„°ë¥¼ ì •ë ¬í•˜ëŠ” ê²ƒì€ ì•„ë˜ì™€ ê°™ì´ í•˜ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> list <span class=\"token operator\">=</span> queryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">desc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">asc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">nullsLast</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// usernameì´ ì—†ëŠ” rowëŠ” ë§ˆì§€ë§‰ìœ¼ë¡œ ì •ë ¬( nullsFirstë„ ê°€ëŠ¥ )</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2 id=\"4-í˜ì´ì§•ê³¼-ì§‘í•©\" style=\"position:relative;\"><a href=\"#4-%ED%8E%98%EC%9D%B4%EC%A7%95%EA%B3%BC-%EC%A7%91%ED%95%A9\" aria-label=\"4 í˜ì´ì§•ê³¼ ì§‘í•© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. í˜ì´ì§•ê³¼ ì§‘í•©</h2>\n<p>í˜ì´ì§•ì€ ì•„ë˜ì™€ ê°™ì´ offset, limitì„ ì‚¬ìš©í•˜ì—¬ ì²˜ë¦¬í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n          <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">orderBy</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">desc</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">offset</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">limit</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n</code></pre></div>\n<br>\n<p>group by, having, ì§‘ê³„í•¨ìˆ˜ ê°™ì€ ì§‘í•© ê´€ë ¨ëœ ì¿¼ë¦¬ì— ëŒ€í•´ì„œë„ ì•„ë˜ ì½”ë“œë¥¼ í†µí•´ ì•Œì•„ë³´ì.</p>\n<ul>\n<li>ì§‘ê³„ í•¨ìˆ˜</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tuple</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> \n    queryFactory\n          <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>\n            member<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">sum</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">avg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> \n            member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">max</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n            mebmer<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">min</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Tuple</span> tuple <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">print</span><span class=\"token punctuation\">(</span>tuple<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span><span class=\"token function\">count</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// memberìˆ˜ ë°˜í™˜</span></code></pre></div>\n<p>ì›í•˜ëŠ” ì§‘ê³„í•¨ìˆ˜ë¥¼ í†µí•´ selectí•˜ê²Œ ë˜ë©´ querydslì—ì„œ ì œê³µí•˜ëŠ” â€˜Tupleâ€™ì´ë¼ëŠ” í˜•íƒœë¡œ ê²°ê³¼ë¥¼ ë¦¬í„´ë°›ëŠ”ë‹¤.\nì´ë¥¼ DTOë¡œ ë½‘ì•„ì„œ ì‚¬ìš©í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ë§ì´ ì“´ë‹¤.</p>\n<ul>\n<li>group by</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tuple</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n          <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">,</span> member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">avg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>team<span class=\"token punctuation\">,</span> team<span class=\"token punctuation\">)</span> <span class=\"token comment\">//inner join member.team as team</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">groupBy</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span>  <span class=\"token comment\">// teamì˜ nameìœ¼ë¡œ grouping</span>\n          <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token class-name\">Team</span> teamA <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">Team</span> teamB <span class=\"token operator\">=</span> result<span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<ul>\n<li>having</li>\n</ul>\n<p>ì•„ë˜ì™€ ê°™ì€ í˜•ì‹ìœ¼ë¡œ havingë„ group by ì™€ í•¨ê»˜ ì“¸ ìˆ˜ ìˆë‹¤.\n<br></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>ìƒëµ\n<span class=\"token punctuation\">.</span><span class=\"token function\">groupBy</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">having</span><span class=\"token punctuation\">(</span>item<span class=\"token punctuation\">.</span>price<span class=\"token punctuation\">.</span><span class=\"token function\">gt</span><span class=\"token punctuation\">(</span><span class=\"token number\">1000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>ì—¬ê¸°ê¹Œì§€ ëŠê³  ë‹¤ìŒ ê¸€ì—ì„œ querydslì˜ ê¸°ë³¸ ë¬¸ë²•ë“¤(ì¡°ì¸, ì„œë¸Œì¿¼ë¦¬, case ë¬¸ ë“±)ì— ëŒ€í•´ì„œ ë” ì•Œì•„ë³´ë„ë¡ í•˜ê² ë‹¤.</p>","excerpt":"QueryDSLì´ ë¬´ì—‡ì¸ì§€ì™€ í™˜ê²½ì„¤ì •í•˜ëŠ” ë°©ë²•ì— ëŒ€í•´ ë°°ì› ìœ¼ë‹ˆ ì´ì œ ë³¸ê²©ì ìœ¼ë¡œ ë¬¸ë²•ì„ ë°°ì›Œë³´ì. 1. ê¸°ë³¸ Q-Type í™œìš© querydsl ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ìƒì„±í•œ Q í´ë˜ìŠ¤ë¥¼ ì‚´í´ë³´ë©´ ì•„ë˜ì™€ ê°™ì´ static ë³€ìˆ˜ë¡œ í´ë˜ìŠ¤ì— ëŒ€í•œ\nQê°ì²´ë¥¼ ìƒì„±í•´ ë‘” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ë”°ë¼ì„œ ìš°ë¦¬ê°€ querydslì„ ì‚¬ìš©í•  ë•ŒëŠ” static importë¡œ í•´ë‹¹ ê°ì²´ë¥¼ ë¶ˆëŸ¬ì™€ì„œ ê°ì²´ì˜ ë©¤ë²„ ë³€ìˆ˜ì¸ â€˜memberâ€™ë¥¼ ì‚¬ìš©í•˜ë©´\nì•„ë˜ì™€ ê°™ì´ ê°„ê²°í•˜ê²Œ ì½”ë“œë¥¼ ì§¤ ìˆ˜ ìˆë‹¤. ê·¸ë¦¬ê³  Springì—ì„œ ì£¼ì…í•´ì£¼ëŠ” em ì€ ë©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œ ì•ˆì „í•˜ë„ë¡ êµ¬ì„±ë˜ì–´ ìˆê¸° ë•Œë¬¸ì— JPAQueryFactoryëŠ” ë™ì‹œì„± ë¬¸ì œë¥¼ ê³ ë ¤í•˜ì§€ ì•Šê³  ë”°ë¡œ í´ë˜ìŠ¤ì˜ í•„ë“œë¡œ ë¹¼ì„œ ì‚¬ìš©í•˜ë©´ ëœë‹¤.\në©€í‹°ì“°ë ˆë“œ í™˜ê²½ì—ì„œ í˜„ì¬ ë‚˜ì˜ transactionì´ ì–´ë””ì— ê±¸ë ¤ìˆëŠëƒì— ë”°ë¼ transactionì— ë°”ì¸ë”© ë˜ë„ë¡ emì„ ë¶„ë°°í•´ì£¼ê¸° ë•Œë¬¸ì´ë‹¤.\n 2. ê²€ìƒ‰ ì¡°ê±´ ì¿¼ë¦¬ querydslì€ JPQLì´ ì œê³µí•˜ëŠ” ëª¨ë“  ê²€ìƒ‰ì¡°ê±´ì— ëŒ€í•œ ë©”ì†Œë“œë¥¼ ì œê³µí•œâ€¦","frontmatter":{"date":"June 09, 2022","title":"[QueryDSL] 2. QueryDSL ê¸°ë³¸ë¬¸ë²• (1)","categories":"Spring","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/querydsl2/"}},"next":{"id":"07225a26-452a-50a8-b7ed-3903a7f9b9bb","html":"<h2 id=\"1-querydslì´ë€\" style=\"position:relative;\"><a href=\"#1-querydsl%EC%9D%B4%EB%9E%80\" aria-label=\"1 querydslì´ë€ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. QueryDSLì´ë€?</h2>\n<p><strong>QueryDSLì€ Java ì½”ë“œë¡œ ì¿¼ë¦¬ë¥¼ ì§œì„œ DBì— ì ‘ê·¼í•˜ëŠ” ë°©ì‹ì´ë‹¤.</strong></p>\n<p>ê¸°ì¡´ ë°ì´í„° ì ‘ê·¼ ë°©ì‹ì¸ jdbcTemplate, Mybatis ì™€ ê°™ì€ ë°©ë²•ì—ì„œëŠ” ì§ì ‘ SQL ì¿¼ë¦¬ë¥¼ ì§œì•¼ë§Œ í–ˆë‹¤.</p>\n<p>JPAì—ì„œëŠ” Spring data jpaë¥¼ í†µí•´ì„œ ì¡°íšŒ ì¡°ê±´ì´ ê°„ë‹¨í•œ ì¿¼ë¦¬ ê°™ì€ ê²½ìš°ì—ëŠ” ë³„ë„ì˜ ì¿¼ë¦¬ë¥¼ ì§œì§€ ì•Šê³ ë„ DBë¡œë¶€í„° ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ ì˜¬ ìˆ˜ ìˆì—ˆë‹¤.</p>\n<p>ê·¸ëŸ¬ë‚˜ ë³µì¡í•œ ì¡°íšŒê°€ í•„ìš”í•  ê²½ìš° ë¶ˆê°€í”¼í•˜ê²Œ JPQLì„ í†µí•´ì„œ ì•„ë˜ì™€ ê°™ì´ ì¿¼ë¦¬ë¥¼ ì§ì ‘ ì§œì•¼ í–ˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">jpql</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">String</span> username <span class=\"token operator\">=</span> <span class=\"token string\">\"jang\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">String</span> query <span class=\"token operator\">=</span> <span class=\"token string\">\"select m from Memberqwer m where m.username = :username\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> em<span class=\"token punctuation\">.</span><span class=\"token function\">createQuery</span><span class=\"token punctuation\">(</span>query<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">.</span><span class=\"token keyword\">class</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">getResultList</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ê·¸ëŸ¬ë‚˜ QueryDSLì„ ì‚¬ìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ìë°”ì½”ë“œì˜ í˜•íƒœë¡œ ì¿¼ë¦¬ë¥¼ ì§¤ ìˆ˜ ìˆê³  ì—¬ëŸ¬ê°€ì§€ ì¥ì ì´ ìˆë‹¤.</p>\n<ul>\n<li>ì»´íŒŒì¼ íƒ€ì„ì—ì„œ ì—ëŸ¬ë¥¼ ì¡ì„ ìˆ˜ ìˆë‹¤.</li>\n<li>ì½”ë“œ ìë™ ì™„ì„±ì˜ ë„ì›€ì„ ë°›ì„ ìˆ˜ ìˆë‹¤.</li>\n<li>ë™ì ì¿¼ë¦¬ë¥¼ í¸í•˜ê²Œ ì§¤ ìˆ˜ ìˆë„ë¡ ë„ì›€ì„ ì¤€ë‹¤.</li>\n<li>ë©”ì†Œë“œë¥¼ ë½‘ì•„ ë‚¼ ìˆ˜ ìˆì–´ ì¬ì‚¬ìš©ì´ ê°€ëŠ¥í•˜ë‹¤.</li>\n<li>parameter ë°”ì¸ë”©ì„ ìë™ìœ¼ë¡œ í•´ì¤€ë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">querydsl</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token class-name\">String</span> username <span class=\"token operator\">=</span> <span class=\"token string\">\"jang\"</span><span class=\"token punctuation\">;</span>\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span><span class=\"token function\">usernameeq</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">private</span> <span class=\"token class-name\">BooleanExpression</span> <span class=\"token function\">usernameEq</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">String</span> username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>Spring data JPAì™€ QueryDSLì„ í•¨ê»˜ í™œìš©í•˜ë©´ RDBë¥¼ ì‚¬ìš©í•œ ê°œë°œí™˜ê²½ì—ì„œ\nê°œë°œìëŠ” ìë°”ë¥¼ í†µí•´ ì¿¼ë¦¬ë¥¼ ììœ ë¡­ê²Œ ì§¤ ìˆ˜ ìˆê³ , í•µì‹¬ ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ ëœë‹¤.</p>\n<h2 id=\"2-í™˜ê²½ì„¤ì •--gradle-\" style=\"position:relative;\"><a href=\"#2-%ED%99%98%EA%B2%BD%EC%84%A4%EC%A0%95--gradle-\" aria-label=\"2 í™˜ê²½ì„¤ì •  gradle  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. í™˜ê²½ì„¤ì • ( gradle )</h2>\n<p>ê¸°ì¡´ì— jpaë¥¼ ì‚¬ìš©í•˜ë˜ ìŠ¤í”„ë§ë¶€íŠ¸ í”„ë¡œì íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ì•„ë˜ì™€ ê°™ì€ ë‚´ìš©ì„ build.gradleì— ì¶”ê°€í•´ì£¼ë©´ ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"groovy\"><pre class=\"language-groovy\"><code class=\"language-groovy\"><span class=\"token comment\">// 1. queryDsl version ì •ë³´ ì¶”ê°€</span>\nbuildscript <span class=\"token punctuation\">{</span>\n    ext <span class=\"token punctuation\">{</span>\n        queryDslVersion <span class=\"token operator\">=</span> <span class=\"token interpolation-string\"><span class=\"token string\">\"5.0.0\"</span></span>\n    <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nplugins <span class=\"token punctuation\">{</span>\n    id <span class=\"token string\">'org.springframework.boot'</span> version <span class=\"token string\">'2.6.3'</span>\n    id <span class=\"token string\">'io.spring.dependency-management'</span> version <span class=\"token string\">'1.0.11.RELEASE'</span>\n    <span class=\"token comment\">// 2. querydsl plugins ì¶”ê°€</span>\n    id <span class=\"token interpolation-string\"><span class=\"token string\">\"com.ewerk.gradle.plugins.querydsl\"</span></span> version <span class=\"token interpolation-string\"><span class=\"token string\">\"1.0.10\"</span></span>\n    id <span class=\"token string\">'java'</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">//...</span>\n\ndependencies <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 3. querydsl dependencies ì¶”ê°€</span>\n    implementation <span class=\"token interpolation-string\"><span class=\"token string\">\"com.querydsl:querydsl-jpa:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">queryDslVersion</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span>\n    implementation <span class=\"token interpolation-string\"><span class=\"token string\">\"com.querydsl:querydsl-apt:</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span><span class=\"token expression\">queryDslVersion</span><span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">\"</span></span>\n    <span class=\"token comment\">//...</span>\n<span class=\"token punctuation\">}</span>\n\ntest <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">useJUnitPlatform</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">/*\n * 4. queryDSL ì„¤ì • ì¶”ê°€\n */</span>\n<span class=\"token comment\">// querydslì—ì„œ ì‚¬ìš©í•  ê²½ë¡œ ì„¤ì •</span>\n<span class=\"token keyword\">def</span> querydslDir <span class=\"token operator\">=</span> <span class=\"token interpolation-string\"><span class=\"token string\">\"</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">$</span><span class=\"token expression\">buildDir</span></span><span class=\"token string\">/generated/querydsl\"</span></span>\n<span class=\"token comment\">// JPA ì‚¬ìš© ì—¬ë¶€ì™€ ì‚¬ìš©í•  ê²½ë¡œë¥¼ ì„¤ì •</span>\nquerydsl <span class=\"token punctuation\">{</span>\n    jpa <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\n    querydslSourcesDir <span class=\"token operator\">=</span> querydslDir\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// build ì‹œ ì‚¬ìš©í•  sourceSet ì¶”ê°€</span>\nsourceSets <span class=\"token punctuation\">{</span>\n    main<span class=\"token punctuation\">.</span>java<span class=\"token punctuation\">.</span>srcDir querydslDir\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// querydsl ì»´íŒŒì¼ì‹œ ì‚¬ìš©í•  ì˜µì…˜ ì„¤ì •</span>\ncompileQuerydsl<span class=\"token punctuation\">{</span>\n    options<span class=\"token punctuation\">.</span>annotationProcessorPath <span class=\"token operator\">=</span> configurations<span class=\"token punctuation\">.</span>querydsl\n<span class=\"token punctuation\">}</span>\n<span class=\"token comment\">// querydsl ì´ compileClassPath ë¥¼ ìƒì†í•˜ë„ë¡ ì„¤ì •</span>\nconfigurations <span class=\"token punctuation\">{</span>\n    compileOnly <span class=\"token punctuation\">{</span>\n        extendsFrom annotationProcessor\n    <span class=\"token punctuation\">}</span>\n    querydsl<span class=\"token punctuation\">.</span>extendsFrom compileClasspath\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>ì´ë ‡ê²Œ ì„¤ì •í•˜ê³ , intellij ìš°ì¸¡ì˜ gradle íƒ­ì˜ [other] ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ compileQuerydslì„ ë”ë¸” í´ë¦­ í•´ë³´ì.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABYlAAAWJQFJUiTwAAAB50lEQVQoz22QyY7TQBQA/TWTeIt3x0532+3YcbxHmYlG4oLghhAnLnx+IXtgBIhDqfrwVK33DD2MVN2VZuxphp7rPDO8PGiXG5euo2sv6K6n7EeKcWB4fqZbbojrgGxH5GVEthPFdabuF4yyqZG6QFUKWUqkVqiqRGiFLCSqEGRKkKiSRCpiWSKrkm6+oy898nxFtwNCN6iqwfD9kGAlDHBsh93Tjv3uN3t2u/1mc7fD3K/vJ1zHpp0npmVCqhNC5huFLjCiNCIXMWka4h18DgeXg+/iHhxs2/4HB9sycUKBfHyn+fCDZPpG2H0h6L+S958wwjQhO+bEfsDB9fCDANd1sW3rP0EbyzI5+BGnemF+/czw8pH8PJPqibK9YYTHlDg9EgbRFvP8AMuyMC1z85+sQdM08XwfVVUs9zv9OKDrM0IplK4wUpGSZzlpmm3R9Z7r6oEX4nkejvu2uuM4G5ZtESUxxblheX5wf7zSTQtSnzkVGiOMQ1x3HXb/wt38FnHW4K/oeoowjqiHmdvjlabr32NbMMlO5EKSHDOiKCaKk3fCOCGIYoLNyS/HxGlGPUwMtzu6aRFlharqDSM+ZlswLUp8VRCoglBIAiE5SkVVN8hSU+hqQ5UaWZTkJ7F9GCXpO2l+4ieUpkz1SmF5NgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/6b4e84dc9ddca36858caaaf9c3c199f6/37523/image1.png\"\n        srcset=\"/static/6b4e84dc9ddca36858caaaf9c3c199f6/e9ff0/image1.png 180w,\n/static/6b4e84dc9ddca36858caaaf9c3c199f6/f21e7/image1.png 360w,\n/static/6b4e84dc9ddca36858caaaf9c3c199f6/37523/image1.png 720w,\n/static/6b4e84dc9ddca36858caaaf9c3c199f6/302a4/image1.png 1080w,\n/static/6b4e84dc9ddca36858caaaf9c3c199f6/07a9c/image1.png 1440w,\n/static/6b4e84dc9ddca36858caaaf9c3c199f6/c2d13/image1.png 2560w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<p>ê·¸ëŸ¬ë©´ $buildDir/generated/querydsl ë””ë ‰í† ë¦¬ í•˜ìœ„ì— Që¡œ ì‹œì‘í•˜ëŠ” í´ë˜ìŠ¤ íŒŒì¼ë“¤ì´ ìƒì„±ë˜ëŠ” ê²ƒì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.\nì•ìœ¼ë¡œ ë¹Œë“œí•  ë•Œë„ compileQuerydslì˜ ì‘ì—…ê¹Œì§€ í¬í•¨í•´ì„œ ìˆ˜í–‰í•´ì£¼ê²Œ ë  ê²ƒì´ë‹¤. ë~!</p>","frontmatter":{"date":"June 05, 2022","title":"[QueryDSL] 1. QueryDSLì´ë€? QueryDSL í™˜ê²½ì„¤ì • ","categories":"Spring","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/querydsl1/"}},"prev":{"id":"e5a5c625-904e-51f6-a720-067c29631382","html":"<p>querydslì˜ ê¸°ë³¸ë¬¸ë²• ì¤‘ ì¡°ì¸, ì„œë¸Œì¿¼ë¦¬, caseë¬¸ ë“±ì— ëŒ€í•´ì„œ ì•Œì•„ë³´ì.</p>\n<h2 id=\"1-ì¡°ì¸\" style=\"position:relative;\"><a href=\"#1-%EC%A1%B0%EC%9D%B8\" aria-label=\"1 ì¡°ì¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. ì¡°ì¸</h2>\n<p>ê¸°ë³¸ì ìœ¼ë¡œ jpqlì˜ ì¡°ì¸ê³¼ ê°™ë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token comment\">/* íŒ€ Aì— ì†Œì†ëœ ëª¨ë“  íšŒì› */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">member<span class=\"token punctuation\">.</span></span>Team</span><span class=\"token punctuation\">,</span> team<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"teamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">//left, right join ë„ ê°€ëŠ¥</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">member<span class=\"token punctuation\">.</span></span>Team</span><span class=\"token punctuation\">,</span> team<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"teamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>ì—°ê´€ê´€ê³„ê°€ ì—†ì–´ë„ querydslì—ì„œ joinì„ í•  ìˆ˜ ìˆë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/* íšŒì›ì˜ ì´ë¦„ì´ íŒ€ ì´ë¦„ê³¼ ê°™ì€ íšŒì› ì¡°íšŒ*/</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">theta_join</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  \n  queryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span>team<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n</code></pre></div>\n<h3 id=\"join-on-ì ˆ\" style=\"position:relative;\"><a href=\"#join-on-%EC%A0%88\" aria-label=\"join on ì ˆ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Join on ì ˆ</h3>\n<p>onì ˆì„ ì‚¬ìš©í•˜ë©´ ì¡°ì¸í•  ëŒ€ìƒì„ ì¤„ì—¬ì¤€ë‹¤.</p>\n<ol>\n<li>ì¡°ì¸ ëŒ€ìƒ í•„í„°ë§</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/* íšŒì›ê³¼ íŒ€ì„ ì¡°ì¸í•˜ë©´ì„œ, íŒ€ ì´ë¦„ì´ teamAì¸ íŒ€ë§Œ ì¡°ì¸, íšŒì›ì€ ëª¨ë‘ ì¡°íšŒ */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">join_on_filtering</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  \n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tuple</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> team<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>team<span class=\"token punctuation\">,</span> team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"teamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// SQL ë¬¸ë²• ìƒì—ì„œëŠ” on ì ˆ ë’¤ì— and(t1.name='teamA') ê°€ ì¶”ê°€ë˜ëŠ” í˜•íƒœ </span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>inner joinì¼ ê²½ìš°ëŠ” onì„ ì“°ëŠ” ê²ƒê³¼ whereì— ì¡°ê±´ì„ ë”í•˜ëŠ” ê²ƒê³¼ ë™ì¼í•œ ê²°ê³¼ë¥¼ ë°˜í™˜í•œë‹¤.\nleft joinì¼ ê²½ìš°ì—ëŠ” ì—†ëŠ” ê²ƒë„ left ë¶€ë¶„ì€ ê°€ì ¸ì˜¤ê¸° ë•Œë¬¸ì— ìœ„ì™€ ê°™ì€ ë°©ë²•ì„ ì¨ì£¼ì–´ì•¼ í•œë‹¤.\në”°ë¼ì„œ outer joinì´ í•„ìš”í•œ ê²½ìš°ì—ë§Œ oní•„í„°ë§ì„ ì‚¬ìš©í•˜ì.</p>\n<ol start=\"2\">\n<li>ì—°ê´€ê´€ê³„ê°€ ì—†ëŠ” ì—”í‹°í‹° outer join</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">join_on_no_relation</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  \n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tuple</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n        <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">,</span> team<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">leftJoin</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">on</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// id ëŒ€ì‹  member.username = team.name ìœ¼ë¡œ on</span>\n        <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ì¼ë°˜ ì¡°ì¸ : leftJoin(member.Team, team)</li>\n<li>on ì¡°ì¸ : from(member).leftJoin(team).on(â€¦)</li>\n</ul>\n<h2 id=\"2-fetch-ì¡°ì¸\" style=\"position:relative;\"><a href=\"#2-fetch-%EC%A1%B0%EC%9D%B8\" aria-label=\"2 fetch ì¡°ì¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Fetch ì¡°ì¸</h2>\n<p>í˜ì¹˜ì¡°ì¸ì€ SQLì—ì„œ ì œê³µí•˜ëŠ” ê¸°ëŠ¥ì´ ì•„ë‹ˆê³  SQL ì¡°ì¸ì„ í™œìš©í•´ì„œ ì—°ê´€ëœ ì—”í‹°í‹°ë¥¼ SQL í•œë²ˆì— ì¡°íšŒí•˜ëŠ” ê¸°ëŠ¥ì´ë‹¤.\nì„±ëŠ¥ ìµœì í™”ë¥¼ ìœ„í•´ ì‚¬ìš©ëœë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token annotation punctuation\">@PersistenceUnit</span>\n<span class=\"token class-name\">EntityManagerFactory</span> emf<span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">fetchJoinNo</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token class-name\">Member</span> findMember <span class=\"token operator\">=</span> queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">selectFrom</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">join</span><span class=\"token punctuation\">(</span><span class=\"token class-name\"><span class=\"token namespace\">member<span class=\"token punctuation\">.</span></span>Team</span><span class=\"token punctuation\">,</span> team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">fetchJoin</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">where</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">.</span>name<span class=\"token punctuation\">.</span><span class=\"token function\">eq</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"teamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    emf<span class=\"token punctuation\">.</span><span class=\"token function\">getPersistenceUnitUtil</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isLoaded</span><span class=\"token punctuation\">(</span>findMember<span class=\"token punctuation\">.</span><span class=\"token function\">getTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"3-ì„œë¸Œ-ì¿¼ë¦¬\" style=\"position:relative;\"><a href=\"#3-%EC%84%9C%EB%B8%8C-%EC%BF%BC%EB%A6%AC\" aria-label=\"3 ì„œë¸Œ ì¿¼ë¦¬ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. ì„œë¸Œ ì¿¼ë¦¬</h2>\n<ul>\n<li>select, where ì ˆì—ì„œ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš© ê°€ëŠ¥í•˜ë©°, aliasëª…ì„ ì§ì ‘ ì§€ì •í•´ì£¼ì–´ì•¼ í•œë‹¤.</li>\n<li>static import ì‚¬ìš©í•´ì„œ JPAExpressions í‘œí˜„ ìƒëµ ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token comment\">/* ë‚˜ì´ê°€ ê°€ì¥ ë§ì€ íšŒì› ì¡°íšŒ */</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">selectSubquery</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">QMember</span> memberSub <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">QMember</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"memberSub\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tuple</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span> \n              <span class=\"token class-name\">JPAExpressions</span><span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>memberSub<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">avg</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">// static import í•´ì„œ JPAExpressions. í‘œí˜„ ìƒëµ ê°€ëŠ¥ </span>\n            <span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    emf<span class=\"token punctuation\">.</span><span class=\"token function\">getPersistenceUnitUtil</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">isLoaded</span><span class=\"token punctuation\">(</span>findMember<span class=\"token punctuation\">.</span><span class=\"token function\">getTeam</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// true</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>\n<p>From ì ˆì—ì„œ ì„œë¸Œì¿¼ë¦¬ ì‚¬ìš© ë¶ˆê°€</p>\n<ul>\n<li>JPQLì—ì„œëŠ” from ì ˆì˜ ì„œë¸Œì¿¼ë¦¬, ì¦‰ ì¸ë¼ì¸ ë·°ëŠ” ì§€ì›í•˜ì§€ ì•ŠëŠ”ë‹¤.\nselect, whereì ˆì—ì„œë§Œ ì‚¬ìš© ê°€ëŠ¥í•˜ë‹¤.</li>\n</ul>\n</li>\n<li>\n<p>ëŒ€ì²´ë°©ì•ˆ</p>\n<ul>\n<li>ì„œë¸Œì¿¼ë¦¬ë¥¼ joinìœ¼ë¡œ ë³€ê²½</li>\n<li>appì—ì„œ ì¿¼ë¦¬ë¥¼ 2ë²ˆ ë¶„ë¦¬í•´ì„œ ì‹¤í–‰</li>\n<li>native SQLì„ ì¨ì•¼ í•œë‹¤.</li>\n</ul>\n</li>\n</ul>\n<p>ê·¸ëŸ¬ë‚˜ Fromì ˆì— ì„œë¸Œì¿¼ë¦¬ë¥¼ ì“°ëŠ” ì´ìœ ê°€ ë§ì€ë° ê·¸ ì¤‘ì— ì•ˆ ì¢‹ì€ ì´ìœ ëŠ” í™”ë©´ì— ì¿¼ë¦¬ë¥¼ ê·¸ëŒ€ë¡œ ë§ì¶”ê¸° ìœ„í•œ ìš©ë„ë¡œ ì“´ë‹¤ëŠ” ê²ƒì´ë‹¤.\nì¿¼ë¦¬ëŠ” DBì—ì„œ ë°ì´í„°ë¥¼ ê°€ì ¸ì˜¤ëŠ” ê²ƒì— ì§‘ì¤‘í•˜ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ê³¼ í”„ë ˆì  í…Œì´ì…˜ ë‹¨ì—ì„œ ê°€ì ¸ì˜¨ ë°ì´í„°ë¥¼ ì¡°ì‘í•˜ì—¬ ì“°ëŠ” ê²ƒì´ ë” ë‚˜ì€ ë°©ì‹ì´ë‹¤.</p>\n<h2 id=\"4-case-ë¬¸\" style=\"position:relative;\"><a href=\"#4-case-%EB%AC%B8\" aria-label=\"4 case ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Case ë¬¸</h2>\n<p>ì‚¬ì‹¤ caseë¬¸ì„ ì“°ëŠ” ê²ƒì€ ëŒ€ë¶€ë¶„ì˜ ê²½ìš° ì¢‹ì§€ ì•Šê³ , ìœ„ì™€ ê°™ì€ ì´ìœ ë¡œ ì•± ë‹¨ì—ì„œ í•´ê²°í•˜ëŠ” ê²ƒì´ ë” ì¢‹ì€ ë°©ë²•ì´ê¸´ í•˜ë‹¤.\ní•˜ì§€ë§Œ ì–´ì¨‹ë“  ì•„ë˜ì™€ ê°™ì€ ë°©ë²•ìœ¼ë¡œ querydslì—ì„œë„ caseë¬¸ì„ ì§€ì›í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\">\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">basicCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span> queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>age\n                  <span class=\"token punctuation\">.</span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ì—´ì‚´\"</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token punctuation\">.</span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ìŠ¤ë¬´ì‚´\"</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token punctuation\">.</span><span class=\"token function\">otherwise</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ê¸°íƒ€\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">complexCase</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n    queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">CaseBuilder</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token punctuation\">.</span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">between</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span><span class=\"token number\">20</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"0~20\"</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token punctuation\">.</span><span class=\"token function\">when</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">between</span><span class=\"token punctuation\">(</span><span class=\"token number\">21</span><span class=\"token punctuation\">,</span><span class=\"token number\">30</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"20~30\"</span><span class=\"token punctuation\">)</span>\n                  <span class=\"token punctuation\">.</span><span class=\"token function\">otherwise</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"ê¸°íƒ€\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"5-ìƒìˆ˜-ë¬¸ì-ë”í•˜ê¸°-ì‚¬ìš©\" style=\"position:relative;\"><a href=\"#5-%EC%83%81%EC%88%98-%EB%AC%B8%EC%9E%90-%EB%8D%94%ED%95%98%EA%B8%B0-%EC%82%AC%EC%9A%A9\" aria-label=\"5 ìƒìˆ˜ ë¬¸ì ë”í•˜ê¸° ì‚¬ìš© permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. ìƒìˆ˜, ë¬¸ì ë”í•˜ê¸° ì‚¬ìš©</h2>\n<ul>\n<li>ìƒìˆ˜\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">constant</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Tuple</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span>\n    queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span> <span class=\"token class-name\">Expressions</span><span class=\"token punctuation\">.</span><span class=\"token function\">constant</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"A\"</span><span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<br>\n<ul>\n<li>\n<p>ë¬¸ì ë”í•˜ê¸°</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\n  <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">String</span><span class=\"token punctuation\">></span></span> result <span class=\"token operator\">=</span>\n    queryFactory\n            <span class=\"token punctuation\">.</span><span class=\"token function\">select</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"_\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">concat</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">.</span>age<span class=\"token punctuation\">.</span><span class=\"token function\">stringValue</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> \n            <span class=\"token punctuation\">.</span><span class=\"token function\">from</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span>\n            <span class=\"token punctuation\">.</span><span class=\"token function\">fetch</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>ë¬¸ìê°€ ì•„ë‹Œ íƒ€ì…ë“¤ì€ .stringValue()ë¡œ ë¬¸ìë¡œ ë³€í™˜ê°€ëŠ¥í•˜ë©°, íŠ¹íˆ Enumì²˜ë¦¬í•  ë•Œ ë§ì´ ì‚¬ìš©í•œë‹¤.</li>\n</ul>\n</li>\n</ul>","frontmatter":{"date":"June 10, 2022","title":"[QueryDSL] 3. QueryDSL ê¸°ë³¸ë¬¸ë²• (2)","categories":"Spring","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/querydsl3/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/querydsl2/","nextSlug":"/querydsl1/","prevSlug":"/querydsl3/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}