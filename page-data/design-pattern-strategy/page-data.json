{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/design-pattern-strategy/",
    "result": {"data":{"cur":{"id":"840157c6-ecff-56f7-85ef-eb0308fa3632","html":"<h3 id=\"strategy전략-패턴의-정의와-uml은-아래와-같다\" style=\"position:relative;\"><a href=\"#strategy%EC%A0%84%EB%9E%B5-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%A0%95%EC%9D%98%EC%99%80-uml%EC%9D%80-%EC%95%84%EB%9E%98%EC%99%80-%EA%B0%99%EB%8B%A4\" aria-label=\"strategy전략 패턴의 정의와 uml은 아래와 같다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Strategy(전략) 패턴의 정의와 UML은 아래와 같다.</h3>\n<blockquote>\n<h4 id=\"여러가지-알고리즘을-하나의-추상적인-접근점interface을-만들어-접근점에서-교환-가능하도록-하는-패턴을-strategy-패턴이라고-한다\" style=\"position:relative;\"><a href=\"#%EC%97%AC%EB%9F%AC%EA%B0%80%EC%A7%80-%EC%95%8C%EA%B3%A0%EB%A6%AC%EC%A6%98%EC%9D%84-%ED%95%98%EB%82%98%EC%9D%98-%EC%B6%94%EC%83%81%EC%A0%81%EC%9D%B8-%EC%A0%91%EA%B7%BC%EC%A0%90interface%EC%9D%84-%EB%A7%8C%EB%93%A4%EC%96%B4-%EC%A0%91%EA%B7%BC%EC%A0%90%EC%97%90%EC%84%9C-%EA%B5%90%ED%99%98-%EA%B0%80%EB%8A%A5%ED%95%98%EB%8F%84%EB%A1%9D-%ED%95%98%EB%8A%94-%ED%8C%A8%ED%84%B4%EC%9D%84-strategy-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%9D%BC%EA%B3%A0-%ED%95%9C%EB%8B%A4\" aria-label=\"여러가지 알고리즘을 하나의 추상적인 접근점interface을 만들어 접근점에서 교환 가능하도록 하는 패턴을 strategy 패턴이라고 한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>“여러가지 알고리즘을 하나의 추상적인 접근점(interface)을 만들어 접근점에서 교환 가능하도록 하는 패턴을 Strategy 패턴이라고 한다”</h4>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAABlklEQVQ4y31T227CMAzt//8TT7wjHjaQRuiNNmVQem8KLXCm4xHUcZkly07iHDvHjnO5XHA6ndD3Pc7nM4ZhkDX3r9erKNdN06CqKpRlibZtZY9nFGspDoGOxyPSNIVSCvv9XkAJboXnSZJgOp1iMpmI33WdJH0CZCZqWVVYKSUVEMB1XWRZhs1mIwCUpq6R57kkewvICvmUb62x/lpBR9Hv06rqfpEgRVGI5kWOvCjk2S8BeSlLUwRK3ZVrG0wxxiD2fXzMZljM54g9Xzgdc2h9Z4w+lvG+9UlHZ7q357TOOMNYKWwOQeq6lorokw6uqfTJ/xjUeQQZZ+azyfF/lVvAPxU+8nA4HKSzQRDA931EUSTV2XM2R2uNMAzheZ7Y9Ma784oHzuI2SRDHsSiBCWJj2PXtdotEa1Ge73Y7oegJkF3nSAz8NecBp76XQDsmjGPXuceY/mY5u6TnCZCX2ICN62L1uRDlyNhBtoA6CKE+F1gvlwiVkjsvK7REd20L0zToWoPOGMluY+S7GgPTtmKp/e1v/wBQQ+/yu6GztwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/1c3af607c05f0f3316c6da654b587e75/37523/image1.png\"\n        srcset=\"/static/1c3af607c05f0f3316c6da654b587e75/e9ff0/image1.png 180w,\n/static/1c3af607c05f0f3316c6da654b587e75/f21e7/image1.png 360w,\n/static/1c3af607c05f0f3316c6da654b587e75/37523/image1.png 720w,\n/static/1c3af607c05f0f3316c6da654b587e75/612f7/image1.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p><strong>Strategy 패턴을 이해하기 위해서는 먼저 interface에 대한 이해, 그리고 delegation에 대한 이해가 필요하다. interface는 객체지향 프로그래밍에서 기능에 대한 선언과 구현을 분리하며 기능을 사용하기 위한 통로를 제공한다</strong></p>\n<br>\n1. Interface에 대한 이해 - 기능에 대한 선언과 분리\n<br>\n직관적으로 이해하자면 interface는 일종의 '자격증' 같은 것이다. fly()라는 메소드를 지닌 Flyable 이라는 인터페이스가 있을 때 Bird 클래스에서 이것을 implements 한다면 Bird클래스는 Flyable 의 fly() 기능을 사용하기 위한 자격을 갖춘 것으로 이해하면 좋을 것 같다. 물론 그 기능은 무조건 사용해야 한다. 이렇듯 기능에 대한 선은 Flyable 인터페이스해서 해두고, 그에 대한 직접적인 구현은 Bird, Airplane, Rocket 등 Flyable에 대한 \"자격을 갖춘 클래스\"에서 하는 것이다.\n<br>\n<br>\n2. Interface에 대한 이해 - 기능을 사용하기 위한 통로\n<br>\n아래 코드에서 작성한 것처럼 Flyable 인터페이스 타입의 객체는 이를 implement한 클래스의 인스턴스를 할당 받을 수 있고, 이를 통해 각 클래스에서 각각 구체적으로 구현된 fly() 메소드를 사용하기 위한 통로로서 사용된다.\n<br>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\nFlyable flyingObject1 = new Bird();\nFlyable flyingObject2 = new Airplane();\n\nflyingObject1.fly() // '훨훨~~\nflyingObject2.fly() // '슝~'\n</code></pre></div>\n<br>\n3. Delegation(위임)\n<p>Delegation은 특정 객체의 기능을 사용하기 위해 다른 객체의 기능을 호출하는 것을 말한다. 아래 코드를 보면 금방 이해가 될 것이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic class Boss{\nEmployee employee = new Employee();\n\npublic void doCopy(){\nemployee.doCopy();\n}\n}\npublic class Employee{\npublic void doCopy(){\nSystem.out.println(\"1000장 째 복사중\");\n}\npublic void makeDoc(){\nSystem.out.println(\"쓸데없는 PPT 만드는 중\");\n}\n}</code></pre></div>\n<br>\n위와 같이 Boss 클래스에서 doCopy를 하기 위해 Employee 인스턴스의 doCopy 메소드를 호출하는 것을 의미한다.\n<p>이제 interface와 delegation에 대해 이해 했으니 다시 돌아가서 Strategy 패턴이 무엇인지 예를 통해 알아보자.</p>\n<h3 id=\"예제--게임-캐릭터의-공격-구현-전략\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%A0%9C--%EA%B2%8C%EC%9E%84-%EC%BA%90%EB%A6%AD%ED%84%B0%EC%9D%98-%EA%B3%B5%EA%B2%A9-%EA%B5%AC%ED%98%84-%EC%A0%84%EB%9E%B5\" aria-label=\"예제  게임 캐릭터의 공격 구현 전략 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>예제 : 게임 캐릭터의 공격 구현 전략</h3>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic interface Weapon{\npublic void attack();\n}\n\npublic class Knife implements Weapon{\n@Override\npublic void attack(){\nSystem.out.println(\"칼로 찌르기\");\n}\n}\n\npublic class Shotgun implements Weapon{\n@Override\npublic void attack(){\nSYstem.out.println(\"샷건 쏘기\");\n}\n}\n</code></pre></div>\n<br>\nWeapon이란 인터페이스는 Knife와 Shotgun에 외부에서 접근할 수 있는 '접근점'을 제공하며, 기능의 선언은 Weapon에서 구현은 Knife,Shotgun에서 하였다.\n<p>이제 이를 사용하는 게임 캐릭터 클래스를 만들어 보자. GameCharacter 클래스에서는 외부에서 ‘장착’ 시켜준 weapon을 자기의 무기로 설정하고 이를 이용한 공격은 weapon 클래스에게 delegate(위임) 한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic class GameCharacter{\n// 접근점인 인터페이스 타입의 객체 선언\nprivate Weapon weapon;\n// 무기 교체 가능\npublic void setWeapon(Weapon weapon){\nthis.weapon = weapon;\n}\n\n    //delagation GameCharacter 클래스에서 attack 메소드에 대한 동작을 Weapon클래스에 위임함\n    public void attack(){\n        if(weapon == null){\n            System.out.println(\"맨손 공격\");\n        }\n        else{\n            weapon.attack();\n        }\n    }\n\n}\n</code></pre></div>\n<br>\n이제 Main 메소드에서 게임캐릭터를 사용하여 공격해보자. 아래처럼 게임캐릭터에서는 attack이라는 동일한 메소드를 실행하지만 어떤 무기를 게임캐릭터에 장착시켜주냐에 따라 서로 다른 동작(알고리즘)을 하도록 구현할 수 있다.\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">\npublic class Main{\npublic static void main(String[] args){\nGameCharacter gameCharacter = new GameCharacter();\ngameCharacter.attack(); // 맨손 공격\ngameCharacter.setWeapon(new Knife());\ngameCharacter.attack(); // 칼로 찌르기\ngameCharacter.setWeapon(new ShotGun());\ngameCharacter.attack(); // 샷건 쏘기\n}\n}\n</code></pre></div>\n<hr>\n<ul>\n<li>\n<p>Strategy 패턴의 장점은 Context 클래스의 수정 없이(위에서는 game character가 context 클래스이다) 쉽게 새로운 기능(전략)을 추가하거나 수정할 수 있다는 데에 있다. 예컨대 위 예제에서 새로운 무기인 Arrow를 추가한다고 하면, 단순히 Weapon 인터페이스를 implements해주는 클래스로만 작성하면 되고, GameCharacter 클래스는 건들 필요가 없다.</p>\n</li>\n<li>\n<p>그래서 일일이 경우에 따른 else if 문이나 switch문을 추가할 필요가 없이 새로운 클래스를 만들어 객체지향적으로 해결할 수 있다는 장점을 지닌다.</p>\n</li>\n<li>\n<p>Strategy 패턴은 보통 하나의 메소드를 위임처리할 때 사용된다.</p>\n</li>\n</ul>\n<p>개인적으로 Strategy 패턴은 객체지향적 프로그래밍을 이해하는 데 좋은 예시라고 생각한다.</p>","excerpt":"Strategy(전략) 패턴의 정의와 UML은 아래와 같다. “여러가지 알고리즘을 하나의 추상적인 접근점(interface)을 만들어 접근점에서 교환 가능하도록 하는 패턴을 Strategy 패턴이라고 한다”  Strategy 패턴을 이해하기 위해서는 먼저 interface에 대한 이해, 그리고 delegation에 대한 이해가 필요하다. interface는 객체지향 프로그래밍에서 기능에 대한 선언과 구현을 분리하며 기능을 사용하기 위한 통로를 제공한다 Delegation은 특정 객체의 기능을 사용하기 위해 다른 객체의 기능을 호출하는 것을 말한다. 아래 코드를 보면 금방 이해가 될 것이다. 이제 interface와 delegation에 대해 이해 했으니 다시 돌아가서 Strategy 패턴이 무엇인지 예를 통해 알아보자. 예제 : 게임 캐릭터의 공격 구현 전략 이제 이를 사용하는 게임 캐릭터 클래스를 만들어 보자. GameCharacter 클래스에서는 외부에서 ‘장착’ 시켜준 wea…","frontmatter":{"date":"February 11, 2022","title":"[디자인 패턴] 2.Strategy 패턴","categories":"디자인패턴","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/design-pattern-strategy/"}},"next":{"id":"d350fa6c-4b34-530c-b3d0-972493169349","html":"<h3 id=\"싱글톤-패턴의-정의와-uml은-아래와-같다\" style=\"position:relative;\"><a href=\"#%EC%8B%B1%EA%B8%80%ED%86%A4-%ED%8C%A8%ED%84%B4%EC%9D%98-%EC%A0%95%EC%9D%98%EC%99%80-uml%EC%9D%80-%EC%95%84%EB%9E%98%EC%99%80-%EA%B0%99%EB%8B%A4\" aria-label=\"싱글톤 패턴의 정의와 uml은 아래와 같다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>싱글톤 패턴의 정의와 UML은 아래와 같다.</h3>\n<blockquote>\n<h4 id=\"소프트웨어-디자인-패턴에서-싱글턴-패턴singleton-pattern을-따르는-클래스는-생성자가-여러-차례-호출되더라도-실제로-생성되는-객체는-하나이고-최초-생성-이후에-호출된-생성자는-최초의-생성자가-생성한-객체를-리턴한다-이와-같은-디자인-유형을-싱글턴-패턴이라고-한다\" style=\"position:relative;\"><a href=\"#%EC%86%8C%ED%94%84%ED%8A%B8%EC%9B%A8%EC%96%B4-%EB%94%94%EC%9E%90%EC%9D%B8-%ED%8C%A8%ED%84%B4%EC%97%90%EC%84%9C-%EC%8B%B1%EA%B8%80%ED%84%B4-%ED%8C%A8%ED%84%B4singleton-pattern%EC%9D%84-%EB%94%B0%EB%A5%B4%EB%8A%94-%ED%81%B4%EB%9E%98%EC%8A%A4%EB%8A%94-%EC%83%9D%EC%84%B1%EC%9E%90%EA%B0%80-%EC%97%AC%EB%9F%AC-%EC%B0%A8%EB%A1%80-%ED%98%B8%EC%B6%9C%EB%90%98%EB%8D%94%EB%9D%BC%EB%8F%84-%EC%8B%A4%EC%A0%9C%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%98%EB%8A%94-%EA%B0%9D%EC%B2%B4%EB%8A%94-%ED%95%98%EB%82%98%EC%9D%B4%EA%B3%A0-%EC%B5%9C%EC%B4%88-%EC%83%9D%EC%84%B1-%EC%9D%B4%ED%9B%84%EC%97%90-%ED%98%B8%EC%B6%9C%EB%90%9C-%EC%83%9D%EC%84%B1%EC%9E%90%EB%8A%94-%EC%B5%9C%EC%B4%88%EC%9D%98-%EC%83%9D%EC%84%B1%EC%9E%90%EA%B0%80-%EC%83%9D%EC%84%B1%ED%95%9C-%EA%B0%9D%EC%B2%B4%EB%A5%BC-%EB%A6%AC%ED%84%B4%ED%95%9C%EB%8B%A4-%EC%9D%B4%EC%99%80-%EA%B0%99%EC%9D%80-%EB%94%94%EC%9E%90%EC%9D%B8-%EC%9C%A0%ED%98%95%EC%9D%84-%EC%8B%B1%EA%B8%80%ED%84%B4-%ED%8C%A8%ED%84%B4%EC%9D%B4%EB%9D%BC%EA%B3%A0-%ED%95%9C%EB%8B%A4\" aria-label=\"소프트웨어 디자인 패턴에서 싱글턴 패턴singleton pattern을 따르는 클래스는 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이고 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴한다 이와 같은 디자인 유형을 싱글턴 패턴이라고 한다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a><strong><em>“소프트웨어 디자인 패턴에서 싱글턴 패턴(Singleton pattern)을 따르는 클래스는, 생성자가 여러 차례 호출되더라도 실제로 생성되는 객체는 하나이고 최초 생성 이후에 호출된 생성자는 최초의 생성자가 생성한 객체를 리턴한다. 이와 같은 디자인 유형을 싱글턴 패턴이라고 한다”</em></strong></h4>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 63.33333333333333%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB/klEQVQ4y5WSDU/aUBSG+///wZxZZraYLSYi1jmdWwZmflXpB3RVYykyxVLRIlAKlyLPcuvAmkWzneTJTd57znvvOfcqvBCTyYT/DeU5o6nZ3d0dURTR6/XodDq0223CMHyC1G5ubhBCPG84XWXieDyekSTJjNFolCJ1eXC320XJFmeRIZOl4b9EHMdpF0rW4O+kAVW3+uKMp7VyLOkN4UFIkhFCxAgxYJwMYTKmH3ep16WhbFekew/EaZvZ8fT7/ceW7+/lCZcIYTMZn+IFGuVaEb+xx8XFDo3LXYLgACEckuSEOK4QhsEfw/unhsPhkMFAcHt7Ri/SEAOTqr+NWd3EPd3ArqxxcrxOzftKFJWIoiPa7X0aDQ8hRsT9fvq6ctatVgsl/QbtDpe/yjSrW1iWira3RElb5thZ5+hwmUNtGb2Uw3HWCcMDrhpFytYR5+d1PK9KrVbDdV2CIEDx/St8P+DsTMNx8hxqS3zbesvm5zcc7H9ku/Ce4vd3/NheZHfnA85PFdfd4OTY4vq6he/7NJvNGYrneZzX6mh6AbWwgJp/jbo6z6e1eVbzc6jqPF82F1jJvWIlN0c+N0exsIhpaLMbSo8piuM4SGy7QsWysCyTctnKYFLOaJWKhWka2LbNtDaLous6MwwDwzDQ9UcM45GsJvNLpRJP6nWd39AzwjsQ0kJpAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/d57d190477e22a986eb306bd3aa81966/37523/image.png\"\n        srcset=\"/static/d57d190477e22a986eb306bd3aa81966/e9ff0/image.png 180w,\n/static/d57d190477e22a986eb306bd3aa81966/f21e7/image.png 360w,\n/static/d57d190477e22a986eb306bd3aa81966/37523/image.png 720w,\n/static/d57d190477e22a986eb306bd3aa81966/612f7/image.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다르게 말하면 프로세스가 실행될 때 한 번만 메모리를 할당하고 해당 메모리에 인스턴스를 만들어서 전역에서 공유하기 위한 패턴이다. 클래스에 딱 하나의 인스턴스만 존재해야 되고, 어플리케이션 전역적인 접근이 필요한 경우에 이를 사용한다.</p>\n<br>\n전역적으로 적용되어야 하는 앱의 Setting 클래스라던가, Logger, datasource 같은 것이 싱글톤의 예시이며 Spring에서 bean을 전역적으로 관리하고 Dependency Injection을 통해 필요한 곳에 빈을 주입하는 것도 싱글톤 패턴이 적용된 예이다.\n<hr>\n<p>정의에서는 ‘생성자가 여러 차례 호출되더라도’ 라고 표현했지만, 실제 싱글톤 클래스(A 클래스라고 하자)를 구현할 때는 애초에 외부에서 인스턴스를 생성할 수 없도록 생성자를 private으로 두고, 클래스 안에서 A를 타입으로 하는 static 변수에 static 메소드인 getInstance 메소드를 통해 인스턴스를 생성하여 할당한다.</p>\n<p>이렇게 하면 프로세스 실행 시에는 미리 할당된 정적 메모리에 A 타입의 변수가 할당되게 되고, (static 변수이기에)</p>\n<p>외부에서는 객체의 생성(new) 없이도 static 메소드인 getInstance 메소드를 통해 기 할당된 static 변수의 공간에 인스턴스를 생성할 수 있게 된다.\n<br></p>\n<p>Settings 클래스 예시를 보자.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">@Getter\n@Setter\npublic class Settings{\n    private static Settings settings;\n    private Settings(){}\n    public static Settings getSettings(){\n        if( settings == null ){\n            settings = new Settings();\n        }\n        return settings;\n    }\n\n    private boolean darkMode = false;\n    private int fontSize = 10;\n    private String fontColor = 'black';\n}</code></pre></div>\n<p>위와 같이 선언된 Settings 클래스는 이제 어디에서나 사용가능하며, 서로 다른 클래스에서 Setting 클래스의 변수를 getSetting 메소드를 통해 할당하면 darkMode, fontSize, fontColor값을 변경하더라도 공통으로 적용되게 될 것이다.\n<br></p>\n<p>이는 결국 어디에서든 getSetting 메소드를 통해 반환된 동일한 인스턴스라는 것을 의미하기 때문에 아래 코드로 테스트를 해보면 true 값이 출력되는 것을 볼 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">public static void main(String[] args){\n    Settings setting1 = Settings.getSettings();\n    Settings setting2 = Settings.getSettings();\n\n    System.out.println(setting1 == setting2);\n}</code></pre></div>\n<br>\n별거 아닌 것 처럼 보이는 디자인 패턴이지만 늘 디자인 패턴을 공부할 때 가장 앞에 나오는 이유는 가장 유용하게 많이 쓰이는 패턴이기 때문이어서가 아닐까.\n<br>\n<br>\nSpring과 같은 framework에서 bean으로 등록하는 어노테이션(@bean, @Service, @Controller, @Repository 등)을 통해 등록 해 두기만 하면 어디서든 @Autowired 를 통해 사용하고자 하는 곳 어디에서든 bean을 주입 받을 수 있는 것처럼.\n<hr>\n<br>\n* private 생성자 : 외부 생성 막기 위함\n<ul>\n<li>\n<p>클래스 type static 변수 : 미리 정적 메모리에 인스턴스 할당을 위한 공간 마련하기 위함</p>\n</li>\n<li>\n<p>static getInstance 메소드 : 외부에서 인스턴스 생성 없이 마련된 정적 메모리 공간에 인스턴스를 생성하고, 이미 있을 경우 해당 인스턴스를 반환 받기 위함</p>\n</li>\n</ul>\n<br>\n<h3 id=\"멀티스레드-환경에서의-싱글톤\" style=\"position:relative;\"><a href=\"#%EB%A9%80%ED%8B%B0%EC%8A%A4%EB%A0%88%EB%93%9C-%ED%99%98%EA%B2%BD%EC%97%90%EC%84%9C%EC%9D%98-%EC%8B%B1%EA%B8%80%ED%86%A4\" aria-label=\"멀티스레드 환경에서의 싱글톤 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>멀티스레드 환경에서의 싱글톤</h3>\n<p>: 2개 이상의 스레드가 인스턴스를 얻기 위해 getInstance 메소드( 위에서는 getSettings메소드 )에 진입하게 되면 서로 다른 2개 이상의 인스턴스가 만들어질 수 있다. 따라서 멀티스레드 환경에서는 그냥 처음부터 인스턴스를 만들어 버리면 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">public class Settings{\n    private Settings(){}\n    private static Settings settings = new Settings();\n    public static Settings getSettings(){\n        return settings;\n    }\n}</code></pre></div>","frontmatter":{"date":"February 10, 2022","title":"[디자인 패턴] 1.Singleton 패턴","categories":"디자인패턴","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/design-pattern-sigleton/"}},"prev":{"id":"e1913b7f-e5c0-52f8-8cb2-0ffa026cee00","html":"<p>State 패턴에 대한 UML을 보자마자 든 생각은 ‘어? 이거 Strategy 패턴과 똑같은데?’ 라는 생각이었고,</p>\n<p>State 패턴에 대한 설명을 듣고 나서 든 생각은 ‘어? 이거 옛날에 Logic design 수업에서 배운 FSM(Finite State Machine)과 비슷하네?’ 라는 생각이었다.\n그리고 실제로 FSM 개념을 프로그래밍적으로 구현한 것이 State패턴이다.</p>\n<p>UML은 Strategy패턴과 사실상 같다고 볼 수 있다.\nContext 클래스에서 State interface 객체를 가지고 있고, State과 관련된 행동을 State class에게 위임한다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABS0lEQVQoz22SyY6CYBCEef+n8sBNJXpQEXEXF1Tcd6HM15OfOJMhqSC9VHdV6y0WC/V6Pc1mM+12O43HY61WK12vV53P51+4XC7a7/daLpc6HA6Koqj8fb/f9Xw+5XU6Hfm+r263q/l8boRpmup0OlnhN4iRozZJElUqFU0mE202G1vACMMw1HA4tK1AnueG1+tV4v1+lyiKQtvt1kj7/b6Ox6N93263H0InJcsyk0Xw8XiYBEChq2ELAAnSR6NRqcbVexQ6b1wjhGzJQwxSiJx0YjQjlVq2dgM9jGUS0gGyaYrjWO12W9VqVfV6Xa1Wy1S4zfA+CALLNxoNrddrI/fQTxEXZiJyIG02m0ZEI8T4RdN0OrXvWq1W5vCTa6PEw7NvIJUkG3IsZwHFDOZvNhgMbADSnd8sZh4S+At3DHcQTAd4RJ73fzmu/AFhP6bKgtyXZgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image\"\n        title=\"image\"\n        src=\"/static/68d3dc512906a4543ee1e12c7fd5cbca/37523/image.png\"\n        srcset=\"/static/68d3dc512906a4543ee1e12c7fd5cbca/e9ff0/image.png 180w,\n/static/68d3dc512906a4543ee1e12c7fd5cbca/f21e7/image.png 360w,\n/static/68d3dc512906a4543ee1e12c7fd5cbca/37523/image.png 720w,\n/static/68d3dc512906a4543ee1e12c7fd5cbca/7b1dc/image.png 956w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<br></p>\n<p>그렇다면 Strategy와 다른 점은 무엇일까?</p>\n<p>Strategy 패턴은 공통적 성격이 있는 여러가지 기능을 특정 메소드에서 모드에 따라 다르게 실행되도록 하는 것이라면,</p>\n<p>State 패턴에서는 특정 메소드가 실행될 때 모드에 따라 다르게 실행되는 점은 동일하지만, 특정 조건에서 모드를 전환시킨다는 점에서 다르다.</p>\n<p>즉 State 패턴은 상태에 따라 다른 동작을 수행하고 특정 조건이 되었을 때 다른 state로 넘어가길 원하는 경우에 사용한다.</p>\n<p>이런 개념은 게임에서 많이 사용된다.</p>\n<p>아래 이미지는 개임에서의 상태를 FSM 다이어그램 형태로 나타낸 것이다.</p>\n<p>아래와 같이 복잡한 동작을 if, else, switch와 같은 분기 처리로 구현하려면 코드가 매우 복잡해 질 뿐더러 직관적으로 이해하기도 어려울 것이다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAACTklEQVQ4y22TSXLTUBCGdUduwBE4QXZsWLPLBtawwosEZxMwgQqJM9gVD3JkyYpGW5MnzR/1npHjInRVS6+ru3r4+2+lrmsaEe8kSdhut8Lg0Pc/qQ9imr/SGEVR4LouvV4Py3FoUlVlSVmW0p9lmVRhHyY6fCvik6apDAyDAE03mD+OCS7arGyTCiiKXVJkmZqqqmR8nucvOxSV8yKnrEoZZD5Z+K6LbxpYMx11eMcqiYiiiCBaM57McBx7P3ZRFVR1te9UWS6XbOLNzpmnuNYjjq0zmZp4szuMzhHT/im66eI8fGLx8JEsLygqCMOAdbCG8hlXJYkTbuxb2oMTzi9uOf8d01fX2LYlOxYSRSFRnLAJVELzklj7gjf9yUjV6BjfaKttut0uojm5lNv4jjOjxcn3Ga/ejHj3wZWJJEZVtV+av4jQjSdCu4cze8CfL2irXznT2jiOI+MVz/OgADLQtTFXv07wnYlMkmb5btM1kkqbtGQRrjEtH/PJQVVVsiTD1V1Go5Esqvi+L5citjcPtvy4iemNl4RhxKB/RWB0SFceg6GK89ghnXdlkfl8TqvVIoxDXN+V/JUYCgpst6nog8G04PWRzttji0UY45l97Ov3+LNrbDfA6n9Guzxms4oJwojJZCKTaJqGYRjPPBTgi5HSNJOtj4YDvJmOoU3xg7VkXxxHLNcFlhNK8BsuijGHwyH39/c7DBtSCuIKrhmmoMuU6PKc1NQkP/N8dx1lWVBXu6sRCi9PUzk8HVFVYNEs4+8J7As2+u8tH+ofwNXbFAUfe/cAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/c54f068e6a03c7164c18f9fee6d9b525/37523/image2.png\"\n        srcset=\"/static/c54f068e6a03c7164c18f9fee6d9b525/e9ff0/image2.png 180w,\n/static/c54f068e6a03c7164c18f9fee6d9b525/f21e7/image2.png 360w,\n/static/c54f068e6a03c7164c18f9fee6d9b525/37523/image2.png 720w,\n/static/c54f068e6a03c7164c18f9fee6d9b525/612f7/image2.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<h3 id=\"선풍기-예제를-통해-보는-state패턴\" style=\"position:relative;\"><a href=\"#%EC%84%A0%ED%92%8D%EA%B8%B0-%EC%98%88%EC%A0%9C%EB%A5%BC-%ED%86%B5%ED%95%B4-%EB%B3%B4%EB%8A%94-state%ED%8C%A8%ED%84%B4\" aria-label=\"선풍기 예제를 통해 보는 state패턴 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>선풍기 예제를 통해 보는 state패턴</h3>\n<p>전원버튼, 강약 조절 버튼과 회전 버튼이 있는 선풍기를 state 패턴으로 구현 해보자.\n이 선풍기가 가질 수 있는 상태는 다음과 같다.</p>\n<ul>\n<li>\n<p>Off 상태</p>\n<ul>\n<li>전원 버튼을 누르면 켜지면서 weak 상태로 변경</li>\n</ul>\n</li>\n<li>\n<p>Weak 상태</p>\n<ul>\n<li>전원 버튼을 누르면 Off 상태로 변경</li>\n<li>회전 버튼을 누르면 WeakAndRotate 상태로 변경</li>\n<li>강약 조절 버튼을 누르면 Powerful 상태로 변경</li>\n</ul>\n</li>\n<li>\n<p>WeakAndRotate 상태</p>\n<ul>\n<li>전원 버튼을 누르면 Off 상태로 변경</li>\n<li>회전 버튼을 누르면 Weak 상태로 변경</li>\n<li>강약 조절 버튼을 누르면 PowerfulAndRotate 상태로 변경</li>\n</ul>\n</li>\n<li>\n<p>Powerful 상태</p>\n<ul>\n<li>전원 버튼을 누르면 Off 상태로 변경</li>\n<li>회전 버튼을 누르면 Power 상태로 변경</li>\n<li>강약 조절 버튼을 누르면 Weak 상태로 변경</li>\n</ul>\n</li>\n<li>\n<p>PowerfulAndRotate 상태</p>\n<ul>\n<li>전원 버튼을 누르면 Off 상태로 변경</li>\n<li>회전 버튼을 누르면 Powerful 상태로 변경</li>\n<li>강약 조절 버튼을 누르면 WeakAndRotate 상태로 변경</li>\n</ul>\n</li>\n</ul>\n<p>다이어그램으로 보면 다음과 같다.\n<br><br><br>\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 42.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAADLAAAAywAEoZFrbAAACuUlEQVQoz12SWUhUcRjFz4yOW5qOK1oNZliGYqVF6p3l3mujU01mhpphkvvsM+6aVJMliS9uLZDgSw9FYZJmo453FvdtKBIrshAqSOgxSB/Sf0z11IHz8D2c8/H7+MDoOTAGDrTeymONdn5y3h0Ei47BJyAcqdlXgE4CsZarE2ttXTKNRejtJxQAAK3n4uTVzpmMmsktebVzltZZ42g9B3z5vMYvNNt5Uo0FlIbDftqIgIg4QbAoOSSt6RsotTUz5+ocyTMvEMZgbwHgA4DPGJ0t2c2zpPDWEsluniO03mZmTFPAp9W3uHjNBqpyOCy1YoSS1y34Hsxo9I9KUEZS+e18Sj0afbJu6v2p+qlN1uTMdBICgW9QOFXWH84YHd3ppolp1uTskWpGQmXaUeDD6qrC0G7dfaJqYl7ZMENYo/22TDXopkJ6wzKPUo8hvuBJ6OGigWg3hSgpT+DtH+aTUb8I1uhAdEqpNyEE7jLGYONhwfVmpbyVU8qrJ9fdCKzJ8aig6ydo9ZBAXD7g2UsIL2RPYqDPDmGoosYGUVIuhKKjiJUZ+A8J4YXFpAZHHGB3nTW/4/cRAnzdJF4nGlcg1Y7LJDrbdZl2JDIq4Qx6CQGrs/DYrFIE4a9kRT2QqoY8/41QNkwhMfcBjuTeRUaVDYX3CLD+g+DxTQpSHQeJzglx+TMERsZ77U0p9mPUz3G6pM2DUlvFaepxRlrRL0w634HwWNq9I0BhsuxMU41KKNVYOqMbiVE0vQZcy2vovt/nfgM+ox/3dN/Dw8vPHfBLrRwVZdZOfixpc5Gydte2snF6I63SktNPCI4XP72c1TSzUdy2tF3S5touuLFA0k0ODofOdfzx/9on0UGiGg5mjY4XF8zzW5daF4m8emKFqhikAfBkmpcMa3K+yjfP/SpqXSSK2snvjMHe+RuaDRJRY33b1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/a34aa81850f5b1d647f6692c789e4f58/37523/image1.png\"\n        srcset=\"/static/a34aa81850f5b1d647f6692c789e4f58/e9ff0/image1.png 180w,\n/static/a34aa81850f5b1d647f6692c789e4f58/f21e7/image1.png 360w,\n/static/a34aa81850f5b1d647f6692c789e4f58/37523/image1.png 720w,\n/static/a34aa81850f5b1d647f6692c789e4f58/302a4/image1.png 1080w,\n/static/a34aa81850f5b1d647f6692c789e4f58/07a9c/image1.png 1440w,\n/static/a34aa81850f5b1d647f6692c789e4f58/d9716/image1.png 2736w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n만약 이 선풍기의 동작을 if, else, switch 문으로 구현하려면 매우 케이스가 복잡해지고, 코드의 가독성은 떨어지게 될 것이다.\n이를 State 패턴을 통해 구현해 보자. \n<br><br>\n<ol>\n<li>\n<p>FanState interface 만들기\n<br>\nContext 클래스에서 접근점으로 사용할 Fanstate 인터페이스를 먼저 구현했다. powerButton, rotateButton, intensityButton 3개로\n전원, 회전, 강도를 조절할 수 있다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">FanState</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">powerButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">rotateButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">intensityButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>Concrete State 클래스들 만들기\n<br>\nState클래스를 implement하는 5개의 상태 클래스를 만들어준다.\n예시로 FanPowerfulState 는 아래와 같이 구현했다.\n각 state 클래스들은 버튼이 눌렸을 때 어떤 버튼이냐에 따라 freshman이 composite하고 있는 state 멤버의 값을 변경한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">FanPowerfulState</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">FanState</span> <span class=\"token punctuation\">{</span>\n\n    <span class=\"token keyword\">private</span> <span class=\"token keyword\">final</span> <span class=\"token class-name\">Freshman</span> freshman<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">public</span> <span class=\"token class-name\">FanPowerfulState</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">Freshman</span> freshman<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>freshman <span class=\"token operator\">=</span> freshman<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">powerButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"선풍기 전원 off\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        freshman<span class=\"token punctuation\">.</span><span class=\"token function\">setFanSate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FanOffState</span><span class=\"token punctuation\">(</span>freshman<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"변경된 state: FanPowerfulState -> FanOffState\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">rotateButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"선풍기 회전 On\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        freshman<span class=\"token punctuation\">.</span><span class=\"token function\">setFanSate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FanPowerfulAndRotateState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>freshman<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"변경된 state: FanPowerfulState -> FanPowerfulAndRotateState\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n\n    <span class=\"token annotation punctuation\">@Override</span>\n    <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">intensityButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"선풍기 강도 약\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        freshman<span class=\"token punctuation\">.</span><span class=\"token function\">setFanSate</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">new</span> <span class=\"token class-name\">FanWeakState</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>freshman<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n        <span class=\"token class-name\">System</span><span class=\"token punctuation\">.</span>out<span class=\"token punctuation\">.</span><span class=\"token function\">println</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"변경된 state: FanPowerfulState -> FanWeakState\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>Context 클래스 구현: Freshman\n<br>\n군대에서 신병이 선풍기를 켜고 끄고 조절하는 걸 다 하게 된다는 의미에서 Context 클래스는 Freshman으로 했다.\nFreshman 클래스는 State 클래스를 멤버로 가지며, 각 버튼이 눌렸을 떄의 동작을 State클래스들에게 위임한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Freshman</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> <span class=\"token class-name\">FanState</span> fanState <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FanOffState</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">setFanSate</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">FanState</span> state<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fanState <span class=\"token operator\">=</span> state<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">powerButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fanState<span class=\"token punctuation\">.</span><span class=\"token function\">powerButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">rotateButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fanState<span class=\"token punctuation\">.</span><span class=\"token function\">rotateButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">public</span> <span class=\"token keyword\">void</span> <span class=\"token function\">intensityButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>fanState<span class=\"token punctuation\">.</span><span class=\"token function\">intensityButton</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ol>\n<hr>\n<h4 id=\"대표적인-state-패턴-사용-사례--tcp-connection\" style=\"position:relative;\"><a href=\"#%EB%8C%80%ED%91%9C%EC%A0%81%EC%9D%B8-state-%ED%8C%A8%ED%84%B4-%EC%82%AC%EC%9A%A9-%EC%82%AC%EB%A1%80--tcp-connection\" aria-label=\"대표적인 state 패턴 사용 사례  tcp connection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>대표적인 State 패턴 사용 사례 : TCP connection</h4>\n<p>TCP 연결 프로토콜에서 이 패턴을 사용했는데, 이를 자바로 표현하면 다음과 같다.\n이는 다음 상태로 넘어갈 수 있는 방법이 activeOpen, passiveOpen, clse, acknowledge, send 5가지란 의미이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token keyword\">public</span> <span class=\"token keyword\">interface</span> <span class=\"token class-name\">TCPState</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">void</span> <span class=\"token function\">activeOpen</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TCPConnection</span> tcpConnection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">void</span> <span class=\"token function\">passiveOpen</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TCPConnection</span> tcpConnection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">void</span> <span class=\"token function\">close</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TCPConnection</span> tcpConnection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">void</span> <span class=\"token function\">acknowledge</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TCPConnection</span> tcpConnection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">void</span> <span class=\"token function\">send</span><span class=\"token punctuation\">(</span><span class=\"token class-name\">TCPConnection</span> tcpConnection<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>그리고 TCPState는 4가지 상태를 지닌다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">TCPClosed</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TCPState</span>\n<span class=\"token class-name\">TCPEstablished</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TCPState</span>\n<span class=\"token class-name\">TCPListen</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TCPState</span>\n<span class=\"token class-name\">TCPClosed</span> <span class=\"token keyword\">implements</span> <span class=\"token class-name\">TCPState</span></code></pre></div>\n<hr>\n<h4 id=\"state-패턴-사용-시의-고려사항\" style=\"position:relative;\"><a href=\"#state-%ED%8C%A8%ED%84%B4-%EC%82%AC%EC%9A%A9-%EC%8B%9C%EC%9D%98-%EA%B3%A0%EB%A0%A4%EC%82%AC%ED%95%AD\" aria-label=\"state 패턴 사용 시의 고려사항 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>State 패턴 사용 시의 고려사항</h4>\n<ul>\n<li>상태를 변수가 아닌 클래스로 표현 하는 것이 낫다면 State 패턴으로의 리팩토링을 고려할 수 있다.</li>\n<li>State 패턴은 if/else/switch를 효과적으로 제거한다. 그러나 State 패턴 사용 시 더 복잡해 지는 경우에는 사용을 지양한다.</li>\n<li>각 State는 어떤 State가 다음 상태로 올 수 있는 지에 대해 알고 있어야 한다.</li>\n<li>각 State가 똑같이 행동하는 메소드가 많다면 State 패턴이 필요하지 않을 수 있다.</li>\n<li>각 State를 싱글톤으로 관리하는 것도 고려할 수 있다.</li>\n</ul>\n<hr>\n<p>참고자료\n: <a href=\"https://johngrib.github.io/wiki/pattern/state/\">https://johngrib.github.io/wiki/pattern/state/</a></p>","frontmatter":{"date":"February 12, 2022","title":"[디자인 패턴] 3.State 패턴","categories":"디자인패턴","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/design-pattern-state/"}},"site":{"siteMetadata":{"siteUrl":"https://steadyandslow.com","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/design-pattern-strategy/","nextSlug":"/design-pattern-sigleton/","prevSlug":"/design-pattern-state/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}