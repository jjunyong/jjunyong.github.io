{
    "componentChunkName": "component---src-templates-blog-template-js",
    "path": "/jpa6/",
    "result": {"data":{"cur":{"id":"63bd45bc-1012-5983-9b4c-f4c1913af714","html":"<p>JPA에서 제공하는 다양한 연관관계 매핑하는 방법에 대해서 알아보기에 앞서,\n연관관계를 매핑할 때 고려해야 할 요소는 3가지임을 기억하자.</p>\n<ol>\n<li>다중성</li>\n</ol>\n<ul>\n<li>@ManyToOne -> 제일 많이 사용된다.</li>\n<li>@OneToMany -> 사용할 수는 있지만 ManyToOne의 양방향으로 커버 가능하다.</li>\n<li>@OneToOne -> 가끔</li>\n<li>@ManyToMany ->실무에서 안 씀</li>\n</ul>\n<ol start=\"2\">\n<li>\n<p>단방향인가 양방향인가</p>\n</li>\n<li>\n<p>연관관계의 주인이 어느 쪽인가</p>\n</li>\n</ol>\n<hr>\n<h2 id=\"1-다대일-manytoone-\" style=\"position:relative;\"><a href=\"#1-%EB%8B%A4%EB%8C%80%EC%9D%BC-manytoone-\" aria-label=\"1 다대일 manytoone  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 다대일( ManyToOne )</h2>\n<p>다대일 관계는 가장 많이 사용되는 관계이다. 사실 상 거의 이것으로만 설계할 수 있다.</p>\n<p>다대일 관계의 특징은 FK를 ‘다’ 쪽에서 관리하는 것이고, 연관관계의 주인도 ‘다’ 쪽이라는 것이다.</p>\n<h3 id=\"1-단방향\" style=\"position:relative;\"><a href=\"#1-%EB%8B%A8%EB%B0%A9%ED%96%A5\" aria-label=\"1 단방향 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 단방향</h3>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.333333333333336%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABiUlEQVQoz4VT2YrCUBTz/z9HfBDcQBAXWpX64NpRW3HfWpfWNUMidZxhnLlw8NabJjk5t7H7/Y6/1mAwgG3b6Pf76HQ68DzvLZZcMW7O5zNWqxWGwyFM04RlWZhOpxiPx9hutzpbLBbP3+isVqvBcRw9X69XkcYulwuWyyVarRZGo5HI2u22nLiui91uh9PpJNHj8Qjf92FZDWG73a7eJXkYhA9C3/OlWq1WUa/XYRqmSLj4/+12+9YSFwXpbjabqdgZjYkwssqMms2mwFSnKsHvsqIQXZMoElWG5XIZ+XwelUoFpVJJbUSLYKo7jqvigBjDq+tX5yJkVpvNRu3RXTabVfvz+Vz5rNdr7TkQFrERnjiKMNcwDL+Gst/vYRgGMpkMEokEkskkisWiIqAqY2GuQRA8idgR8YVCQUai3OWQKul0GvF4XA5zuZxe5P1ji7w6JKM4J86BpFKp580g7nA4PAijrHq9nhw1rAZs+0N3azKZ/DoUklKAJCzuoxxj/30pPP9Zf30pn+k8PP3fdzUnAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/e1fa8c7612c32aaee92ab56fd1c6c340/37523/image1.png\"\n        srcset=\"/static/e1fa8c7612c32aaee92ab56fd1c6c340/e9ff0/image1.png 180w,\n/static/e1fa8c7612c32aaee92ab56fd1c6c340/f21e7/image1.png 360w,\n/static/e1fa8c7612c32aaee92ab56fd1c6c340/37523/image1.png 720w,\n/static/e1fa8c7612c32aaee92ab56fd1c6c340/612f7/image1.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"2-양방향\" style=\"position:relative;\"><a href=\"#2-%EC%96%91%EB%B0%A9%ED%96%A5\" aria-label=\"2 양방향 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 양방향</h3>\n<p>설계는 다대일 단방향에서 끝났지만 만약에 Team 에서도 Member에 대한 조회를 하고 싶다면 OneToMany를 ‘일’ 쪽인 Team에 추가하여 매핑해주면 된다. 연관관계의 주인은 Member이므로 조회만 된다는 점에 유의하자.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.55555555555555%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVQoz4VT2W7CMBDk/3+HCKUK5RTlASFxCJpAuMV9JUACKcegWRS3IKCWLDv27OzMehMBgMvlglfDdV30+330ej1ZZ7MZXsXwLBJeBMGPBA+HQ5imicFgAMd1sVgssFwuZW232ygWi5jP54JtNptqfzwehUcRMohEnU4HhUIBrVYLq9UKtm1jNBphPB7D8zwhrlQqkrhcLguO+/1+fyM8HA4SOJ1OkUqlRAGBPN9ut7AsS8ho1fd9UWKaFnK5nCis1+uSNAiCGyFBDOQBg2u1mgCZgMpI/DjEzbcpypiI2NPpdCOkjWQyifxXHqVSCZlM5o6EFhuNBrrdriihxVDN00ehdyrc7XaiiPXT9Q9ZqYCETMp7x3Gw2WyUetpmPVmSX8ueL8DJZIJ4PI5YLAbDMJD4TKhHYlJi/j5KNptFOp2WxNVqVbmK0DsDqCYajULTNOi6LkAmoUUSMSDsCLYU1bHe3N89Suj/fD5LgTlJxN5ar9eq2GGN3v0EqrHfgZ4Rhd+P866xX4Ee7/8jvAI0W4tP60jqrAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/bb687090b89642bddc93ca50b45018f8/37523/image2.png\"\n        srcset=\"/static/bb687090b89642bddc93ca50b45018f8/e9ff0/image2.png 180w,\n/static/bb687090b89642bddc93ca50b45018f8/f21e7/image2.png 360w,\n/static/bb687090b89642bddc93ca50b45018f8/37523/image2.png 720w,\n/static/bb687090b89642bddc93ca50b45018f8/612f7/image2.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h2 id=\"2-일대다-onetomany-\" style=\"position:relative;\"><a href=\"#2-%EC%9D%BC%EB%8C%80%EB%8B%A4-onetomany-\" aria-label=\"2 일대다 onetomany  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 일대다( OneToMany )</h2>\n<p>일대다는 이제껏 봤던 ManyToOne 중심의 모델링과는 달리 실무에서 거의 쓰이지 않는다.</p>\n<ul>\n<li>외래키를 반대 테이블에서 관리하고,</li>\n<li>연관관계를 위해 추가적은 update문 실행이 필요하기 때문.</li>\n</ul>\n<h3 id=\"1-단방향-1\" style=\"position:relative;\"><a href=\"#1-%EB%8B%A8%EB%B0%A9%ED%96%A5-1\" aria-label=\"1 단방향 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 단방향</h3>\n<p>일대다 단방향에서 ‘One’ 쪽이 연관관계의 주인이 된다. 그런데 FK를 ‘다’ 쪽에서 관리하는 것은 다대일 관계와 같다. 이것은 db테이블 구조 상 변경 불가능한 것이기 때문임.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.666666666666664%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABi0lEQVQoz32TWYsqUQyE/f//RtCHuaJzHxRFQYVR3HBfWm1t932p4YscGbzeCYRj5+RUUpUYkqT7/a53dj6f1W631ev17BwOh/rNwAk5sN1up8VioUajIc/ztFwutdlsdLlcFAQL5fN5FYtFuyNOgXq9rul0arnkYU/AwWCgfr+vZrOp+XxuTvLhcNB2u7Viq9XKCgJWLpdVKBQ0mUw0Go203+8fgA652+0qmUyq0+kYKOCAvRqFstmsSqWS5Xre2M7T6fQApPpsNrMgtDKZjFGj6v+0dXrdbrd/ckKOBo7oUHcPGAoOi58nnTsgYnR3PB4fQyFwvV61Xq/l+zPTBrGDIDD/+irZd61WU6VSsYlDm7xcLmd68s17gJ9DQTMSEomE0um0gbRaLfm+b/SZJF0AkEqlFI1GFQ6H9fn5V9Vq1QbHfQgd3JQ/Pv5YF1AHjKpuH5EGUPSNRCKKxWKKx+OmPQVpCKxnhzxiF9kxgPj9bum5hz4OC/ZyPB6bbDaU3/4pxF/9nUHVLfY3NwFAMKpB5nAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/77efbaf770cc8da924e8fa65fb18a715/37523/image3.png\"\n        srcset=\"/static/77efbaf770cc8da924e8fa65fb18a715/e9ff0/image3.png 180w,\n/static/77efbaf770cc8da924e8fa65fb18a715/f21e7/image3.png 360w,\n/static/77efbaf770cc8da924e8fa65fb18a715/37523/image3.png 720w,\n/static/77efbaf770cc8da924e8fa65fb18a715/612f7/image3.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<br></p>\n<p>‘일’ 쪽인 Team 클래스에서 JoinColumn을 team_id로 설정하면 된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Team</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token annotation punctuation\">@OneToMany</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"team_id\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span> <span class=\"token comment\">//이걸 반드시 해줘야 함. 아니면 조인테이블 방식을 사용함.  </span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">List</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Member</span><span class=\"token punctuation\">></span></span> members <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ArrayList</span><span class=\"token generics\"><span class=\"token punctuation\">&lt;</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 아래와 같이 실행해주면 team, member 테이블 모두에 잘 등록된다.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token class-name\">Member</span> member <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Member</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nmember<span class=\"token punctuation\">.</span><span class=\"token function\">setUsername</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"member1\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nem<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token class-name\">Team</span> team <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Team</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nteam<span class=\"token punctuation\">.</span><span class=\"token function\">setName</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"teamA\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nteam<span class=\"token punctuation\">.</span><span class=\"token function\">getMembers</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>member<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>  <span class=\"token comment\">//update 쿼리가 한 번 더 나감</span>\nem<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span>team<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그러나 실무에서 테이블 수십개가 엮여서 돌아가는 상황에서 ManyToOne 단방향과 OneToMany 단방향을 혼용하는 것은 혼란스러울 수 있다. 그렇기 때문에 ‘다’ 쪽을 연관관계의 주인으로 가져가고</p>\n<p><strong>필요시에만 ManyToOne 양방향을 사용하는 방식</strong>으로 설계를 하는 것이 좋다.</p>\n<h3 id=\"2-양방향-1\" style=\"position:relative;\"><a href=\"#2-%EC%96%91%EB%B0%A9%ED%96%A5-1\" aria-label=\"2 양방향 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 양방향</h3>\n<p>공식스펙상에서는 없는 설계이지만,</p>\n<p>@JoinColumn의 옵션을 사용해서 설정가능하다. 그러나, 역시.. 다대일 양방향을 사용하자는 것이 결론이다.\n​\n<br></p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABdElEQVQoz3VSy46CQBDk/7+Gg/HgwYMnFQ6gUR5qggqKb9DwUNDaVCfjstGdpBOY7q6urhrt9Xrh23k8HoiiCIfDAdvtFmVZfq1jfzM09fF8PlEUBbIsQ13XuN/vOJ1OWK/XcB0Xx+NR6pi/3W6SZ53qZQggp1RVhTAM4Xs+HMfBbrdDHMcyIEkS+Q+CAMtgCc/zMBgMsFqtsN/vPxi/AV3XQxAscblcBMD3fZzP53dhnucwTROj0UhYs4fg0+lU7kzDRBRG0K7pVdjMZjPYtg3HcaWBYGTI1RgEXCwWsCwb4/FY8uyjFNQ4TVOp15iYz+eyMtdgIw/1oREEU8DN09SNBv5ZWRnAFYbDoUzkADLhHdlTAjIyDAPdbheTyUSkUSYpxzXFhoXtdlsEtyxL2GZZLquxYbPZoNPpQNd1tFot9Pt9kYBEkiT9BVTPhqzoJAGoC4eoIhpAtzms1+sJGAfynXJdrv4B+N+j/aYbg0MUULP2B4ly9ZA/UqPwAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image4\"\n        title=\"image4\"\n        src=\"/static/8637766bc83a546101992b997aaf0321/37523/image4.png\"\n        srcset=\"/static/8637766bc83a546101992b997aaf0321/e9ff0/image4.png 180w,\n/static/8637766bc83a546101992b997aaf0321/f21e7/image4.png 360w,\n/static/8637766bc83a546101992b997aaf0321/37523/image4.png 720w,\n/static/8637766bc83a546101992b997aaf0321/612f7/image4.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n    \n    <span class=\"token annotation punctuation\">@ManyToOne</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name <span class=\"token operator\">=</span> <span class=\"token string\">\"team_id\"</span><span class=\"token punctuation\">,</span> insertable<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span> updatable<span class=\"token operator\">=</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Team</span> team<span class=\"token punctuation\">;</span> \n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"3-일대일onetoone\" style=\"position:relative;\"><a href=\"#3-%EC%9D%BC%EB%8C%80%EC%9D%BConetoone\" aria-label=\"3 일대일onetoone permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 일대일(OneToOne)</h3>\n<p>일대일 관계에서 FK는 양쪽 어디에 있어도 상관없지만 ‘주 테이블’을 정해서 그쪽에 FK를 두면 된다.</p>\n<p>Member Locker의 경우 Memberrk 주테이블이 된다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAABkUlEQVQoz41Ta4/BUBS8///H8E1tCBtBP6gIImg9Wm9atKhnmM0caSMbsnuSk/vouTNn5t6qx+MB5qfY7/fodDoYj8ewLEvGT0EcFYHx4Hq9RrfbRb1eR6vVwmw2w2q1gud5Mi4WC5kvl0tZs6bdbsv6cAgFR93vd9xuNziOg+FwCNO0YBiGAG+3W4xGIyE7nU4IwzDumN0SrN/vY7PZCIEABkEgRQTUdV3AGo0GXNfD5XKRjl4lMXi4Wq0KGb9PJhP4vv8EjCZkJzOTrJQxnU5l/11Eyq7Xq4yxh2RoNpswTRO2bYuM16CvlBdZ0uv1sNvt3l5I3CH94UEm2y+Xy5IEcV0Xg8EAtMb3g9gv2kSiYrEoTdBvEilO2D79yOe/kU5/IZXSkEwmUSgU4NiOAFN6RMzbrVQqyGazUlMqlWCZlhCp4/EohrJI0zQkEglkMhnUajVhph0kez6Ng8iaz+fI5XJSw6dFVVRBMhV5wGJK4IXQTxZSLt8eZf6+EL6A8/ksnbMpJvfVX3/Kq+n/qf0B/5w5z6jaPPMAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image5\"\n        title=\"image5\"\n        src=\"/static/4007557c9861fbbef71de9607e6bf53f/37523/image5.png\"\n        srcset=\"/static/4007557c9861fbbef71de9607e6bf53f/e9ff0/image5.png 180w,\n/static/4007557c9861fbbef71de9607e6bf53f/f21e7/image5.png 360w,\n/static/4007557c9861fbbef71de9607e6bf53f/37523/image5.png 720w,\n/static/4007557c9861fbbef71de9607e6bf53f/8ae3e/image5.png 756w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>다대일 단방향과 아주 유사하다. 아래처럼 설정해주면 끝.</p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Member</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToOne</span>\n    <span class=\"token annotation punctuation\">@JoinColumn</span><span class=\"token punctuation\">(</span>name<span class=\"token operator\">=</span><span class=\"token string\">\"locker_id\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Locker</span> locker<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<br>\n<p>만약 Locker도 member를 참조하고 싶다면, (양방향이라면) 아래와 같이 하면 된다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.888888888888886%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoklEQVQoz4VTa4uCUBT0//+QfkDQh4iKih5GQRqk5ZLmI+2hPbQ3Ncucxd0PS7sH5F6545yZOVcFAF6vF97V4/HAYrHAcrmE53kIwwh/lZKT3W43ZFmG1WoF27YRBAHSNEUcJ/BcD1EUwbI+oKoqwjAU7Ha7heM4su73e+FQcubdbieHJOt2uxiNRgKkuvP5jMvlIiRJksCyLFHL5v1+X9RzTw6FQG7YlUSDwQDj8Ri+70sjgqn0+XyKfa5xHAuWxKfTSZq4ros0zaCw6/V6xf1+x2QygaZp0DQdju2IbSr+yi4USyzaa7fbaLVaUNU+Op0Oer2ekAuhYZjSjfZM0xSLefF8Pp9LHLRF5cfj8f1QyMqOtM3gqWo4HIp1NiDJdDqVlQ8xm81GYqByYg3DkO8Ph8OPZb6QhNmUy2UUi0XUajX4fiD5sBhLrpjRNBoNVCoV1Ot1cUgxCsmokKBSqYRCoSCEzWZTJs0pMgYqowoOkftqtSqEdMGcvwlz7wx8NpuJPV3XJTNa4zDW6/WvrIinmPxKcaUDudh//Sl55bj/sJ9X+zWGAJwvqwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image6\"\n        title=\"image6\"\n        src=\"/static/7a5f34d06a1b00fa8a6503e20a90dca7/37523/image6.png\"\n        srcset=\"/static/7a5f34d06a1b00fa8a6503e20a90dca7/e9ff0/image6.png 180w,\n/static/7a5f34d06a1b00fa8a6503e20a90dca7/f21e7/image6.png 360w,\n/static/7a5f34d06a1b00fa8a6503e20a90dca7/37523/image6.png 720w,\n/static/7a5f34d06a1b00fa8a6503e20a90dca7/612f7/image6.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"java\"><pre class=\"language-java\"><code class=\"language-java\"><span class=\"token annotation punctuation\">@Entity</span>\n<span class=\"token keyword\">public</span> <span class=\"token keyword\">class</span> <span class=\"token class-name\">Locker</span> <span class=\"token punctuation\">{</span> \n    <span class=\"token annotation punctuation\">@Id</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Long</span> id<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">String</span> name<span class=\"token punctuation\">;</span>\n\n    <span class=\"token annotation punctuation\">@OneToOne</span><span class=\"token punctuation\">(</span>mappedBy<span class=\"token operator\">=</span><span class=\"token string\">\"locker\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">private</span> <span class=\"token class-name\">Member</span> member<span class=\"token punctuation\">;</span>\n\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"4-다대다\" style=\"position:relative;\"><a href=\"#4-%EB%8B%A4%EB%8C%80%EB%8B%A4\" aria-label=\"4 다대다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. 다대다</h3>\n<p>실무에서 안 쓴다. 왜?</p>\n<p>일단 JPA에서 ManyToMany를 지원하는 이유는 객체에서는 테이블과 달리 별도의 클래스 없이도 Member에서 Product List를 가질 수 있고, Product에서도 Member List를 가질 수 있는 다대다 관계가 가능하기 때문이다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAAAsTAAALEwEAmpwYAAABIUlEQVQoz61RyYqDUBB8//9JYg4iHkwu8SCKHqIkuCEumM21QvXwhswwM6dpKHzdbW9VCgC2beMH0zShaRpUVSXoug5t22IcRzweD/H7vpdcXdfiM/feQ707z+cTWZbhdDoJ8jyXAYwTfBdFgSRJkKap5DnoS0M+tLOuK67XK+73u2AYBmzrR04XMcbc7XaTN2t0jlD4Z1OcMM+z8Keh7XucZy/L8rkRY+RQf5lTJD0IAux2OxyPR5zPZzmbpPu+D8uy4DgObNtGFEXIslxEuVwuwqPrujgcDsI9RVIk2TAMaeh5HuI4Fo7KsoRpmtJsv99LIQdQLG7K/1gThqEMIriE4ppUiiDR76rR1wJoEdiMxjotHsGrePqPomjVf7O/8i99u7G5wF54hgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image7\"\n        title=\"image7\"\n        src=\"/static/d55ae87c7c4eacbab0162f8b3500242f/37523/image7.png\"\n        srcset=\"/static/d55ae87c7c4eacbab0162f8b3500242f/e9ff0/image7.png 180w,\n/static/d55ae87c7c4eacbab0162f8b3500242f/f21e7/image7.png 360w,\n/static/d55ae87c7c4eacbab0162f8b3500242f/37523/image7.png 720w,\n/static/d55ae87c7c4eacbab0162f8b3500242f/612f7/image7.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>그러나 실무에서는 쓰이지 않는데 연결 테이블이 연결만 하고 끝나지 않기 때문이다.</p>\n<p>아래 Member_Product 테이블과 같이 다른 속성이 포함되기 때문이다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 24.444444444444443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA40lEQVQY03VQyYqDUBD0/3/Eu0xEEDwpggpRQRQmRoLgguK+4II1dIO3TMG7dC1UPWGeZzRNi6ZpMAwDzvMEYd93jOPI97Zt+RF/XRfz67pimiZUVYW+71l7HAcEx3Ggqip0Xcfr94WyLNn4fLp4/DwgSRJkWYaiKHi/E2RZxnwQBHBdl32e5/GdygmGYcCyLERRhDiO0XUdNzBNE6IocpCmaQjDEGmachtq6fs+bNvmoM/ngyRJsCwLBDKTgKZS5XtSnufcgoKKouBJdV1j2zbcIC19Dflur4AvuEP/u33jb/wBxEN2gUznYOwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image8\"\n        title=\"image8\"\n        src=\"/static/d263928e906db5042f27105fd5e01c01/37523/image8.png\"\n        srcset=\"/static/d263928e906db5042f27105fd5e01c01/e9ff0/image8.png 180w,\n/static/d263928e906db5042f27105fd5e01c01/f21e7/image8.png 360w,\n/static/d263928e906db5042f27105fd5e01c01/37523/image8.png 720w,\n/static/d263928e906db5042f27105fd5e01c01/612f7/image8.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<br></p>\n<p>따라서 실무에서는 다대다를 다대일 관계로 풀어내야 한다. 아래와 같이 Member_Product 연결 테이블을 Entity로 승격시키는 것이다.</p>\n<br>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.77777777777778%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA6ElEQVQY03VPyYqEUAz0/7/GphsX8KLjHDyoF1EUFaVpxeXgirjWkIBzmikoQvKq8irCOI4oyxJFUaDve0zTBALNPc9DkiSQJAnP5wvv9xtZlqFtW9Ysy4J5ntn/+XwwDAMEy7LYoKoqgiBAmqZomgZRFOHxeEAURZjmNzRNY2PXdfxGS33fh+u6MAwDuq6zXyAhDRzHQRzHnGDbNlRVBVmWoSgKTNOEYXxxGkJd19j3nReTPwxD5HnOvXCeJ4jHcbCIKoFOt22bP6IUdBKlulMSrutiko9CUBXwB24hLb+5rusvKcB/+AG6cHD+PJEUZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image9\"\n        title=\"image9\"\n        src=\"/static/9a909feb23b653a1f8b107a77de49336/37523/image9.png\"\n        srcset=\"/static/9a909feb23b653a1f8b107a77de49336/e9ff0/image9.png 180w,\n/static/9a909feb23b653a1f8b107a77de49336/f21e7/image9.png 360w,\n/static/9a909feb23b653a1f8b107a77de49336/37523/image9.png 720w,\n/static/9a909feb23b653a1f8b107a77de49336/612f7/image9.png 773w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<hr>\n<p>참고자료</p>\n<ul>\n<li><a href=\"https://www.inflearn.com/course/ORM-JPA-Basic\">https://www.inflearn.com/course/ORM-JPA-Basic</a></li>\n</ul>","excerpt":"JPA에서 제공하는 다양한 연관관계 매핑하는 방법에 대해서 알아보기에 앞서,\n연관관계를 매핑할 때 고려해야 할 요소는 3가지임을 기억하자. 다중성 @ManyToOne -> 제일 많이 사용된다. @OneToMany -> 사용할 수는 있지만 ManyToOne의 양방향으로 커버 가능하다. @OneToOne -> 가끔 @ManyToMany ->실무에서 안 씀 단방향인가 양방향인가 연관관계의 주인이 어느 쪽인가 1. 다대일( ManyToOne ) 다대일 관계는 가장 많이 사용되는 관계이다. 사실 상 거의 이것으로만 설계할 수 있다. 다대일 관계의 특징은 FK를 ‘다’ 쪽에서 관리하는 것이고, 연관관계의 주인도 ‘다’ 쪽이라는 것이다. 1. 단방향  2. 양방향 설계는 다대일 단방향에서 끝났지만 만약에 Team 에서도 Member에 대한 조회를 하고 싶다면 OneToMany를 ‘일’ 쪽인 Team에 추가하여 매핑해주면 된다. 연관관계의 주인은 Member이므로 조회만 된다는 점에 유의하자. …","frontmatter":{"date":"March 16, 2022","title":"[JPA] 6. 다양한 연관관계 매핑","categories":"Spring","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/jpa6/"}},"next":{"id":"82e6428f-f8dc-5910-93fa-96947ef11565","html":"<p>asdfasdf\nasdfads\nasdfasdfasdfasdf</p>","frontmatter":{"date":"March 15, 2022","title":"[JPA] 8. JPA프록시와 지연로딩(Lazy Loading)과 즉시로딩(Eager Loading)","categories":"Spring","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/jpa8/"}},"prev":{"id":"fbbc48e9-077f-59a4-9a56-994f882876d3","html":"<p>앞서 JPA에서 엔티티 간에 다양한 연관관계를 매핑하는 방법에 대해서 알아보았다.</p>\n<p>이제는 조금 더 나아가 JPA에서 상속관계를 어떻게 매핑하는 지에 대해서 알아보고자 한다.</p>\n<p>그런데 생각해보면 관계형 데이터베이스에는 ‘상속’이라는 개념이 객체지향과는 달리 존재하지 않는다.</p>\n<p>그렇지만 이와 유사한 슈퍼타입, 서브타입 모델링 기법이 있는데, JPA에서는 이를 사용해서 객체의 상속관계를 DB의 슈퍼타입/서브타입 관계로 매핑시켜준다.</p>","frontmatter":{"date":"March 20, 2022","title":"[JPA] 7. 상속관계 매핑 전략 (슈퍼타입, 서브타입)","categories":"Spring","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/jpa7/"}},"site":{"siteMetadata":{"siteUrl":"https://steadyandslow.com","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/jpa6/","nextSlug":"/jpa8/","prevSlug":"/jpa7/"}},
    "staticQueryHashes": ["1073350324","1956554647","2938748437"]}