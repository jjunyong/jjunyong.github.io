{"componentChunkName":"component---src-templates-blog-template-js","path":"/error-redis-fail/","result":{"data":{"cur":{"id":"ab4f7141-fb9a-569f-9981-99fdf7a64004","html":"<p>VMì´ ê°‘ìê¸° ì¬ê¸°ë™ ë˜ì–´ k8s í´ëŸ¬ìŠ¤í„°ë¥¼ ë³µêµ¬í•˜ì˜€ìœ¼ë‚˜, redisê°€ ì¬ê¸°ë™ë˜ì§€ ì•Šì•„ì„œ <code class=\"language-text\">journalctl -xe</code> ëª…ë ¹ìœ¼ë¡œ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë‹ˆ</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">type=1400 audit(1700663555.037:17): avc:  denied ....</code></pre></div>\n<p>ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ì¶œë ¥ë˜ì—ˆë‹¤. ì´ëŠ” SELinuxì˜ audit ì •ì±…ê³¼ ê´€ë ¨ëœ ì´ìŠˆì´ê³ , SELinux ì •ì±…ì„ offí–ˆë‹¤ê°€ redis ì¬ê¸°ë™ í›„ onì„ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²°í•˜ì˜€ë‹¤.</p>\n<ul>\n<li>ì •ì±… off</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo setenforce 0</code></pre></div>\n<ul>\n<li>ì •ì±… on</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">sudo setenforce 1</code></pre></div>","excerpt":"VMì´ ê°‘ìê¸° ì¬ê¸°ë™ ë˜ì–´ k8s í´ëŸ¬ìŠ¤í„°ë¥¼ ë³µêµ¬í•˜ì˜€ìœ¼ë‚˜, redisê°€ ì¬ê¸°ë™ë˜ì§€ ì•Šì•„ì„œ  ëª…ë ¹ìœ¼ë¡œ ë¡œê·¸ë¥¼ í™•ì¸í•´ë³´ë‹ˆ ì™€ ê°™ì€ ì˜¤ë¥˜ê°€ ì¶œë ¥ë˜ì—ˆë‹¤. ì´ëŠ” SELinuxì˜ audit ì •ì±…ê³¼ ê´€ë ¨ëœ ì´ìŠˆì´ê³ , SELinux ì •ì±…ì„ offí–ˆë‹¤ê°€ redis ì¬ê¸°ë™ í›„ onì„ í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ í•´ê²°í•˜ì˜€ë‹¤. ì •ì±… off ì •ì±… on","frontmatter":{"date":"November 22, 2023","title":"[Error] Redis ê¸°ë™ ì‹¤íŒ¨ : SELinux","categories":"Error","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/error-redis-fail/"}},"next":{"id":"bcc63adf-b4d9-519f-aae1-8b10b94a775a","html":"<h2 id=\"ì œì–´ë¬¸\" style=\"position:relative;\"><a href=\"#%EC%A0%9C%EC%96%B4%EB%AC%B8\" aria-label=\"ì œì–´ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì œì–´ë¬¸</h2>\n<h3 id=\"ifë¬¸-expression-ê³¼-statement\" style=\"position:relative;\"><a href=\"#if%EB%AC%B8-expression-%EA%B3%BC-statement\" aria-label=\"ifë¬¸ expression ê³¼ statement permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Ifë¬¸, Expression ê³¼ Statement</h3>\n<ul>\n<li>ê¸°ë³¸ì ì¸ if-elseì˜ ë¬¸ë²•ì€ ë™ì¼í•˜ë‹¤.</li>\n<li>Javaì—ì„œ if-elseëŠ” Statementì´ì§€ë§Œ Kotlinì—ì„œëŠ” expressionì´ë‹¤. ì¦‰ ì‚¼í•­ì—°ì‚°ì ì²˜ëŸ¼ ê°’ì„ ë¦¬í„´í•  ìˆ˜ ìˆë‹¤.\n<ul>\n<li>ë”°ë¼ì„œ ì‚¼í•­ì—°ì‚°ìê°€ ì—†ìŒ</li>\n</ul>\n</li>\n<li>in ì—°ì‚°ìë¥¼ í™œìš© ê°€ëŠ¥\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">example</span><span class=\"token punctuation\">(</span>score<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> score <span class=\"token keyword\">in</span> <span class=\"token number\">0</span><span class=\"token operator\">..</span><span class=\"token number\">100</span> <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">..</span><span class=\"token punctuation\">.</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"switch-ì™€-when\" style=\"position:relative;\"><a href=\"#switch-%EC%99%80-when\" aria-label=\"switch ì™€ when permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>switch ì™€ when</h3>\n<ul>\n<li>switch case ë¬¸ ëŒ€ì‹ ì— whenìœ¼ë¡œ kotlinì—ì„œëŠ” ëŒ€ì²´ë˜ì—ˆìœ¼ë©° ì¡°ê±´ë¶€ë¥¼ ë‹¤ì–‘í•˜ê²Œ ì‚¬ìš©í•  ìˆ˜ ìˆë‹¤.\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 44.99999999999999%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAABoUlEQVQoz2WRW27iMBiFswxeCkhD4iS+3xInQKcK4hWEphtEYgdIEB7bjZ3KZoYOqqVPvh0dn/93FjRF6xycb9C2LZzzsNal2ViL6XSK0+mEOG7jFZ6TpPNJH5LOOQdrbTrLpJRYrn6jaTu0oQelDFVVoa5rcMYwnb48DK/XK7iQeH0bkta3XdL900cyrRT61mPdd2iMhBIc2lgIIaCMxa9F8TAcbzcIxvC66rBe9nCKQ/7VS6XAOUfGaI3WCDRaYOk4rJJoQgdtDLR1yEn5nXAcURULvHmOxmr0XiOEDv1qDef93TDGZMpAagtpVIpdlmWaWSz55bvkcRxRFDmClbBhBR3WUNpBaQ7KKOqqRkZjr4SC0gZKSzBGQemd+OJsNns2zHMEI2B8gAs9jGugjATn7N5Dylgqt7cCSmsoo1KySOzjfD5/NiQEayfQOQUV2/KfPobI4g+VhIDkC+R5/gQhBJPJBMfjMRleLpdkSOsKVUnSfVEUibiOZH/e37Hb7bDf739wOByw3W5xPp+T4cfHJ4ZhwLDZ3BkGbDabB3H/BSXNS9uGFC5LAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image1\"\n        title=\"image1\"\n        src=\"/static/c514709058c724e35d5d0ec30a77cabb/37523/image1.png\"\n        srcset=\"/static/c514709058c724e35d5d0ec30a77cabb/e9ff0/image1.png 180w,\n/static/c514709058c724e35d5d0ec30a77cabb/f21e7/image1.png 360w,\n/static/c514709058c724e35d5d0ec30a77cabb/37523/image1.png 720w,\n/static/c514709058c724e35d5d0ec30a77cabb/302a4/image1.png 1080w,\n/static/c514709058c724e35d5d0ec30a77cabb/07a9c/image1.png 1440w,\n/static/c514709058c724e35d5d0ec30a77cabb/8bb81/image1.png 1602w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span>\n<ul>\n<li>is ë¬¸, ..ë¬¸ ë“± ì‚¬ìš©</li>\n<li><code class=\"language-text\">-1,0,1 -> println(\"-1 ë˜ëŠ” 0ë˜ëŠ” 1ì…ë‹ˆë‹¤\")</code>ì™€ ê°™ì´ë„ ì“¸ ìˆ˜ ìˆìŒ</li>\n<li>whenë’¤ì— ì†Œê´„í˜¸ì—†ì´ ë°”ë¡œ ì¡°ê±´ë¶€ì™€ ê²°ê³¼ë¡œë§Œ whenì ˆì„ êµ¬ì„±í•  ìˆ˜ë„ ìˆë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">when{\n  number == 0 -> println(\"test\")\n  else -> println(\"else\")\n  )\n}</code></pre></div>\n</li>\n</ul>\n</li>\n<li>Enum í´ë˜ìŠ¤, Sealed í´ë˜ìŠ¤ì™€ í•¨ê»˜ ì‚¬ìš©í•  ê²½ìš° ë”ìš± ì§„ê°€ê°€ ë°œíœ˜ëœë‹¤.</li>\n</ul>\n<h2 id=\"ë°˜ë³µë¬¸\" style=\"position:relative;\"><a href=\"#%EB%B0%98%EB%B3%B5%EB%AC%B8\" aria-label=\"ë°˜ë³µë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë°˜ë³µë¬¸</h2>\n<h3 id=\"for-each-ë¬¸--í–¥ìƒëœ-forë¬¸-\" style=\"position:relative;\"><a href=\"#for-each-%EB%AC%B8--%ED%96%A5%EC%83%81%EB%90%9C-for%EB%AC%B8-\" aria-label=\"for each ë¬¸  í–¥ìƒëœ forë¬¸  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>for-each ë¬¸ ( í–¥ìƒëœ forë¬¸ )</h3>\n<ul>\n<li>â€™:â€™ ëŒ€ì‹  â€˜inâ€™ì„ ì“°ëŠ” ì •ë„ë§Œ ë‹¤ë¥´ë‹¤.</li>\n</ul>\n<h3 id=\"ì „í†µì ì¸-forë¬¸\" style=\"position:relative;\"><a href=\"#%EC%A0%84%ED%86%B5%EC%A0%81%EC%9D%B8-for%EB%AC%B8\" aria-label=\"ì „í†µì ì¸ forë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì „í†µì ì¸ forë¬¸</h3>\n<ul>\n<li>inì„ ì‚¬ìš©í•œì—¬ ë²”ìœ„ë¥¼ í‘œí˜„í•œë‹¤.</li>\n<li>progression, rangeë¥¼ í™œìš©í•œ ë“±ì°¨ìˆ˜ì—´ì„ ì“´ë‹¤.\n<ul>\n<li>downTo, step ë“±ì˜ í‘œí˜„</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"ì˜ˆì™¸\" style=\"position:relative;\"><a href=\"#%EC%98%88%EC%99%B8\" aria-label=\"ì˜ˆì™¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì˜ˆì™¸</h2>\n<h3 id=\"try-catch-finally-êµ¬ë¬¸\" style=\"position:relative;\"><a href=\"#try-catch-finally-%EA%B5%AC%EB%AC%B8\" aria-label=\"try catch finally êµ¬ë¬¸ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>try catch finally êµ¬ë¬¸</h3>\n<ul>\n<li>ìë°”ì™€ ê¸°ë³¸ì ìœ¼ë¡œ ë™ì¼</li>\n</ul>\n<h3 id=\"checked-unchecked-exceptionìš¸-êµ¬ë¶„í•˜ì§€-ì•ŠëŠ”ë‹¤\" style=\"position:relative;\"><a href=\"#checked-unchecked-exception%EC%9A%B8-%EA%B5%AC%EB%B6%84%ED%95%98%EC%A7%80-%EC%95%8A%EB%8A%94%EB%8B%A4\" aria-label=\"checked unchecked exceptionìš¸ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ”ë‹¤ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Checked, Unchecked exceptionìš¸ êµ¬ë¶„í•˜ì§€ ì•ŠëŠ”ë‹¤.</h3>\n<ul>\n<li>ì¦‰, ëª¨ë‘ê°€ unchecked ì´ë¯€ë¡œ throwë¥¼ ì“¸ ì¼ì´ ì—†ë‹¤.</li>\n</ul>\n<h3 id=\"try-with-resources\" style=\"position:relative;\"><a href=\"#try-with-resources\" aria-label=\"try with resources permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>try with resources</h3>\n<ul>\n<li>try with resources ì‚¬ë¼ì§</li>\n<li>useë¬¸ì„ ëŒ€ì‹  ì‚¬ìš©í•œë‹¤.</li>\n</ul>\n<h2 id=\"í•¨ìˆ˜\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EC%88%98\" aria-label=\"í•¨ìˆ˜ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•¨ìˆ˜</h2>\n<h3 id=\"í•¨ìˆ˜-ì„ ì–¸-ë¬¸ë²•\" style=\"position:relative;\"><a href=\"#%ED%95%A8%EC%88%98-%EC%84%A0%EC%96%B8-%EB%AC%B8%EB%B2%95\" aria-label=\"í•¨ìˆ˜ ì„ ì–¸ ë¬¸ë²• permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>í•¨ìˆ˜ ì„ ì–¸ ë¬¸ë²•</h3>\n<ul>\n<li>publicì€ ìƒëµ ê°€ëŠ¥ ë””í´íŠ¸ê°€ publicì´ë‹¤.</li>\n<li>Unitë„ ìƒëµ ê°€ëŠ¥</li>\n<li>if elseê°€ expressionì¸ ê²ƒê³¼ í•¨ìˆ˜ê°€ í•˜ë‚˜ì˜ ê²°ê³¼ ê°’ì´ë¼ë©´ ì•„ë˜ì™€ ê°™ì´ ê´„í˜¸ ëŒ€ì‹  =ë¥¼ í•¨ìˆ˜ì— ì“¸ ìˆ˜ ìˆë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span><span class=\"token operator\">:</span> Int <span class=\"token operator\">=</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> a <span class=\"token operator\">></span> b <span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n    a\n  <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n    b\n  <span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>í•œ ì¤„ë¡œ ë³€ê²½ê°€ëŠ¥, ìë™ type ì¶”ë¡ ê³¼ blockì´ ì—†ìŒì„ í™œìš©í•˜ë©´ ì•„ë˜ì™€ ê°™ì´ ë” ê°„ê²°í•´ì§ˆ ìˆ˜ ìˆë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token keyword\">fun</span> <span class=\"token function\">max</span><span class=\"token punctuation\">(</span>a<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">,</span> b<span class=\"token operator\">:</span> Int<span class=\"token punctuation\">)</span> <span class=\"token operator\">=</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span> a <span class=\"token operator\">></span> b <span class=\"token punctuation\">)</span> a <span class=\"token keyword\">else</span> b</code></pre></div>\n</li>\n</ul>\n<h3 id=\"ë””í´íŠ¸-íŒŒë¼ë¯¸í„°\" style=\"position:relative;\"><a href=\"#%EB%94%94%ED%8F%B4%ED%8A%B8-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0\" aria-label=\"ë””í´íŠ¸ íŒŒë¼ë¯¸í„° permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ë””í´íŠ¸ íŒŒë¼ë¯¸í„°</h3>\n<h3 id=\"named-argument\" style=\"position:relative;\"><a href=\"#named-argument\" aria-label=\"named argument permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>named argument</h3>\n<ul>\n<li>ë¹Œë”ë¥¼ ì§ì ‘ ë§Œë“¤ì§€ ì•Šê³ ë„ ë¹Œë”ì˜ ì¥ì ì„ ì§€ë‹ˆê²Œ ëœë‹¤.</li>\n</ul>\n<h3 id=\"ê°™ì€-íƒ€ì…ì˜-ì—¬ëŸ¬-íŒŒë¼ë¯¸í„°-ë°›ê¸°--ê°€ë³€ì¸ì-\" style=\"position:relative;\"><a href=\"#%EA%B0%99%EC%9D%80-%ED%83%80%EC%9E%85%EC%9D%98-%EC%97%AC%EB%9F%AC-%ED%8C%8C%EB%9D%BC%EB%AF%B8%ED%84%B0-%EB%B0%9B%EA%B8%B0--%EA%B0%80%EB%B3%80%EC%9D%B8%EC%9E%90-\" aria-label=\"ê°™ì€ íƒ€ì…ì˜ ì—¬ëŸ¬ íŒŒë¼ë¯¸í„° ë°›ê¸°  ê°€ë³€ì¸ì  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ê°™ì€ íƒ€ì…ì˜ ì—¬ëŸ¬ íŒŒë¼ë¯¸í„° ë°›ê¸° ( ê°€ë³€ì¸ì )</h3>\n<ul>\n<li>vararg í‚¤ì›Œë“œ ì‚¬ìš©í•´ì•¼ í•˜ê³  ê°€ë³€ì¸ì í•¨ìˆ˜ë¥¼ ë°°ì—´ê³¼ í•¨ê»˜ í˜¸ì¶œí•  ë•ŒëŠ” â€™*â€™  ( ìŠ¤í”„ë ˆë“œ ì—°ì‚°ì )ë¥¼ ë¶™ì—¬ì¤˜ì•¼ í•œë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"kotlin\"><pre class=\"language-kotlin\"><code class=\"language-kotlin\"><span class=\"token function\">printAll</span><span class=\"token punctuation\">(</span><span class=\"token operator\">*</span>arrays<span class=\"token punctuation\">)</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"ì°¸ê³ ìë£Œ\" style=\"position:relative;\"><a href=\"#%EC%B0%B8%EA%B3%A0%EC%9E%90%EB%A3%8C\" aria-label=\"ì°¸ê³ ìë£Œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì°¸ê³ ìë£Œ</h3>\n<ul>\n<li><a href=\"https://www.inflearn.com/course/lecture?courseSlug=java-to-kotlin\">https://www.inflearn.com/course/lecture?courseSlug=java-to-kotlin</a></li>\n<li><a href=\"https://github.com/lannstark/java-to-kotlin-starter-guide\">https://github.com/lannstark/java-to-kotlin-starter-guide</a></li>\n</ul>","frontmatter":{"date":"November 18, 2023","title":"[Kotlin] ì½”ë“œ ì œì–´í•˜ëŠ” ë°©ë²•","categories":"Java/Kotlin","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/kotlin2/"}},"prev":{"id":"24dcb914-b2ff-506d-813e-ffdeeee12a65","html":"<h2 id=\"1-kube-bench-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#1-kube-bench-%EB%AC%B8%EC%A0%9C\" aria-label=\"1 kube bench ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Kube-bench ë¬¸ì œ</h2>\n<p>ë¬¸ì œì—ì„œ kube-benchë¥¼ ì‹¤í–‰ í›„ ë„ì¶œë˜ëŠ” ì•„ë˜ ì·¨ì•½ì ì— ëŒ€í•´ì„œ ì¡°ì¹˜í•˜ë¼ëŠ” ë¬¸ì œ</p>\n<ul>\n<li>kube api server ì·¨ì•½ì \n<ul>\n<li>Ensure â€”authorization-mode argument is not set to AlwaysAllow</li>\n<li>Ensure â€”authorization-mode includes Node, RBAC</li>\n<li>Ensure â€”insecure-bind-address argument is not set</li>\n</ul>\n</li>\n<li>kubelet ì·¨ì•½ì \n<ul>\n<li>Ensure anonymous-auth argument is set to false</li>\n<li>Ensure â€”authorization-mode argument is not set to AlwaysAllow</li>\n</ul>\n</li>\n<li>etcd ì·¨ì•½ì \n<ul>\n<li>Ensure â€”client-cert-auth argument is set to true</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ì •ë‹µ\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5\" aria-label=\"ì •ë‹µ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>kube api server ì¡°ì¹˜\n<ul>\n<li><code class=\"language-text\">--authorization-mode=Node,RBAC</code> ë¡œ ì„¤ì •</li>\n<li><code class=\"language-text\">--insecure-bind-address=0.0.0.0</code> ë¡œ ë˜ì–´ ìˆëŠ” í–‰ ì‚­ì œ</li>\n</ul>\n</li>\n<li>kubelet ì¡°ì¹˜\n<ul>\n<li>/var/lib/kubelet/config.yaml íŒŒì¼ì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •\n<ul>\n<li>anonymous-auth falseë¡œ ì„¤ì •\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">authentication:\n  anonymous:\n    enabled: false</code></pre></div>\n</li>\n<li>authorization-mode Webhookìœ¼ë¡œ ì„¤ì •\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  authorization:\n    mode: Webhook</code></pre></div>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">systemctl daemon-reload</code>, <code class=\"language-text\">systemctl restart</code> í•´ì£¼ê¸°</li>\n</ul>\n</li>\n<li>etcd ì¡°ì¹˜\n<ul>\n<li>/etc/kubernetes/manifests/etcd.yamlì—ì„œ ì•„ë˜ì™€ ê°™ì´ ì„¤ì •\n<ul>\n<li><code class=\"language-text\">--client-cert-auth=true</code></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"2-serviceaccount-ë¬¸ì œ\" style=\"position:relative;\"><a href=\"#2-serviceaccount-%EB%AC%B8%EC%A0%9C\" aria-label=\"2 serviceaccount ë¬¸ì œ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. ServiceAccount ë¬¸ì œ</h2>\n<p>Your organizationâ€™s security policies include:</p>\n<ul>\n<li>serviceaccount does not automatically mount API credentials</li>\n<li>serviceaccount name must end with â€œ-saâ€</li>\n</ul>\n<p>Listing file <code class=\"language-text\">/cs/sa/pod1.yaml</code>. The pod specified in yaml cannot be scheduled due to an error specified in serviceaccount.</p>\n<p>Please complete the project:</p>\n<ul>\n<li>\n<ol>\n<li>Create new serviceaccount named <code class=\"language-text\">backend-sa</code> in the existing namespace <code class=\"language-text\">qa</code> to ensure that this serviceaccount does not automatically mount API credentials.</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>Use <code class=\"language-text\">/cs/sa/pod1.yaml</code> to create a pod</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>Finally, clean up any unused serviceaccounts in namespace <code class=\"language-text\">qa</code></li>\n</ol>\n</li>\n</ul>\n<h3 id=\"ì •ë‹µ-1\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-1\" aria-label=\"ì •ë‹µ 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>\n<ol>\n<li><code class=\"language-text\">k create sa backend-sa -n qa --dry-run=client -o yaml > 2.yaml</code></li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>2.yamlì— ì•„ë˜ì™€ ê°™ì´ automountServiceAccountTokenë§Œ ì¶”ê°€í•´ì£¼ê³  apply</li>\n</ol>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: backend-sa\n  namespace: qa\nautomountServiceAccountToken: false </code></pre></div>\n</li>\n<li>\n<ol start=\"3\">\n<li>/cs/sa/pod1.yamlì„ vië¡œ ì—´ê³  serviceAccountNameë§Œ backend-saë¡œ ìˆ˜ì • í›„ apply</li>\n</ol>\n</li>\n<li>\n<ol start=\"4\">\n<li>k get pod -o yaml -n qa | grep â€œserviceAccount:â€ ë¥¼ í•´ì„œ ì¡°íšŒë˜ì§€ ì•ŠëŠ” serviceaccount ì¸ test01ì„ ì‚­ì œí•œë‹¤.</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"3-network-policy\" style=\"position:relative;\"><a href=\"#3-network-policy\" aria-label=\"3 network policy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Network Policy</h2>\n<p>A default-deny network policy avoids accidentally exposing a pod in a namespace that does not define any other Networkpolicy.\n<br>\nCreate a new default DenyPolicy named <code class=\"language-text\">denypolicy</code> in namespace <code class=\"language-text\">testing</code> for all traffic of type ingress+Egress.</p>\n<ul>\n<li>This new NP must deny all Ingress+Egress traffic in namespace <code class=\"language-text\">testing</code>.</li>\n<li>The newly created default Deny network policy application is matched to all pods running in namespace testing.</li>\n</ul>\n<h3 id=\"ì •ë‹µ-2\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-2\" aria-label=\"ì •ë‹µ 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>ê¸°ë³¸ NP ë§Œë“¤ê¸°\n<ul>\n<li>ê³µì‹ docì—ì„œ default denyì— ëŒ€í•œ í…œí”Œë¦¿ ê°€ì ¸ì™€ì„œ nameê³¼ namespace ë§Œ ì§€ì •í•´ì£¼ë©´ë¨\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">  apiVersion: networking.k8s.io/v1\n  kind: NetworkPolicy\n  metadata:\n    name: denypolicy\n    namespace: testing\n  spec:\n    podSelector: {}\n    policyTypes:\n    - Ingress\n    - Egress</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"4-rbac\" style=\"position:relative;\"><a href=\"#4-rbac\" aria-label=\"4 rbac permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. RBAC</h2>\n<p>The role bound to the podâ€™s serviceaccount grants over-loose permission. Complete the following item to reduce the permission set.</p>\n<p>An existing Pod named <code class=\"language-text\">web-pod</code> is already running in namespace <code class=\"language-text\">db</code>.\nEdit the existing Role bound to the serviceaccount <code class=\"language-text\">service-account-web</code> to allow only get operations on resource type of services.\nCreate a role <code class=\"language-text\">role-2</code> in namespace <code class=\"language-text\">db</code> and only allow new role to perform delete operations on resource type of namespaces.\nCreate a new RoleBinding named <code class=\"language-text\">role-2-binding</code>. Bind the newly created Role to the Podâ€™s serviceaccount</p>\n<p>Note: Do not delete existing rolebinding</p>\n<h3 id=\"ì •ë‹µ-3\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-3\" aria-label=\"ì •ë‹µ 3 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li><code class=\"language-text\">service-account-web</code>ê³¼ boundë˜ì–´ ìˆëŠ” <code class=\"language-text\">role-1</code>ì„ services ë§Œ getí•  ìˆ˜ ìˆë„ë¡ ìˆ˜ì •í•œë‹¤. ( k edit role )</li>\n<li><code class=\"language-text\">db</code> namespaceì— <code class=\"language-text\">role-2</code>ë¥¼ ìƒì„±í•˜ê³  namepsacesë§Œ deleteí•  ìˆ˜ ìˆë„ë¡ ìƒì„±í•œë‹¤.</li>\n<li><code class=\"language-text\">role-2-binding</code>ì´ë¼ëŠ” ìƒˆë¡œìš´ rolebindingì„ ìƒì„±í•˜ì—¬ <code class=\"language-text\">role-2</code>ì™€ <code class=\"language-text\">service-account-web</code>ì„ ì—°ê²°ì‹œí‚¨ë‹¤.\n<ul>\n<li><code class=\"language-text\">k create rolebinding role-2-binding --role=role-2 --serviceaccount=service-account-web -n d</code></li>\n</ul>\n</li>\n</ul>\n<h2 id=\"5-k8s-audit\" style=\"position:relative;\"><a href=\"#5-k8s-audit\" aria-label=\"5 k8s audit permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. K8S audit</h2>\n<p>Enable audit logging in cluster. To do this, enable the log backend and ensure that:</p>\n<ul>\n<li>The logs are stored in /var/log/kubernetes/audit-logs.txt</li>\n<li>Logs file can be retained for 10days</li>\n<li>Retain up to 2 old audit log files</li>\n</ul>\n<p>/etc/kubernetes/logpolicy/sampolepolicy.yaml provides the basic strategy. It specifies only what is not recorded.\nNote: The base policy is located on the master node of the cluster.</p>\n<p>Edit and expand basic strategies to record:</p>\n<ul>\n<li>RequestResponse level, persistentvolumes change</li>\n<li>configmaps change to request body in namespace <code class=\"language-text\">front-apps</code></li>\n<li>Changes to configmap and secret in all namespaces at the metadata level</li>\n</ul>\n<p>In addition, add a comprehensive rule to record all other requests at the Metadata level.\nNote: Dontâ€™ forget to apply the modified policy.</p>\n<h3 id=\"ì •ë‹µ-4\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-4\" aria-label=\"ì •ë‹µ 4 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>\n<p>kube-apiserverì˜ yamlíŒŒì¼ì„ ë°±ì—…í•´ë‘ê³  audit enable ë° ì„¤ì •ì„ ë¬¸ì œëŒ€ë¡œ ì§„í–‰í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>audit<span class=\"token punctuation\">-</span>policy<span class=\"token punctuation\">-</span>file=/etc/kubernetes/logpolicy/samplepolicy.yaml\n  <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>audit<span class=\"token punctuation\">-</span>log<span class=\"token punctuation\">-</span>path=/var/log/kubernetes/audit<span class=\"token punctuation\">-</span>logs.txt\n  <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>audit<span class=\"token punctuation\">-</span>log<span class=\"token punctuation\">-</span>maxage=10\n  <span class=\"token punctuation\">-</span> <span class=\"token punctuation\">-</span><span class=\"token punctuation\">-</span>audit<span class=\"token punctuation\">-</span>log<span class=\"token punctuation\">-</span>maxbackup=2</code></pre></div>\n</li>\n<li>\n<p>kube-apiserver yamlíŒŒì¼ì—ì„œ volumesê³¼ volumeMountë¥¼ ì„¤ì •í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /etc/kubernetes/logpolicy/samplepolicy.yaml\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> audit\n    <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /var/log/kubernetes/\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> audit<span class=\"token punctuation\">-</span>log\n    <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> audit\n  <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /etc/kubernetes/logpolicy/samplepolicy.yaml\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> File\n\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> audit<span class=\"token punctuation\">-</span>log\n  <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /var/log/kubernetes/\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> DirectoryOrCreate</code></pre></div>\n</li>\n<li>\n<p>ì´ì™€ ê°™ì´ ì„¤ì • í›„ kube-apiserverê°€ ì•ˆ ëœ° ìˆ˜ ìˆìŒ <code class=\"language-text\">systemctl daemon-reload</code>, <code class=\"language-text\">sytemctl restart kubelet</code>ë¥¼ í•´ì£¼ì–´ì•¼ í•¨</p>\n</li>\n<li>\n<p>ë§ˆì§€ë§‰ìœ¼ë¡œ <code class=\"language-text\">tail /var/log/kubernetes/audit-logs.txt</code> ëª…ë ¹ìœ¼ë¡œ ì •ìƒì  auditingë˜ëŠ” ì§€ ê²€ì¦í•œë‹¤.</p>\n</li>\n<li>\n<p>basic strategyë¡œ ì£¼ì–´ì§„ yaml íŒŒì¼ì— 3ê°€ì§€ record ìš”êµ¬ì¡°ê±´ì— í•´ë‹¹ í•˜ëŠ” ì •ì±…ë“¤ì„ docì„ ì°¸ê³ í•˜ì—¬ ì¶”ê°€í•œë‹¤.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">level</span><span class=\"token punctuation\">:</span> RequestResponse\n      <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">group</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"persistentvolumes\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">level</span><span class=\"token punctuation\">:</span> Metadata\n      <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">group</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span> <span class=\"token comment\"># core API group</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"secrets\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"configmaps\"</span><span class=\"token punctuation\">]</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">level</span><span class=\"token punctuation\">:</span> Request\n      <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">group</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"\"</span> <span class=\"token comment\"># core API group</span>\n        <span class=\"token key atrule\">resources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"configmaps\"</span><span class=\"token punctuation\">]</span>\n      <span class=\"token key atrule\">namespaces</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"kube-system\"</span><span class=\"token punctuation\">]</span>\n</code></pre></div>\n<ul>\n<li>ë‹¨, ë§ˆì§€ë§‰ì— catch-all ruleê¹Œì§€ ì¶”ê°€í•´ì£¼ì–´ì•¼ ì •ë‹µì´ë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># A catch-all rule to log all other requests at the Metadata level.</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">level</span><span class=\"token punctuation\">:</span> Metadata\n  <span class=\"token comment\"># Long-running requests like watches that fall under this rule will not</span>\n  <span class=\"token comment\"># generate an audit event in RequestReceived.</span>\n  <span class=\"token key atrule\">omitStages</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token string\">\"RequestReceived\"</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"6-create-a-secret\" style=\"position:relative;\"><a href=\"#6-create-a-secret\" aria-label=\"6 create a secret permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. Create a Secret</h2>\n<p>Get the contents of an existing secret named <code class=\"language-text\">db1-test</code> in namespace <code class=\"language-text\">istio-system</code>\nStore the username field in the name <code class=\"language-text\">/cs/sec/user.txt</code> file and store the password in <code class=\"language-text\">/cs/sec/pass.txt</code> file.</p>\n<p>Note : Do not use or modify created files in the following steps, you can create new temporary files if needed.</p>\n<p>Create a new secret named <code class=\"language-text\">db2-test</code> in <code class=\"language-text\">istio-system</code> namespace as follows:</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">username: production-instance\npassword: KvLftKgs4aVH</code></pre></div>\n<p>Finally, create a new pod, it can access secret <code class=\"language-text\">db2-test</code> via volume</p>\n<ul>\n<li>name : <code class=\"language-text\">secret-pod</code></li>\n<li>namespace: <code class=\"language-text\">istio-system</code></li>\n<li>container name: <code class=\"language-text\">dev-container</code></li>\n<li>image : <code class=\"language-text\">nginx</code></li>\n<li>volume name: <code class=\"language-text\">secret-volume</code></li>\n<li>mounting path: <code class=\"language-text\">/etc/secret</code></li>\n</ul>\n<h3 id=\"ì •ë‹µ-5\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-5\" aria-label=\"ì •ë‹µ 5 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li><code class=\"language-text\">db1-test1</code> secretì—ì„œ username, passwordë¥¼ ì¶”ì¶œ í›„ base64ë¡œ ë””ì½”ë”©ëœ ê²°ê³¼ë¥¼ ê°ê°ì˜ íŒŒì¼ì— ì €ì¥í•œë‹¤.\n<ul>\n<li><code class=\"language-text\">k get secret db1-test -n istio-system -o=jsonpath='{.data.username}' | base64 -d > /cs/sec/user.txt</code></li>\n<li><code class=\"language-text\">k get secret db1-test -n istio-system -o=jsonpath='{.data.password}' | base64 -d > /cs/sec/pass.txt</code></li>\n</ul>\n</li>\n<li><code class=\"language-text\">db2-test</code> secret ìƒì„±í•˜ê¸°\n<ul>\n<li><code class=\"language-text\">kubectl create secret generic db2-test -n istio-system --from-literal=username=production-instance --from-literal=password=KvLftKgs4aVH</code></li>\n</ul>\n</li>\n<li>podì— <code class=\"language-text\">db2-test</code> ì„ secret ë¬¸ì œì˜ ì¡°ê±´ëŒ€ë¡œ volume mountí•˜ì—¬ ìƒì„±í•˜ê¸°\n<ul>\n<li>ì•„ë˜ì™€ ê°™ì´ ì‘ì„± í›„ apply</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> v1\n  <span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> Pod\n  <span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>pod\n    <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> istio<span class=\"token punctuation\">-</span>system\n  <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">containers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> dev<span class=\"token punctuation\">-</span>container\n      <span class=\"token key atrule\">image</span><span class=\"token punctuation\">:</span> nginx\n      <span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>volume\n        <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"/etc/secret\"</span>\n        <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n    <span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> secret<span class=\"token punctuation\">-</span>volume\n      <span class=\"token key atrule\">secret</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">secretName</span><span class=\"token punctuation\">:</span> db2<span class=\"token punctuation\">-</span>test</code></pre></div>\n</li>\n</ul>\n<h2 id=\"7-dockerfile\" style=\"position:relative;\"><a href=\"#7-dockerfile\" aria-label=\"7 dockerfile permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>7. Dockerfile</h2>\n<ul>\n<li>\n<p>Analyze and edit the given Dockerfile <code class=\"language-text\">/cks/docker/dockerfile</code> ( based on ubuntu: 16.04 image ), and fix two instructions that have prominent security/best practices issues in the file</p>\n</li>\n<li>\n<p>Analyze and edit the given manifest file <code class=\"language-text\">/cs/docker/deployment.yaml</code>\nand fix two fields that have prominent security/best practices issues in the file</p>\n<blockquote>\n<p>Note: Do not add or remove configuration settings. simply modify the existing configuration settings so that there is no more secruity/best real money problem with both of the above existing settings.</p>\n</blockquote>\n<blockquote>\n<p>Note: If you need a non-privileged user to exeute any project, please use the user <code class=\"language-text\">nobody</code> with user ID <code class=\"language-text\">65535</code>, just modify it, no need to create it.</p>\n</blockquote>\n</li>\n</ul>\n<h3 id=\"ì •ë‹µ-6\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-6\" aria-label=\"ì •ë‹µ 6 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>\n<ol>\n<li>/cks/docker/dockerfile ë¶€í„° ì‚´í´ë³´ê¸°</li>\n</ol>\n<ul>\n<li><code class=\"language-text\">FROM ubuntu:latest</code> -> <code class=\"language-text\">FROM ubuntu:16.04</code>ë¡œ ìˆ˜ì •</li>\n<li>2ë²ˆì§¸ USER ë¥¼ root -> nobodyë¡œ ë³€ê²½</li>\n<li><code class=\"language-text\">sudo docker build .</code></li>\n</ul>\n</li>\n<li>\n<ol start=\"2\">\n<li>/cs/docker/deployment.yaml ì‚´í´ë³´ê¸°</li>\n</ol>\n<ul>\n<li>podìª½ì˜ labelì„ deploymentì˜ selector.matchLabelsì— ë§ê²Œ ìˆ˜ì •\n<ul>\n<li>run: couchdb -> app: couchdbë¡œ ìˆ˜ì •</li>\n</ul>\n</li>\n<li>securityContextì˜ capability ë‚´ì—­ ì¤‘ â€˜CAP_SYS_ADMINâ€™ì„ ì‚­ì œ</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"8-gvisor\" style=\"position:relative;\"><a href=\"#8-gvisor\" aria-label=\"8 gvisor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>8. gVisor</h2>\n<p>The cluster uses containerd as the CRI runtime. containerdâ€™s default runtime handler is runc.\ncontainer is ready to support additional runtime handler runsc <code class=\"language-text\">gVisor</code></p>\n<ul>\n<li>Create a RuntimeClass named <code class=\"language-text\">untrusted</code> using an existing runtime handler named <code class=\"language-text\">runsc</code>.</li>\n</ul>\n<p>Update all pods in namespace <code class=\"language-text\">server</code> to run on gVisor.\n<br>\nYou can do this at /cks/gVisor/rc. Find a list of templates in yaml</p>\n<h3 id=\"ì •ë‹µ-7\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-7\" aria-label=\"ì •ë‹µ 7 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>runtimeclass ìƒì„±\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> node.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> RuntimeClass\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> untrusted\n<span class=\"token key atrule\">handler</span><span class=\"token punctuation\">:</span> runsc</code></pre></div>\n</li>\n<li><code class=\"language-text\">server</code> namespace ë‚´ì— ëª¨ë“  deploymentì„ edití•˜ì—¬ runtimeclass ì„¤ì •\n<ul>\n<li>spec.template.spec.runtimeClassNameì„ ì„¤ì •</li>\n<li>k edit deploy busybox-run -n server\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">runtimeClassName</span><span class=\"token punctuation\">:</span> untrusted <span class=\"token comment\">## ì´í–‰ ì¶”ê°€</span></code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"9-container-security\" style=\"position:relative;\"><a href=\"#9-container-security\" aria-label=\"9 container security permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9. Container security</h2>\n<h3 id=\"9-1\" style=\"position:relative;\"><a href=\"#9-1\" aria-label=\"9 1 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9-1.</h3>\n<p>Best practice is to design containers as stateless and immutable.</p>\n<ul>\n<li>Check the pods running in namespace <code class=\"language-text\">production</code> and remove any non-stateless or immutable pods.</li>\n<li>Use the following strict interpretations of statelessness and immutability.\n<ul>\n<li>A container of pods capable of storing data within a container must be considered stateless.</li>\n<li>Privileged pods configured to be of any kind must be considered stateless and immutable.</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"ì •ë‹µ-8\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-8\" aria-label=\"ì •ë‹µ 8 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>privileged : trueë¡œ ì„¤ì •ëœ podì™€ hostPathë¡œ volumeì´ ì¡íŒ podë¥¼ ëª¨ë‘ ì‚­ì œí•œë‹¤.</li>\n</ul>\n<h3 id=\"9-2\" style=\"position:relative;\"><a href=\"#9-2\" aria-label=\"9 2 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>9-2.</h3>\n<p>Modify the deployment <code class=\"language-text\">secdep</code> in the <code class=\"language-text\">sec-ns</code> namespace as follows:</p>\n<ul>\n<li>First, start the container with a user id of 30000</li>\n<li>Second, do not allow a process to get privileges beyond its parent process ( allowPrivilegeEscalation is prohibited )</li>\n<li>Third, load the containerâ€™s root file system in a read-only manner( read-only permission to the root file )</li>\n</ul>\n<h3 id=\"ì •ë‹µ-9\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-9\" aria-label=\"ì •ë‹µ 9 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>k edit deploy secdep -n sec-ns ë¥¼ í•´ì„œ\n<ul>\n<li>podë ˆë²¨ì—ì„œ ì„¤ì • :  <code class=\"language-text\">spec.securityContext.runAsUser: 30000</code>ìœ¼ë¡œ ì„¤ì •</li>\n<li>ì¡´ì¬í•˜ëŠ” ëª¨ë“  ì»¨í…Œì´ë„ˆì— ëŒ€í•´ ì•„ë˜ ë‚´ìš© ì„¤ì •\n<ul>\n<li>ì»¨í…Œì´ë„ˆ ë ˆë²¨ì—ì„œ ì„¤ì • :  <code class=\"language-text\">spec.containers.securityContext.allowPrivilegeEscalation: false</code> ë¡œ ì„¤ì •</li>\n<li>ì»¨í…Œì´ë„ˆ ë ˆë²¨ì—ì„œ ì„¤ì • :  <code class=\"language-text\">spec.containers.securityContext.readOnlyRootFilesystem: true</code>ë¡œ ì„¤ì •</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"10-network-policy\" style=\"position:relative;\"><a href=\"#10-network-policy\" aria-label=\"10 network policy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>10. Network policy</h2>\n<p>Create a NetworkPolicy called <code class=\"language-text\">pod-restriction</code> to restrict access to pod <code class=\"language-text\">product-service</code> running in namepsace <code class=\"language-text\">dev-team</code>.\nAllow only the following pods to connect to <code class=\"language-text\">product-service</code> pod</p>\n<ul>\n<li>All pod from namespace <code class=\"language-text\">qaqa</code></li>\n<li>pod with label <code class=\"language-text\">environment:testing</code> located in any namespace</li>\n</ul>\n<h3 id=\"ì •ë‹µ-10\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-10\" aria-label=\"ì •ë‹µ 10 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<p>ì•„ë˜ì™€ ê°™ì´ êµ¬ì„±í•˜ë©´ ëœë‹¤. from ì ˆì´ 2ê°œ ìˆìœ¼ë©´ 2ê°œ ì¡°ê±´ì´ or ë˜ê³ , fromì ˆ í•˜ë‚˜ì— 2ê°œì˜ ì¡°ê±´ì´ ë“¤ì–´ê°€ë©´ ì¡°ê±´ì´ ì„œë¡œ andì²˜ë¦¬ë˜ëŠ” ê²ƒìœ¼ë¡œ ì´í•´í•˜ë©´ ë¨.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">apiVersion</span><span class=\"token punctuation\">:</span> networking.k8s.io/v1\n<span class=\"token key atrule\">kind</span><span class=\"token punctuation\">:</span> NetworkPolicy\n<span class=\"token key atrule\">metadata</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> pod<span class=\"token punctuation\">-</span>restriction\n  <span class=\"token key atrule\">namespace</span><span class=\"token punctuation\">:</span> dev<span class=\"token punctuation\">-</span>team\n<span class=\"token key atrule\">spec</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">podSelector</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span> testing\n  <span class=\"token key atrule\">policyTypes</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> Ingress\n  <span class=\"token key atrule\">ingress</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">from</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">namespaceSelector</span><span class=\"token punctuation\">:</span>\n            <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n              <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> qaqa\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">from</span><span class=\"token punctuation\">:</span>\n       <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">namespaceSelector</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span>\n         <span class=\"token key atrule\">podSelector</span><span class=\"token punctuation\">:</span>\n           <span class=\"token key atrule\">matchLabels</span><span class=\"token punctuation\">:</span>\n             <span class=\"token key atrule\">environment</span><span class=\"token punctuation\">:</span> testing</code></pre></div>\n<h2 id=\"11-trivy\" style=\"position:relative;\"><a href=\"#11-trivy\" aria-label=\"11 trivy permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>11. Trivy</h2>\n<p>Detect severely vulnerable images used by pods in namespace <code class=\"language-text\">kamino</code> using the Trivy open source container scanner\nFind images with High and Critical serverity vulnerabilities and remove pods that use these images</p>\n<ul>\n<li>Note: Trivy is installed only on the master node of the cluster and is not available on the working node.</li>\n</ul>\n<p>You have to switch to the master node of the cluster to use Trivy.</p>\n<h3 id=\"ì •ë‹µ-11\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-11\" aria-label=\"ì •ë‹µ 11 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>kamino namespaceì— ì¡´ì¬í•˜ëŠ” ëª¨ë“  podì˜ Image ë¦¬ìŠ¤íŠ¸ ì¶”ì¶œ</li>\n<li><code class=\"language-text\">trivy image --severity HIGH,CRITICAL {ì´ë¯¸ì§€ëª…}</code> ìœ¼ë¡œ vulnerableí•œ ì´ë¯¸ì§€ ì°¾ì•„ì„œ í•´ë‹¹ pod ì‚­ì œ</li>\n</ul>\n<h2 id=\"12-apparmor\" style=\"position:relative;\"><a href=\"#12-apparmor\" aria-label=\"12 apparmor permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>12. Apparmor</h2>\n<p>Apparmor is enabled on <code class=\"language-text\">node02</code> of the clusterâ€™s working node. The platform apparmor configuration file already exists, but has not been implemented.\n<br>\nOn <code class=\"language-text\">node02</code> of the cluster, implementation is located in /etc/apparmor.d/nginx_apparmor is existing Apparmor configuration file.</p>\n<ul>\n<li>Edit in <code class=\"language-text\">/cs/KSSH00401/nginx-deploy.yaml</code> file to apply the apparmor configuration file.</li>\n<li>Finally, apply the mmanifest file and create the pod specified it.</li>\n</ul>\n<br>\n<blockquote>\n<p>Please note that during the test, apparmor is indicated on the working node, so you need to ssh to the working node written at the beginning.\nIn an analog environment, you need ssh to node02 to work.</p>\n</blockquote>\n<h3 id=\"ì •ë‹µ-12\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-12\" aria-label=\"ì •ë‹µ 12 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>\n<ol>\n<li>ssh to node02</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li><code class=\"language-text\">apparmor_parser -q /etc/apparmor.d/nginx_apparmor</code></li>\n</ol>\n<ul>\n<li>profileëª… ì•Œì•„ë‚´ê³  aa-statusë¡œ í•´ë‹¹ profile ì˜ ë¡œë“œë˜ì—ˆëŠ”ì§€ í™•ì¸</li>\n</ul>\n</li>\n<li>\n<ol start=\"3\">\n<li><code class=\"language-text\">/cs/KSSH00401/nginx-deploy.yaml</code>ì˜ deployment definition íŒŒì¼ì—ì„œ podì˜ annotationì— <code class=\"language-text\">container.apparmor.security.beta.kubernetes.io/&lt;container_name>: &lt;profile_ref></code> ë‚´ìš© ì¶”ê°€</li>\n</ol>\n</li>\n<li>\n<ol start=\"4\">\n<li>k apply -f /cs/KSSH00401/nginx-deploy.yaml</li>\n</ol>\n</li>\n</ul>\n<h2 id=\"13-falco--sysdig\" style=\"position:relative;\"><a href=\"#13-falco--sysdig\" aria-label=\"13 falco  sysdig permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>13. Falco &#x26; sysdig</h2>\n<p>Use the runtime detction tool to detect frequency generation and execution exception selections in a single pod <code class=\"language-text\">tomcat123</code> container.\n<br>\nUse the tool to analyze for at least 30 seconds. Use the filter to check the generated and executed process, write the event to the <code class=\"language-text\">/opt/KSR00101/incidents/summary</code> file, which contains the detected events, in the following format: <code class=\"language-text\">timestamp.uid,username,processName</code>.</p>\n<h3 id=\"ì •ë‹µ-13\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-13\" aria-label=\"ì •ë‹µ 13 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>Sysdig ì‚¬ìš© ê¶Œì¥\n<ul>\n<li>sysdig -l | grep {time, user, proc, name} ë“±ì˜ ëª…ë ¹ìœ¼ë¡œ output ì‹œ ì‚¬ìš©í•  ë³€ìˆ˜ëª…ì„ íŒŒì•…í•  ìˆ˜ ìˆìŒ</li>\n<li>crictl info | grep sock ëª…ë ¹ìœ¼ë¡œ containerEndpointê°€ <code class=\"language-text\">/run/containerd/containerd.sock</code> ì„ì„ í™•ì¸í•  ìˆ˜ ìˆìŒ</li>\n<li>sysdig -M 30 -p â€˜%evt.time, %user.name, %proc.nameâ€™ â€”cri /run/containerd/containerd.sock container.name=tomcat123 >> ì£¼ì–´ì§„ íŒŒì¼ ê²½ë¡œ</li>\n</ul>\n</li>\n<li>Falco\n<ul>\n<li>kubectl describe tomcat123ìœ¼ë¡œ container id ì•Œì•„ë‚´ê¸°</li>\n<li>/etc/faloco/falco.yamlì—ì„œ <code class=\"language-text\">file_output.enabled: true</code>, <code class=\"language-text\">file_output.filename</code>ì˜ ê²½ë¡œë¥¼ í™•ì¸í•˜ê¸°\n<ul>\n<li>ì—¬ê¸°ì„œ ìˆ˜ì •ì´ ë°œìƒí•˜ë©´ <code class=\"language-text\">daemon-reload</code>, <code class=\"language-text\">systemctl restart falco</code>ë¥¼ ìˆ˜í–‰í•´ì¤€ë‹¤.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">%evt.time,%user.uid,%proc.name</code></li>\n<li>ê²°ê³¼ë¥¼ outputìœ¼ë¡œ ì„ì˜ì˜ node02 ì˜ íŠ¹ì • ê²½ë¡œì— ì¶œë ¥í•œ í›„ í•´ë‹¹ ë¡œê·¸ë¥¼ localì˜ <code class=\"language-text\">/opt/KSR00101/incidents/summary</code>ì— ë¶™ì—¬ë„£ì–´ì•¼ í•  ë“¯í•˜ë‹¤.</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"14-tls\" style=\"position:relative;\"><a href=\"#14-tls\" aria-label=\"14 tls permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>14. TLS</h2>\n<p>strengthen kube-apiserver security configuration through TLS, requirements:</p>\n<ul>\n<li>kube-apiserver is not allowed except version TLS13 and above.</li>\n<li>Cipher suite is <code class=\"language-text\">TLS_AES_128_GC_SHA256</code></li>\n</ul>\n<p>Enhance ETCD security configuration with TLS, requirements:</p>\n<ul>\n<li>cipher suite <code class=\"language-text\">TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code></li>\n</ul>\n<h3 id=\"ì •ë‹µ-14\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-14\" aria-label=\"ì •ë‹µ 14 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>kube-apiserver ê°•í™”\n<ul>\n<li>kube-apiserver.yamlíŒŒì¼ì˜ commandì— ì•„ë˜ ë‚´ìš© 2ê°œ ì¶”ê°€\n<ul>\n<li><code class=\"language-text\">- --tls-min-version=VersionTLS13</code></li>\n<li><code class=\"language-text\">- --tls-cipher-suites=TLS_AES_128_GC_SHA256</code></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>etcd ê°•í™”\n<ul>\n<li>etcd.yamlíŒŒì¼ì˜ commandì— <code class=\"language-text\">- --ciper-suites=TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256</code>í–‰ ì¶”ê°€\n<ul>\n<li>kube-apiserverì™€ ë‹¬ë¦¬ â€˜tls-â€˜ê°€ ì—†ìŒì— ì£¼ì˜</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">systemctl daemon-reload</code>, <code class=\"language-text\">systemctl restart kubelet</code></li>\n</ul>\n<h2 id=\"15-enabling-api-server-authentication\" style=\"position:relative;\"><a href=\"#15-enabling-api-server-authentication\" aria-label=\"15 enabling api server authentication permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>15. Enabling API SERVER authentication</h2>\n<p>Kubernetes API server for cluster created by kubeadm. For testing purposes, temporary configuration allows unauthenticated and unauthorized access, granting anonymnous user <code class=\"language-text\">cluster-admin</code> access.\n<br>\nReconfigure the kubernetes API server for cluster. Ensure that only authenticated  and authorized REST requests are allowed.</p>\n<ul>\n<li>Use authorization mode â€˜Node, RBACâ€™ and Access Controller â€˜NodeRestrictionâ€™.</li>\n<li>Delete the <code class=\"language-text\">system:anonymous</code> Clusterrolebinding to clean up.</li>\n</ul>\n<br>\n<blockquote>\n<p>Note : all kubectl configuration environments/files are also configured to use unauthenticated and unauthorized access. You donâ€™t have to change it. Note,  however, that once the cluster is secured, the configuration of kubectl will not work. You can use the clusterâ€™s original kubectl configuration file <code class=\"language-text\">/etc/ kubernetes/admin.conf</code> on the master node of the cluster. Ensure that authenticated authorization reqeusts are still allowed.</p>\n</blockquote>\n<p>In the simulation environment, the script to initialize this problem is b.sh</p>\n<h3 id=\"ì •ë‹µ-15\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-15\" aria-label=\"ì •ë‹µ 15 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<ul>\n<li>kube-apiserver.yaml íŒŒì¼ ìˆ˜ì •í•˜ê¸°\n<ul>\n<li><code class=\"language-text\">- --authorization-mode=Node,RBAC</code> ë¡œ ìˆ˜ì •</li>\n<li><code class=\"language-text\">- --enable-admission-plugins=NodeRestriction</code>ìœ¼ë¡œ ìˆ˜ì •</li>\n</ul>\n</li>\n<li><code class=\"language-text\">system:anonymous</code> clusterrolbinding ì‚­ì œí•˜ê¸°</li>\n<li>ìœ„ ì‘ì—…ì´ ëë‚œ ë’¤, ê·¸ëƒ¥ k get podì‹œì—” ì œí•œë˜ê³ , masterë…¸ë“œì—ì„œ <code class=\"language-text\">k get pod -A --kubeconfig /etc/kubernetes/admin.conf</code>ë¥¼ ì‹¤í–‰í–ˆì„ ë•Œ ì •ìƒì ìœ¼ë¡œ podê°€ ì¡°íšŒë˜ë©´ ì„±ê³µ</li>\n</ul>\n<h2 id=\"16-imagepolicywebhook--container-image-scanning\" style=\"position:relative;\"><a href=\"#16-imagepolicywebhook--container-image-scanning\" aria-label=\"16 imagepolicywebhook  container image scanning permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>16. ImagePolicyWebhook : container image scanning</h2>\n<p>The container mirroring scanner is set up on the cluster, but it is not fully integrated into the clusterâ€™s configuration.\nAfter completion, the container mirror scanner should scan and reject the use of vulnerable mirrors.\n<br></p>\n<blockquote>\n<p>Note: You must complete the entire test on the matser node of the cluster, and all services and files are ready and places on that node.</p>\n</blockquote>\n<br>\nGiven an incomplete configuration in directory `/etc/kubernetes/epconfig`, as well as `https://image-bouncer-webhook.default.svc:1323/image_policy` functional container image scanner.\n<br>\n<ul>\n<li>\n<ol>\n<li>Enable the necessary plugins to create mirror policies.</li>\n</ol>\n</li>\n<li>\n<ol start=\"2\">\n<li>Verify the control configuration and change it to implicit deny.</li>\n</ol>\n</li>\n<li>\n<ol start=\"3\">\n<li>Edit the configuration to correctly point to the provided HTTPS endpoint last, by trying to deploy vulnerable resources <code class=\"language-text\">/cks/img/web1/yaml</code> to test if the configuration is valid.</li>\n</ol>\n</li>\n</ul>\n<h3 id=\"ì •ë‹µ-16\" style=\"position:relative;\"><a href=\"#%EC%A0%95%EB%8B%B5-16\" aria-label=\"ì •ë‹µ 16 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ì •ë‹µ</h3>\n<p>ì²˜ìŒì— <code class=\"language-text\">k apply /cks/img/web1/yaml</code>ë¥¼ ì‹¤í–‰í•´ë³´ë©´ podê°€ ì •ìƒì ìœ¼ë¡œ ìƒì„±ë˜ëŠ” ê±¸ í™•ì¸í•  ìˆ˜ ìˆë‹¤. ì´ê±¸ ë§‰ê³  ì‹¶ì€ê²Œ ìš°ë¦¬ì˜ ëª©ì ì´ë‹¤. í…ŒìŠ¤íŠ¸ í•œ ë’¤ì—” ë‹¤ì‹œ ì‚­ì œí•´ì£¼ì.</p>\n<ul>\n<li><code class=\"language-text\">epconfig</code> ë””ë ‰í† ë¦¬ í•˜ìœ„ì— ë³´ë©´ ì—¬ëŸ¬ íŒŒì¼ë“¤ì´ ìˆëŠ”ë° ê·¸ ì¤‘ì— <code class=\"language-text\">admission_configuration.json</code>íŒŒì¼ì—ì„œ <code class=\"language-text\">imagePolicy.defaultAllow: true</code> ì—ì„œ <code class=\"language-text\">imagePolicy.defaultAllow: false</code>ë¡œ ìˆ˜ì •í•˜ê¸° ( 2ë²ˆ ìš”êµ¬ì‚¬í•­ )</li>\n<li><code class=\"language-text\">epconfig</code> ë””ë ‰í† ë¦¬ í•˜ìœ„ì˜ kubeconfig.yamlíŒŒì¼ì—ì„œ <code class=\"language-text\">clusters.cluster.server</code>ì˜ ê°’ì´ ë¬¸ì œì— ë”°ë¥´ë©´ <code class=\"language-text\">https://image-bouncer-webhook.default.svc:1323/image_policy</code>ì—¬ì•¼ í•˜ëŠ”ë° ì„¤ì •ì´ ì•ˆë˜ì–´ ìˆìœ¼ë¯€ë¡œ ì¶”ê°€ ì„¤ì •í•´ì£¼ê¸°. (3ë²ˆ ìš”êµ¬ì‚¬í•­)</li>\n<li>kube-apiserver ì„¤ì •í•˜ê¸°\n<ul>\n<li><code class=\"language-text\">- --enable-admission-plugins=ImagePolciyWebhook</code>ì„ ì¶”ê°€í•´ì£¼ê¸°</li>\n<li><code class=\"language-text\">- --admission-control-config-file=/etc/kubernetes/epconfig/admission_configuration.json</code>ì„ ì„¤ì •í•´ì¤€ë‹¤.\n<ul>\n<li>ê·¸ëŸ°ë° kube-apiserver podì—ì„œ ì´ jsoníŒŒì¼ì„ ëŸ°íƒ€ì„ì‹œ ì‚¬ìš©í•˜ê¸° ìœ„í•´ì„œëŠ” volumemìœ¼ë¡œ ë§ˆìš´íŠ¸í•´ì¤˜ì•¼ í•˜ê¸°ì— volumes, volumeMount ì„¤ì •ì„ ì¶”ê°€í•´ì¤€ë‹¤.\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">volumeMounts</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">mountPath</span><span class=\"token punctuation\">:</span> /etc/kubernetes/epconfig\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> epconfig\n  <span class=\"token key atrule\">readOnly</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n.\n.\n.\n<span class=\"token key atrule\">volumes</span><span class=\"token punctuation\">:</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">hostPath</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">path</span><span class=\"token punctuation\">:</span> /etc/kubernetes/epconfig\n    <span class=\"token key atrule\">type</span><span class=\"token punctuation\">:</span> DirectoryOrCreate\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> epconfig</code></pre></div>\n</li>\n</ul>\n</li>\n<li><code class=\"language-text\">systemctl daemon-reload</code>, <code class=\"language-text\">systemctl restart kubelet</code></li>\n</ul>\n</li>\n<li>ë§ˆì§€ë§‰ìœ¼ë¡œ <code class=\"language-text\">k apply /cks/img/web1/yaml</code> ëª…ë ¹ì´ ì‹¤í–‰ ì•ˆë˜ëŠ” ê²ƒìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ì™„ë£Œ</li>\n</ul>","frontmatter":{"date":"November 24, 2023","title":"[CKS] ì‹¤ì œ ê¸°ì¶œ","categories":"DevOps","author":"jjunyong","emoji":"ğŸ§¢"},"fields":{"slug":"/cks-chinaexam/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/error-redis-fail/","nextSlug":"/kotlin2/","prevSlug":"/cks-chinaexam/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}