{"componentChunkName":"component---src-templates-blog-template-js","path":"/aem1/","result":{"data":{"cur":{"id":"385f5e04-75dc-546b-bf37-19032cb99613","html":"<blockquote>\n<p>AEM 을 소개함에 있어 해당 과정은 Udemy의 <a href=\"https://www.udemy.com/course/adobe-experience-manager-63\">https://www.udemy.com/course/adobe-experience-manager-63</a> 과정을\n영어가 어려운 사람들을 위해 한국어로 정리하는 데 목적이 있음을 밝힌다. AEM 관련해서 체계적으로 정리해둔 블로그를 찾지 못했기 때문이기도 하다.</p>\n</blockquote>\n<br>\n<h2 id=\"aem-소개\" style=\"position:relative;\"><a href=\"#aem-%EC%86%8C%EA%B0%9C\" aria-label=\"aem 소개 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AEM 소개</h2>\n<ul>\n<li>AEM은 ‘Adobe Experience Manager’ 의 약어이며, 어도비 사에서 만든 Java 기반의 CMS 솔루션이다.\nAEM은 상용 웹 사이트를 만드는 데 많이 사용되며 웹 사이트의 콘텐츠와 asset 들을 관리하기에 용이하며 배포까지 지원한다.</li>\n</ul>\n<br>\n<blockquote>\n<h3 id=\"웹사이트와-cms\" style=\"position:relative;\"><a href=\"#%EC%9B%B9%EC%82%AC%EC%9D%B4%ED%8A%B8%EC%99%80-cms\" aria-label=\"웹사이트와 cms permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>웹사이트와 CMS</h3>\n<p>웹 사이트에는 3가지 종류가 있다.</p>\n<ol>\n<li>Static 웹 사이트\n: 정적 리소스로만 이루어진 웹 사이트이다.</li>\n<li>Dynamic 웹 사이트\n: 클라이언트/서버의 스크립트를 통해 동적으로 웹 사이트의 콘텐츠를 관리하는 웹 사이트이다.</li>\n<li>CMS</li>\n</ol>\n<ul>\n<li>template을 생성할 수 있다</li>\n<li>재사용 가능한 Component를 생성하고 publish할 수 있다.\nAEM은 CMS의 한 종류이며 아래와 같은 구조를 통해 페이지를 구성한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.111111111111114%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAABYlAAAWJQFJUiTwAAACT0lEQVQoz22SS08TYRSGu/cGBS1VoEpbXJhojAoBKaALBDsirbTzzTedCuUSVIRw6Uyk1piQGLeEmOhClBDQICz8FwIuuIYoIPGXPGZGKCSweHOS93nPm7M4rkZhYEVqGIjWMxStYzhae6BICFNrxDSasZItpFvvOt7hjL1j76ajIWq1Llyp2AO+K2eZUS4wqZQwofj4tK9wCVP6TeaeNvCtT+Fz9LLj7XM7O6UU81U5z7ziIaIKXAHdpFSkKdZMFL0dQ8aRUuRkiFZqtG7CIomhxXK+JgVJGade76FIWPi0YewuV9Cw8OkmvmSWubYKduInWBOFbIgCZ+6KU7zujjPfUcUf9WSOrYpC/mqnedvZTL7M4k+YBBMWrmDC5KJM4zMyTLdVsy7PsSC8LKkeZ64LN5nOONOpEBvSw4JaxJLw8EP1sqkVMpp6iFu+xK+n9wstfNLEZ4wwkwrxq/8Wq5kway8aWR4JszVURSb1iC/dd/jdd+OAZRR2BisZ7ThSuHdhMsP040rWYmdYFF5+iiIWVQ8b8bz/F7ZXs36ILcQ9bAr3MRcaFqW6RWkyy2x7FVuam2XpZVV6WJFetmU+r7pUZjtusy3drMgih9mZXb2AN50t5MksZbpJwC4s14cJiAHKtEHqRIomVXJPTeTUpOpUaE+OsAaHSSq1HnxiyOko19O49FgLk+ES3itljIcDjCnBPZUzdt/PeOt1JnojfHweZTx61fEctpd7F/bzQbnk/KSi6riuyX7nw+1fs+exMp5Rl+yl9phM6NDuFX2AfzwwzD/XmbJ/AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image2\"\n        title=\"image2\"\n        src=\"/static/5d1403cb60cf09bf19fc144ed762f88d/37523/image2.png\"\n        srcset=\"/static/5d1403cb60cf09bf19fc144ed762f88d/e9ff0/image2.png 180w,\n/static/5d1403cb60cf09bf19fc144ed762f88d/f21e7/image2.png 360w,\n/static/5d1403cb60cf09bf19fc144ed762f88d/37523/image2.png 720w,\n/static/5d1403cb60cf09bf19fc144ed762f88d/302a4/image2.png 1080w,\n/static/5d1403cb60cf09bf19fc144ed762f88d/07a9c/image2.png 1440w,\n/static/5d1403cb60cf09bf19fc144ed762f88d/ce0a7/image2.png 1590w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n</blockquote>\n<br>\n<h3 id=\"1-aem의-컨셉\" style=\"position:relative;\"><a href=\"#1-aem%EC%9D%98-%EC%BB%A8%EC%85%89\" aria-label=\"1 aem의 컨셉 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. AEM의 컨셉</h3>\n<ul>\n<li>파일 시스템과 유사한 JCR repository라는 곳에 모든 것을 저장하는데 이게 무엇인 지는 이후에 살펴보자.</li>\n<li>2가지 방식의 UI가 있고 주로 Touch UI 방식을 사용한다.\n<ul>\n<li>Touch UI\n<ul>\n<li>디폴트 UI이며 반응형 기능을 제공한다.</li>\n</ul>\n</li>\n<li>Classic UI\n<ul>\n<li>반응형이지 않고 Desktop 페이지만을 지원한다 .</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>OSGI, JCR, Apache Sling 을 기반으로 한다.</li>\n</ul>\n<h3 id=\"2-author와-publish\" style=\"position:relative;\"><a href=\"#2-author%EC%99%80-publish\" aria-label=\"2 author와 publish permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Author와 Publish</h3>\n<ul>\n<li>\n<p>Author</p>\n<ul>\n<li>콘텐츠와 페이지를 CRUD할 수 있으며 해당 작업이 Publish에 <strong>Activate</strong> 하기 전에는 웹 사이트에 연동되지 않는다.</li>\n</ul>\n</li>\n<li>\n<p>Publish</p>\n<ul>\n<li>Public에 공개된 was로 보면 되며, publish에 반영된 내용은 웹 사이트에서 바로 반영된다.</li>\n<li>Author의 내용은 activate을 통해 publish에 반영되고 deactivate을 통해 삭제된다.</li>\n</ul>\n</li>\n<li>\n<p>Replication</p>\n<ul>\n<li>Content를 Author -> Publisher 로 복사하는 것인데 개념 상 Activate을 통해서 replication을 구현 한다고 보면 될 것 같다.</li>\n<li>Publihser -> Author로 복사하는 것은 Reverse replication이라고 한다.</li>\n<li>Replication Agent\n<ul>\n<li>replication을 자동화 하기 위한 기능인 것 같다. Author에서 Activate을 하면 Replication queue에 쌓이고 publish는 queue에 있는 변경사항을 가져와서 반영한다.</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"3-sling이란\" style=\"position:relative;\"><a href=\"#3-sling%EC%9D%B4%EB%9E%80\" aria-label=\"3 sling이란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Sling이란?</h3>\n<p>AEM에서 콘텐츠의 저장소로 사용되는 JCR을 이해하기에 앞서 Apache Sling(줄여서 그냥 Sling)이 무엇인지 알아야 한다.\nSling의 목표는 콘텐츠 저장소의 콘텐츠를 HTTP 리소스로 나타내 RESTful한 애플리케이션을 개발하는 것이다.\nAEM에서 JCR은 Sling을 통해 Web에 노출된다고 이해할 수 있다.</p>\n<p>URL로 AEM에 요청이 들어오면, ( ex. req: /content/corporate/jobs/developer.html)</p>\n<ol>\n<li>가장 먼저 JCR의 node를 찾고,</li>\n<li>해당 node의 sling:resourceType 값을 통해 렌더링 시 사용할 스크립트를 찾는다.</li>\n<li>찾은 스크립트의 실행을 거쳐 콘텐츠를 화면에 렌더링한다.</li>\n</ol>\n<ul>\n<li>모든 Sling 스크립트는 /apps 또는 /libs 하위 폴더에 저장한다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 59.44444444444444%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAADAklEQVQoz12S3U9bBRiH+0945ZVeaLzwT/DCG5f4ETXGuGQXJmZmLm5zbtmiA2EXOpNZpFtjHC1DQbBA1A4LlBkwOGQdDVAKbra083BK6Wl7Sjk9p6c9n31Mi8bF9+q9evL83t/r8Q5FuOQd5lP/93xxY4JrN38kMBpheDLK5M8LTM3dYWFplTuxBLH4BllhF9elM61Wi/+PJydVSGVFcqUDippNQWlSUBoUlQYlRaes6FTUBlW1gVxVyTzcoVAsIysartvCcRy+Dt2myzfOyK1FPLRANy3MfBp5IURz41daqRhOZhV3ZxM3n6ZVEqBaALWCWpaoSbsc3I93DE3L4sjxz3nsufc5dsGPxzAtVN3AkPdID14m0/Uqsu8EtW+70X7wUo8G0X6bRF/7hWY6jiPncKW/MJKLnYimafLm2X6efuki7/UG8ZiWg6rV+ecs7MyFyP4URIx8gxAdo7A0jZFZx8ylsEoitiLjaAdY5d12OEzb4fXTfTx55DzHu28cArW6Tst1OkADKMRukxzp40F4COXeLGZqBUvYwpYe4ihlnJqMsZcFQ8fWVY6ev84zL1/k5OWOoY1S02g0Ddql1TWNvCiSXFsjuZ5AFARc28Y2LWzLxrZt/u1W35dZubfGmSvDvNM1QO/1cTyW7VCqHPB7QsA3Hsc7FiMQ+ZPgdJrB2W0CkRQ3ZzMMzWUIL+dY3a4gSDWKRRm9aSFK+7z1oY9nX/uYEz0BPO2mHLfVsVtPSVzyz3LKO0PP2AN6vtuiZ/Q+vaPt/Q/6b6WZjkssbeZZjG0eWjaavHHmS5544RzvfjLwKPAwSHavRp8vxGB/gAH/CBOjM0xNLROOrBCOJphZTDEfFxB28u3XRq03Oi0/9eKF/wzdR4DivkXU5+Vu1zHmPzvLRvAKyTE/29EJcnfnEdaWqcr72KaBbTtoeoNXTl7l8ec/4O2PvjoE2o6L47gdqFK32MrKbGVKbGZKJNJF1tNFNjJl0mIVUVJQdYt608IwbSzLotsX4ui5a1wNhvkbR9wyQdNn2OgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image4\"\n        title=\"image4\"\n        src=\"/static/1e12acb1d0569a4b5c10eaee0d3d8e95/37523/image4.png\"\n        srcset=\"/static/1e12acb1d0569a4b5c10eaee0d3d8e95/e9ff0/image4.png 180w,\n/static/1e12acb1d0569a4b5c10eaee0d3d8e95/f21e7/image4.png 360w,\n/static/1e12acb1d0569a4b5c10eaee0d3d8e95/37523/image4.png 720w,\n/static/1e12acb1d0569a4b5c10eaee0d3d8e95/302a4/image4.png 1080w,\n/static/1e12acb1d0569a4b5c10eaee0d3d8e95/105d8/image4.png 1170w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<h3 id=\"4-jcr-java-content-repository-란\" style=\"position:relative;\"><a href=\"#4-jcr-java-content-repository-%EB%9E%80\" aria-label=\"4 jcr java content repository 란 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. JCR (Java Content Repository) 란?</h3>\n<p>JCR은 Contents를 Repository로서 사용하기 위한 Java에서 제공하는 인터페이스라고 정의할 수 있으며,\nJCR은 아래와 같은 트리구조의 저장소로서 Node와 Property로 구성된다.\n/blog/jan/31/title/ 과 같이 url로서 리소스에 접근 가능하다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 83.33333333333334%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAACbElEQVQ4y52S30sUURTH96/otf+h3oIQgiilMqKkl0DwB0S99eJDD5EUGAhlEFhawVIagRJh4VuQ/RDdfrimrkYluOvPnZ3d2dmZO/fHJ2Z229ZSIw+cOfeee+9nvufeE6NixpjIQ/MmBnFGOimO3qA42oUJStU9/7LYZqCOxs5QB9bNw1i9p8ndbkCX8rsFGqIjgUeQXyOX+QHCqYJ2BQxNLiZwPwyTG3+KmH6BUcH/AX+Va7SKkoWBi1jX9mHfPUP2+n60mysDtdqkdqsfxLZK6o1vrCdGyEy+xP8+8df6TkrLClWALtloZwPj2RQcl6IECViOh/YK6GIW7VqYwNtZYfgRqVdY3XU4j9rJdddRTAxVN4jsElbPUfLxFnI9R3BHuyrl6+2BweIkhXgrmYFL5ONtyK+vy4fC8t0szuPzOMMdFOJtlN7eryjcARiaXZLYRQ+rKKjdZjBb3KHeBKwFx7yxe9jvB3FdF7TC8zzsxDO8N/1oz6EqdRv789VjzvMrlMb6yvclRBRLE4NYw5dRuQV0sIH2V9D+6mYX6xgtwhcFIyOPgFu1QtiN6fUNgtkm5JfjyJmTyJkTNbEROVWH8lerBZhqH4bNGr5YDVRKyfpqBjF/AX+2GTHXgohiKyLVhki1R3OZ6UOtPUEt96OWH2CU91thrUqpFJn0EsFME3LuLHKhvaxq9hQydQ650Iqcby7Pw3zyEPLzQXRgbwOUZaA/VY94twfx8QD+dCN+sh4/2YCfPFYZ1yM+HUSM742i2g6otaGQt5HpXtTiVdTSLeRKHLnyMCpPVkpUy32o9B3UYidqqQetSvwEdYT0LNBCg9EAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"image3\"\n        title=\"image3\"\n        src=\"/static/d793f1e330910b0077d598dcca2aa1a3/37523/image3.png\"\n        srcset=\"/static/d793f1e330910b0077d598dcca2aa1a3/e9ff0/image3.png 180w,\n/static/d793f1e330910b0077d598dcca2aa1a3/f21e7/image3.png 360w,\n/static/d793f1e330910b0077d598dcca2aa1a3/37523/image3.png 720w,\n/static/d793f1e330910b0077d598dcca2aa1a3/302a4/image3.png 1080w,\n/static/d793f1e330910b0077d598dcca2aa1a3/07a9c/image3.png 1440w,\n/static/d793f1e330910b0077d598dcca2aa1a3/6568d/image3.png 1660w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<p>JCR의 Node와 Property는 다음과 같은 정보를 지닌다.</p>\n<ul>\n<li>node type\n<ul>\n<li>노드의 타입이 folder인지, file인지, unstructured 인지를 정의한다.</li>\n</ul>\n</li>\n<li>mixin type\n<ul>\n<li>versionable, lockable 과 같은 버전과 잠금 여부에 대한 정보</li>\n</ul>\n</li>\n<li>value property : 1개일 수도 있고 여러 개 일 수 있다.</li>\n<li>child nodes : 자식 노드에 대한 정보를 담고 있다.</li>\n</ul>\n<p>JCR은 RDBMS와 File system의 특징을 모두 가지고 있으며 다른 여러가지 기능을 지원한다.</p>\n<ul>\n<li>RDBMS의 특징인 Transaction, query, 정형 데이터 저장, 무결성</li>\n<li>File system의 특징인 계층구조, 리소스 잠금, 접근 제어</li>\n<li>뿐만 아니라 풀텍스트검색, 버져닝, 비정형데이터 저장 등을 지원한다.</li>\n</ul>\n<br>\n<h2 id=\"aem-설치\" style=\"position:relative;\"><a href=\"#aem-%EC%84%A4%EC%B9%98\" aria-label=\"aem 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AEM 설치</h2>\n<ul>\n<li>\n<p>AEM은 Author와 Publishe라는 것이 있는데, 이에 대해서는 나중에 다룰 것이다.\n지금은 Author와 Publishe는 둘다 AEM 인스턴스이지만, 역할을 나눈 것으로 이해하면 될 것 같다.</p>\n</li>\n<li>\n<p>서버에 Author, Publisher를 설치할 때\ncq-author-p4502.jar, cq-publish-p4503.jar 과 같은 /aem/author/ 또는 /aem/pubilhser 경로에 jar파일을 설치한다.\n이렇게 하면 localhost:4502 에는 Author가 실행되고, localhost:4503에는 publisher가 실행된다.</p>\n</li>\n<li>\n<p>각 인스턴스의 디렉토리에는 위의 jar파일과 함께 license.properties가 존재해야 하며, jar파일은 처음 실행될 때 crx-quickstart라는 디렉토리를 자동으로\n생성하게 된다.</p>\n</li>\n<li>\n<p>jar가 실행되고 crx-quickstart 디렉토리가 생성되었다면 localhost:4502에서 아래와 같이 확인할 수 있다.</p>\n</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 720px; \"\n    >\n      <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.55555555555556%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAYAAAAywQxIAAAACXBIWXMAABYlAAAWJQFJUiTwAAACOklEQVQoz12RXUiTYRiG368/BZMw2ydGppVrTttmlGauQZSpuECw6CCiP4jwwAgMNcs0KMJ06jeXI39CTYlCSgzppIQOg8iMbGnT0gSx6KigwO294tuGRgc3DzwHF9dzP2L203u+z8/yY2GOr9MTfPH7mJny/TM/LOVzaPcxvNenf5z5GR/f5iaZ8o3inxhD4Ekg4I5n0ROP9KrgNYTTrkJHAnSqyC4V2W2APpVgn8qf3o1w30CwfzMj9TaqTmdy/sh2XOdUhLwloF6ASyA1gXQLZLNANglkiyDoEeAVBPtNLDxystBj4XdfCr96jfi7rbzocvK0PY+hO0Ye3jAi5G0F6VKQmoJsW4m8G4v0rkVqK5A6rEPhp0cwpmXxoKOW4cEBRu6VMlCRwuNqI711e2m77qCuzERrZbYOFMjGiFWzAs1hM9mqEOiMhh7Bs/IYnA4zRYUHKT5cQJHdSF5OBtmZ6VisZkxpyayLiyHOEIeQDRGgK3K2DtMU0AQBbzR0CYYvxnCsOI+Tx0s4WmjHecjBvvwCKq/WcaWmlvKqai5V11By4iwiBGuMdNa0DNS7DGgCOgVDZWvItiaxf3cqdssmtljNpGbl8vLVGG/fjfP6zSiT/mkamlqXDUN2umVL+Dm4BYtuETIcvBDFLvN6Dlg2kJGWQpLVRkL6TvaUlGNL28aOZAOWrYmYkhP/Ay4Z6h2GQ7tgpkXheU0UTyozyD9TSlFFLTm5Nk5lxXLNsZqbuYJ6h+CyfRV/AXlbvlnap3yRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"./image1\"\n        title=\"./image1\"\n        src=\"/static/d83e5f5216b453d8688952b57433b655/37523/image1.png\"\n        srcset=\"/static/d83e5f5216b453d8688952b57433b655/e9ff0/image1.png 180w,\n/static/d83e5f5216b453d8688952b57433b655/f21e7/image1.png 360w,\n/static/d83e5f5216b453d8688952b57433b655/37523/image1.png 720w,\n/static/d83e5f5216b453d8688952b57433b655/302a4/image1.png 1080w,\n/static/d83e5f5216b453d8688952b57433b655/07a9c/image1.png 1440w,\n/static/d83e5f5216b453d8688952b57433b655/90eea/image1.png 2254w\"\n        sizes=\"(max-width: 720px) 100vw, 720px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n    </span></p>\n<br>\n<h2 id=\"aem-콘솔의-종류\" style=\"position:relative;\"><a href=\"#aem-%EC%BD%98%EC%86%94%EC%9D%98-%EC%A2%85%EB%A5%98\" aria-label=\"aem 콘솔의 종류 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>AEM 콘솔의 종류</h2>\n<p>AEM 콘솔은 5가지 종류가 있으며 각 콘솔의 경로는 <a href=\"https://localhost:4502/\">https://localhost:4502/</a> 에 각 콘솔의 경로를 추가해주면 접속할 수 있다.</p>\n<ol>\n<li>Admin 콘솔\n: /siteadmin</li>\n<li>CRX 콘솔\n: /crx/explorer/index.jsp</li>\n<li>OSGI management 콘솔\n: /system/console</li>\n<li>CRXDE Lite 콘솔\n<ul>\n<li>경로: /crx/de</li>\n<li>template, component를 생성하는 등 개발자가 사용하는 AEM의 IDE 역할을 한다.</li>\n</ul>\n</li>\n<li>Package 매니저 콘솔\n<ul>\n<li>경로 : /crx/packmgr/index.jsp</li>\n<li>배포 관련하여 패키지를 관리하는 콘솔</li>\n<li>‘Upload package’를 통해 zip파일인 패키지를 업로드할 수 있고, 업로드 되고 나면 install 버튼을 눌러 설치가능하다.</li>\n</ul>\n</li>\n</ol>","excerpt":"AEM 을 소개함에 있어 해당 과정은 Udemy의 https://www.udemy.com/course/adobe-experience-manager-63 과정을\n영어가 어려운 사람들을 위해 한국어로 정리하는 데 목적이 있음을 밝힌다. AEM 관련해서 체계적으로 정리해둔 블로그를 찾지 못했기 때문이기도 하다. AEM 소개 AEM은 ‘Adobe Experience Manager’ 의 약어이며, 어도비 사에서 만든 Java 기반의 CMS 솔루션이다.\nAEM은 상용 웹 사이트를 만드는 데 많이 사용되며 웹 사이트의 콘텐츠와 asset 들을 관리하기에 용이하며 배포까지 지원한다. 웹사이트와 CMS 웹 사이트에는 3가지 종류가 있다. Static 웹 사이트\n: 정적 리소스로만 이루어진 웹 사이트이다. Dynamic 웹 사이트\n: 클라이언트/서버의 스크립트를 통해 동적으로 웹 사이트의 콘텐츠를 관리하는 웹 사이트이다. CMS template을 생성할 수 있다 재사용 가능한 Component를 생…","frontmatter":{"date":"October 20, 2024","title":"[AEM] Adobe Experience Manager","categories":"WEB","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/aem1/"}},"next":{"id":"9882074b-675d-51f4-91ae-17e30d1eaa94","html":"<p>개발, 검증계와 동일한 prometheus의 yaml파일로 운영에서 pod 생성시 CrashLoopbackOff 상태에 빠지게 된다.\n<br>\nconfigmap-reload 컨테이너를 제외시키고 prometheus pod의 로그만 확인 시, ‘/mnt/pv/… file not found’ 와 같은 에러가 발생했다.\n실제 pod에서는 컨테이너 기동 시에 해당 tsdb를 찾으려고 하는 모양인데 실제 volume에는 해당 파일이 없는 것으로 pv debugger를 활용하여 확인하였다.</p>\n<blockquote>\n<h4 id=\"pv-debugger-활용\" style=\"position:relative;\"><a href=\"#pv-debugger-%ED%99%9C%EC%9A%A9\" aria-label=\"pv debugger 활용 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PV debugger 활용</h4>\n<p>PV에 직접 접근할 방법이 별도로 없기 떄문에, busybox 이미지를 활용하여 문제가 되는 prometheus의 pvc를 volume으로 설정, mount하여 접근한다.</p>\n</blockquote>\n<ul>\n<li>결국 tsdb의 path로 마운트된 볼륨에서 해당 경로를 백업한 뒤 모두 비워주고 Pod를 기동하니, 새로운 데이터를 쌓으면서 정상적으로 pod가 기동됨을 확인하였다.</li>\n</ul>","frontmatter":{"date":"October 14, 2024","title":"[Error] Prometheus CrashLoopbackOff","categories":"Error DevOps","author":"jjunyong","emoji":"🧢"},"fields":{"slug":"/error-prometheus/"}},"prev":{"id":"83b292de-808a-5f49-8884-5c21a31ca3d7","html":"<h2 id=\"1-ansible-설치\" style=\"position:relative;\"><a href=\"#1-ansible-%EC%84%A4%EC%B9%98\" aria-label=\"1 ansible 설치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Ansible 설치</h2>\n<ul>\n<li>‘Community Ansible’을 많이들 쓰지만 시험은 컨테이너 기반의 <code class=\"language-text\">Red hat Ansible Automatin Platform</code>을 사용한다.\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">dnf <span class=\"token parameter variable\">-y</span> <span class=\"token function\">install</span> ansible-*  <span class=\"token comment\"># ansible-navigator를 설치하기 위함 </span>\n<span class=\"token function\">podman</span> login utility.lab.example.com\nansible-navigator images <span class=\"token comment\"># 실행환경 컨테이너 이미지 다운로드</span></code></pre></div>\n</li>\n</ul>\n<h2 id=\"2-인벤토리\" style=\"position:relative;\"><a href=\"#2-%EC%9D%B8%EB%B2%A4%ED%86%A0%EB%A6%AC\" aria-label=\"2 인벤토리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 인벤토리</h2>\n<ul>\n<li>인벤토리를 통해 관리 대상 호스트를 지정한다.</li>\n<li>정적 인벤토리 : 직접 ip, hostname 등록</li>\n<li>동적 인벤토리 : 직접 만들지 않고 Inventory Provider에게 질의를 통해 파악한다.\n<ul>\n<li>ex) vsphere(linux), AD(windows)에 ansible이 물어봐서 호스트를 지정함</li>\n</ul>\n</li>\n<li>대괄호를 통해 인벤토리 그룹을 묶는다.\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>webservers<span class=\"token punctuation\">]</span>\nweb1.example.com\nweb2.example.com\n<span class=\"token number\">192.0</span>.2.42\n<span class=\"token punctuation\">[</span>db-servers<span class=\"token punctuation\">]</span>\ndb1.example.com\ndb2.example.com</code></pre></div>\n</li>\n<li>중첩그룹 : 그룹을 묶은 그룹 ( children keyword )\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>usa<span class=\"token punctuation\">]</span>\nwashington1.example.com\nwashington2.example.com\n<span class=\"token punctuation\">[</span>canada<span class=\"token punctuation\">]</span>\nontario01.example.com\nontario02.example.com\n<span class=\"token punctuation\">[</span>north-america:children<span class=\"token punctuation\">]</span>\ncanada\nusa</code></pre></div>\n</li>\n<li>범위를 사용한 간소화\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>usa<span class=\"token punctuation\">]</span>\nwashington<span class=\"token punctuation\">[</span><span class=\"token number\">1</span>:2<span class=\"token punctuation\">]</span>.example.com\n\n<span class=\"token punctuation\">[</span>canada<span class=\"token punctuation\">]</span>\nontario<span class=\"token punctuation\">[</span>01:02<span class=\"token punctuation\">]</span>.example.com\n\n<span class=\"token punctuation\">[</span>korea<span class=\"token punctuation\">]</span>\n<span class=\"token number\">192.168</span>.<span class=\"token punctuation\">[</span><span class=\"token number\">4</span>:7<span class=\"token punctuation\">]</span>.<span class=\"token punctuation\">[</span><span class=\"token number\">0</span>:255<span class=\"token punctuation\">]</span> <span class=\"token comment\"># 192.168.4.0~192.168.7.255</span></code></pre></div>\n</li>\n<li>인벤토리는 반드시 등록 후 확인하여야 한다.\n<ul>\n<li>ansible 명령을 사용하는 방식 (구버전)\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ansible <span class=\"token parameter variable\">-i</span> inventory<span class=\"token punctuation\">(</span>inventory <span class=\"token function\">file</span> name<span class=\"token punctuation\">)</span> --list-hosts web </code></pre></div>\n</li>\n<li>all 그룹, ungrouped 그룹이라는 기본 그룹이 존재한다.</li>\n<li>ansible-navigator를 사용하는 방식\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token builtin class-name\">alias</span> <span class=\"token operator\">=</span> <span class=\"token string\">'ansible-navigator inventory -m stdout'</span>  <span class=\"token comment\"># ani alias 만들어 두어야 편하다. </span>\nani <span class=\"token parameter variable\">-i</span> inventory<span class=\"token punctuation\">(</span>filename<span class=\"token punctuation\">)</span> <span class=\"token parameter variable\">--graph</span> canada</code></pre></div>\n</li>\n</ul>\n</li>\n<li>ansible- 로 시작하는 여러 명령어가 많이 있었는데( ex. ansible-playbook. ansible-doc, ansible-inventory … ) 그걸 통일하기 위해 ansible-navigator 도입했으나, 실상 또 그 뒤에 한 번더 configre, playbook, inventory 등을 붙여줘야 됨</li>\n</ul>\n<h2 id=\"3-ansible-구성-파일-관리\" style=\"position:relative;\"><a href=\"#3-ansible-%EA%B5%AC%EC%84%B1-%ED%8C%8C%EC%9D%BC-%EA%B4%80%EB%A6%AC\" aria-label=\"3 ansible 구성 파일 관리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. Ansible 구성 파일 관리</h2>\n<h3 id=\"ansiblecfg\" style=\"position:relative;\"><a href=\"#ansiblecfg\" aria-label=\"ansiblecfg permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ansible.cfg</h3>\n<ul>\n<li>4군데의 위치에 존재할 수 있으며 어떤 경로의 ansible.cfg를 현재 ansible core에서 참조하고 있는 지는 <code class=\"language-text\">ansible --version</code> 명령으로 확인 가능\n<ul>\n<li>그중 /etc/ansible/ansible.cfg -> 제일 낮은 우선순위</li>\n<li>touch ~/.ansible.cfg 를 한 이후에 <code class=\"language-text\">ansible --version</code>를 해보면 config file을 ~/ 경로에서 찾음을 알 수 있음</li>\n<li>touch ansible.cfg 를 현재 디렉토리에서 한 이후에 <code class=\"language-text\">ansible --version</code>을 해보면 ansible.cfg를 현재 디렉토리에서 찾음을 알 수 있음</li>\n<li>환경 변수 설정이 가장 우선순위가 높다 ( ex. ANSIBLE_CONFIG=/tmp/ansible.cfg &#x26;&#x26; export ANSIBLE_CONFIG )</li>\n</ul>\n</li>\n<li>기본적으로 작성할 수 있어야 한다. 아래는 예시이다.\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">[</span>defaults<span class=\"token punctuation\">]</span>\ninventory = ./inventory  <span class=\"token comment\"># 이 설정을 해주게 되면 이제 ani -i inventory 와 같이 직접 inventory 파일 설정 안해줘도 됨 </span>\nremote_user = user <span class=\"token comment\"># ssh 일반 user </span>\nask_pass = false <span class=\"token comment\"># 시험은 true 라고 해야 함. false는 공개키 설정을 했을 때만 가능 </span>\n\n<span class=\"token punctuation\">[</span>privilege_escalation<span class=\"token punctuation\">]</span>\nbecome = true <span class=\"token comment\"># 권한상승 여부</span>\nbecome_method = sudo <span class=\"token comment\"># sudo로 권한상승 할 것임</span>\nbecome_user = root \nbecome_ask_pass = false <span class=\"token comment\"># sudoers 파일에 NOPASSWD 설정이 wheel group에 되어 있을 때만 false </span></code></pre></div>\n</li>\n</ul>\n<blockquote>\n<p>참고 1 : wheel group</p>\n<ul>\n<li>관리자 계정</li>\n</ul>\n</blockquote>\n<blockquote>\n<p>참고 2: Ansible ad-hoc</p>\n<ul>\n<li>playbook 없이도 단순 작업을 할 수 있게 해줌</li>\n<li>ad-hoc을 문서화한게 playbook으로 이해햐면 됨. 아래와 같은 m(모듈)과 a(명령어)를 정리한 것</li>\n</ul>\n<p>ex ) ansible lunch -m command -a ‘df -h’</p>\n</blockquote>\n<h3 id=\"ansible-navigatoryaml\" style=\"position:relative;\"><a href=\"#ansible-navigatoryaml\" aria-label=\"ansible navigatoryaml permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>ansible-navigator.yaml</h3>\n<ul>\n<li>3군데에 존재할 수 있다.\n<ul>\n<li>ANSIBLE_NAVIGATOR_CONFIG 환경 변수</li>\n<li>현재 디렉토리의 ansible-navigator.yaml</li>\n<li>홈 디렉토리의 .ansible-navigator.yaml</li>\n</ul>\n</li>\n</ul>\n<blockquote>\n<p>참고 3 : VI editor tab 설정\n$HOME/.vimrc 파일에 <code class=\"language-text\">autocmd FileType yaml setlocal ai ts=2 sw=2 et sts=2 cuc</code>, <code class=\"language-text\">set nu</code> 행 추가\n<code class=\"language-text\">set cc=</code>를 vi 에디터 사용 중에 입력하면 빨간 라인 사라짐</p>\n</blockquote>\n<h2 id=\"4-playbook\" style=\"position:relative;\"><a href=\"#4-playbook\" aria-label=\"4 playbook permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>4. Playbook</h2>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> playbook 전체 에 대한 간단한 설명\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> inventory에 등록한 그룹<span class=\"token punctuation\">,</span> host명\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> 작업(모듈) 1에 대한 설명\n      <span class=\"token key atrule\">모듈명(FQDN형식으로 적어야함)</span><span class=\"token punctuation\">:</span> \n        <span class=\"token key atrule\">argument1</span><span class=\"token punctuation\">:</span> 값\n        <span class=\"token key atrule\">argument2</span><span class=\"token punctuation\">:</span> 값 \n    \n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> 작업(모듈) 2에 대한 설명\n      <span class=\"token key atrule\">모듈명</span><span class=\"token punctuation\">:</span> \n        <span class=\"token key atrule\">argument1</span><span class=\"token punctuation\">:</span> 값\n        <span class=\"token key atrule\">argument2</span><span class=\"token punctuation\">:</span> 값 </code></pre></div>\n<ul>\n<li><code class=\"language-text\">ansible-navigator doc -m stdout dnf</code> -> <code class=\"language-text\">/EXAMPLE</code> 와 같이 모듈의 사용법 알아내기</li>\n<li>playbook을 실행하기 전 문제가 없는지 테스트를 해야 한다.\n<ul>\n<li>구문 체크 : <code class=\"language-text\">ansible-navigator run -m stdout webserver.yml --syntax-check</code> or <code class=\"language-text\">ansible-playbook --syntax-check webserver.yaml</code></li>\n<li>-C : <code class=\"language-text\">ansible-navigator run -C -m stdout last.yaml</code></li>\n</ul>\n</li>\n<li>멱등성이 있기 때문에 playbook은 1번만 실행하지 않고 2번 이상 실행을 통해서 changed의 상태 값을 체크한다.</li>\n</ul>\n<h3 id=\"다중-플레이북\" style=\"position:relative;\"><a href=\"#%EB%8B%A4%EC%A4%91-%ED%94%8C%EB%A0%88%EC%9D%B4%EB%B6%81\" aria-label=\"다중 플레이북 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>다중 플레이북</h3>\n<ul>\n<li>service 모듈\n<ul>\n<li>서비스의 중지 기동과 관련된 모듈</li>\n<li>list사용이 안되기 때문에 반복문을 사용하여 작성한다.</li>\n</ul>\n</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> 인트라넷 서비스 구성하기 \n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> servera.lab.example.com\n  <span class=\"token key atrule\">become</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd firewalld 설치 \n      <span class=\"token key atrule\">ansible.builtin.dnf</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span>\n          <span class=\"token punctuation\">-</span> httpd\n          <span class=\"token punctuation\">-</span> firewalld\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> latest\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Test html 페이지 설정\n      <span class=\"token key atrule\">ansible.builtin.copy</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">content</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"Welcome to the example.com intranet!\\n\"</span>\n        <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> /var/www/html/index.html\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Firewall 실행\n      <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> firewalld\n        <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> started\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Firewall http 설정 \n      <span class=\"token key atrule\">ansible.posix.firewalld</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">service</span><span class=\"token punctuation\">:</span> http\n        <span class=\"token key atrule\">permanent</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> enabled\n        <span class=\"token key atrule\">immediate</span><span class=\"token punctuation\">:</span> yes\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd 실행 \n      <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd\n        <span class=\"token key atrule\">enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> started\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> 웹서버 구성 test \n      <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> localhost\n      <span class=\"token key atrule\">become</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\n      <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Connect to intranet web server\n      <span class=\"token key atrule\">ansible.builtin.uri</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">url</span><span class=\"token punctuation\">:</span> http<span class=\"token punctuation\">:</span>//servera.lab.example.com\n        <span class=\"token key atrule\">return_content</span><span class=\"token punctuation\">:</span> yes\n        <span class=\"token key atrule\">status_code</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span>\n</code></pre></div>\n<h2 id=\"5-변수-및-팩트\" style=\"position:relative;\"><a href=\"#5-%EB%B3%80%EC%88%98-%EB%B0%8F-%ED%8C%A9%ED%8A%B8\" aria-label=\"5 변수 및 팩트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>5. 변수 및 팩트</h2>\n<ul>\n<li>\n<p>변수의 우선 순위 gruop_vars &#x3C; host_vars &#x3C; playbook 선언(직접 &#x3C; 파일) &#x3C; CLI 명령 이다.</p>\n</li>\n<li>\n<p>group_vars, host_vars를 사용하여 호스트와 그룹 별로 변수를 설정한다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">group_vars/\n├── webservers/      <span class=\"token comment\"># webservers 그룹용 디렉토리</span>\n│   ├── apache.yml\n│   └── php.yml\n└── dbservers/       <span class=\"token comment\"># dbservers 그룹용 디렉토리</span>\n    ├── mysql.yml\n    └── backup.yml\n\nhost_vars/\n├── web01/           <span class=\"token comment\"># web01 호스트용 디렉토리</span>\n│   ├── main.yml\n│   └── ssl.yml\n└── db01/            <span class=\"token comment\"># db01 호스트용 디렉토리</span>\n    ├── main.yml\n    └── backup.yml</code></pre></div>\n</li>\n<li>\n<p>플레이북에서의 변수 사용\n: 직접 선언 또는 파일 선언</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> vars demo\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">vars</span><span class=\"token punctuation\">:</span>   <span class=\"token comment\"># 직접 선언</span>\n    <span class=\"token key atrule\">user</span><span class=\"token punctuation\">:</span> joe\n    <span class=\"token key atrule\">my_color</span><span class=\"token punctuation\">:</span> black\n  \n  <span class=\"token key atrule\">vars_files</span><span class=\"token punctuation\">:</span> <span class=\"token comment\"># 파일 선언</span>\n    <span class=\"token punctuation\">-</span> myvar.yaml\n\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token comment\"># This line will read: Creates the user joe</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Creates the user <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> user <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n      <span class=\"token key atrule\">user</span><span class=\"token punctuation\">:</span>\n        <span class=\"token comment\"># This line will create the user named Joe</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ user }}\"</span></code></pre></div>\n</li>\n<li>\n<p>명령어에서의 사용</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">an run myvar.yaml <span class=\"token parameter variable\">-e</span> <span class=\"token assign-left variable\">package</span><span class=\"token operator\">=</span>apache </code></pre></div>\n</li>\n</ul>\n<h3 id=\"vault\" style=\"position:relative;\"><a href=\"#vault\" aria-label=\"vault permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Vault</h3>\n<p>: Ansible에서 secret으로 변수를 관리할 때 사용하기 위한 개념이다.</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">ansible-vault create secret.yaml  <span class=\"token comment\"># 비밀번호 설정</span>\nansible-vault view secret.yaml <span class=\"token comment\"># 비밀번호 입력 </span>\nansible-vault view --vault-password-file my.key secret.yaml <span class=\"token comment\"># key 파일로 관리 </span></code></pre></div>\n<ul>\n<li>보통은 vault 키 파일은 ansible.cfg에 경로를 설정한다.\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span>defaults<span class=\"token punctuation\">]</span>\ninventory <span class=\"token operator\">=</span> ./inventory\nremote_user <span class=\"token operator\">=</span> devops\nvault_password_file <span class=\"token operator\">=</span> ./my.key</code></pre></div>\n</li>\n<li>vault를 활용한 user 생성 playbook\n<ul>\n<li>node의 /etc/login.defs의 ENCRYPT_METHOD의 알고리즘이 무엇인지 확인 후 password에 알고리즘을 설정해주어야 한다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> create user by ansible vault\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> serverd.lab.example.com\n  <span class=\"token key atrule\">vars_files</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> secret.yaml \n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> create new user\n      <span class=\"token key atrule\">ansible.builtin.user</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{id}}\"</span>\n        <span class=\"token key atrule\">group</span><span class=\"token punctuation\">:</span> wheel\n        <span class=\"token key atrule\">password</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ password | password_hash('sha512') }}\"</span></code></pre></div>\n</li>\n</ul>\n<h3 id=\"팩트\" style=\"position:relative;\"><a href=\"#%ED%8C%A9%ED%8A%B8\" aria-label=\"팩트 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>팩트</h3>\n<p>: 관리 대상 node의 시스템 정보를 자동으로 수집하는 변수</p>\n<ul>\n<li>\n<p>fact 확인하기</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> collect fact\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> serverd.lab.example.com\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> show me fact\n      <span class=\"token key atrule\">debug</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">var</span><span class=\"token punctuation\">:</span> ansible_facts</code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> show some facts \n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Prints various Ansible facts\n    <span class=\"token key atrule\">debug</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">msg</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">></span> <span class=\"token comment\"># '>'이면 미개행(한줄처리)  '|' 이면 여러 줄 쓰면 여러줄 대로 처리 </span>\n        The default IPv4 address of <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> ansible_facts.fqdn <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span>\n        is <span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> ansible_facts.default_ipv4.address <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></code></pre></div>\n</li>\n<li>\n<p>많이 활용되는 Facts</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token comment\"># 1. OS 배포판 및 버전 확인</span>\n<span class=\"token comment\"># 예: Ubuntu 20.04, RHEL 8.4</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'distribution'</span><span class=\"token punctuation\">]</span>         <span class=\"token comment\"># Ubuntu</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'distribution_version'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 20.04</span>\n\n<span class=\"token comment\"># 2. 호스트명 확인</span>\n<span class=\"token comment\"># 시스템의 현재 호스트명</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'hostname'</span><span class=\"token punctuation\">]</span>            <span class=\"token comment\"># webserver01</span>\n\n<span class=\"token comment\"># 3. IP 주소 확인</span>\n<span class=\"token comment\"># 시스템의 기본 IPv4 주소</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'default_ipv4'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'address'</span><span class=\"token punctuation\">]</span>  <span class=\"token comment\"># 192.168.1.100</span>\n\n<span class=\"token comment\"># 4. 메모리 정보 확인</span>\n<span class=\"token comment\"># 전체 및 가용 메모리 (MB)</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'memtotal_mb'</span><span class=\"token punctuation\">]</span>             <span class=\"token comment\"># 16384</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'memfree_mb'</span><span class=\"token punctuation\">]</span>              <span class=\"token comment\"># 8192</span>\n\n<span class=\"token comment\"># 5. CPU 정보</span>\n<span class=\"token comment\"># CPU 개수 및 코어 수</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'processor_count'</span><span class=\"token punctuation\">]</span>         <span class=\"token comment\"># 2</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'processor_cores'</span><span class=\"token punctuation\">]</span>         <span class=\"token comment\"># 4</span>\n\n<span class=\"token comment\"># 6. OS 계열</span>\n<span class=\"token comment\"># RedHat/Debian 계열 구분</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'os_family'</span><span class=\"token punctuation\">]</span>              <span class=\"token comment\"># RedHat</span>\n\n<span class=\"token comment\"># 7. 디스크 마운트 정보</span>\n<span class=\"token comment\"># 루트 파티션 정보</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'mounts'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'mount'</span><span class=\"token punctuation\">]</span>      <span class=\"token comment\"># \"/\"</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'mounts'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'size_total'</span><span class=\"token punctuation\">]</span> <span class=\"token comment\"># 107374182400</span>\n\n<span class=\"token comment\"># 8. 모든 네트워크 인터페이스</span>\n<span class=\"token comment\"># 시스템의 네트워크 인터페이스 목록</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'interfaces'</span><span class=\"token punctuation\">]</span>              <span class=\"token comment\"># [\"eth0\", \"lo\"]</span>\n\n<span class=\"token comment\"># 9. 커널 버전</span>\n<span class=\"token comment\"># 현재 실행 중인 커널 버전</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'kernel'</span><span class=\"token punctuation\">]</span>                  <span class=\"token comment\"># \"4.18.0-305.el8.x86_64\"</span>\n\n<span class=\"token comment\"># 10. 시스템 아키텍처</span>\n<span class=\"token comment\"># x86_64, aarch64 등</span>\nansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'architecture'</span><span class=\"token punctuation\">]</span>            <span class=\"token comment\"># \"x86_64\"</span></code></pre></div>\n</li>\n<li>\n<p>Facts의 활용 예시</p>\n<ul>\n<li>OS 별 패키지 설치\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> OS별 웹 서버 설치\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> webservers\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> RHEL/CentOS에 Apache 설치\n      <span class=\"token key atrule\">yum</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> ansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'os_family'</span><span class=\"token punctuation\">]</span> == \"RedHat\"\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Ubuntu에 Apache 설치\n      <span class=\"token key atrule\">apt</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> apache2\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> ansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'os_family'</span><span class=\"token punctuation\">]</span> == \"Debian\"</code></pre></div>\n</li>\n<li>메모리에 따른 Heap 메모리 설정\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Java 설정\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> application_servers\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Java 힙 크기 설정\n      <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> java.conf.j2\n        <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> /etc/java/java.conf\n      <span class=\"token key atrule\">vars</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">heap_size</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ (ansible_facts['memtotal_mb'] * 0.6) | round | int }}\"</span></code></pre></div>\n</li>\n<li>CPU 코어 수에 따른 웹 서버 설정\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Nginx 워커 프로세스 설정\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> webservers\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Nginx 설정 파일 생성\n      <span class=\"token key atrule\">template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> nginx.conf.j2\n        <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> /etc/nginx/nginx.conf\n      <span class=\"token key atrule\">vars</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">worker_processes</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ ansible_facts['processor_cores'] }}\"</span>\n        <span class=\"token key atrule\">worker_connections</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ ansible_facts['processor_cores'] * 1024 }}\"</span></code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>fact를 playbook에서 사용하지 않는 다면 fact수집을 비활성화 할 수 있다. playbook 안에서 <code class=\"language-text\">gather_facts: no</code>를 설정 해주면 됨.</p>\n</li>\n</ul>\n<h2 id=\"6-작업-제어\" style=\"position:relative;\"><a href=\"#6-%EC%9E%91%EC%97%85-%EC%A0%9C%EC%96%B4\" aria-label=\"6 작업 제어 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>6. 작업 제어</h2>\n<h3 id=\"반복문\" style=\"position:relative;\"><a href=\"#%EB%B0%98%EB%B3%B5%EB%AC%B8\" aria-label=\"반복문 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>반복문</h3>\n<p>: 앞서 service 모듈에 대해서는 list를 쓰는게 안되서 task를 각각 생성해줘야 했다. 이런 경우 반복문이 필요하다.\n반복문을 사용할 때는 **<u>loop 키워드를 각 task 별로 지정</u>**해주게 되고, 보통은 loop에 쓰이는 배열을 아래와 같이 변수로 설정하여서 사용한다.\n꼭 playbook 내가 아닌 group_vars, host_vars에서 설정해도 됨.</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># variables.yaml</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">my_services</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> postfix\n  <span class=\"token punctuation\">-</span> dovecot\n  <span class=\"token punctuation\">-</span> httpd\n\n<span class=\"token comment\"># playbook</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token key atrule\">vars_files</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> vars/variables.yaml\n\n<span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> services are running\n    <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n      <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ item }}\"</span>\n      <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> started\n    <span class=\"token key atrule\">loop</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ my_services }}\"</span></code></pre></div>\n<h3 id=\"조건문--when-\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EA%B1%B4%EB%AC%B8--when-\" aria-label=\"조건문  when  permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조건문 ( when )</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Simple Boolean Task Demo\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">vars</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">run_my_task</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">true</span>\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd package is installed\n      <span class=\"token key atrule\">ansible.builtin.dnf</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> run_my_task</code></pre></div>\n<ul>\n<li>조건문을 위한 연산자\n<ul>\n<li>&#x3C;, >, &#x3C;=, >=, !=, <code class=\"language-text\">is defined</code>, <code class=\"language-text\">is not defined</code>, <code class=\"language-text\">not</code>, <code class=\"language-text\">in</code>, <code class=\"language-text\">and</code>, <code class=\"language-text\">or</code></li>\n<li>in의 예시 조건문\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Demonstrate the \"in\" keyword\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">gather_facts</span><span class=\"token punctuation\">:</span> yes\n  <span class=\"token key atrule\">vars</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">supported_distros</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> RedHat\n      <span class=\"token punctuation\">-</span> Fedora\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Install httpd using dnf<span class=\"token punctuation\">,</span> where supported\n      <span class=\"token key atrule\">ansible.builtin.dnf</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> http\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> ansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'distribution'</span><span class=\"token punctuation\">]</span> in supported_distros and ansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'architecture'</span><span class=\"token punctuation\">]</span> == \"x86_64\"</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<h3 id=\"2가지-이상의-조건들-처리\" style=\"position:relative;\"><a href=\"#2%EA%B0%80%EC%A7%80-%EC%9D%B4%EC%83%81%EC%9D%98-%EC%A1%B0%EA%B1%B4%EB%93%A4-%EC%B2%98%EB%A6%AC\" aria-label=\"2가지 이상의 조건들 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2가지 이상의 조건들 처리</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># and 조건만 여러 개일 때는 - 로 나열할 수 있음</span>\n<span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> ansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'distribution_version'</span><span class=\"token punctuation\">]</span> == \"9.0\"\n  <span class=\"token punctuation\">-</span> ansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'kernel'</span><span class=\"token punctuation\">]</span> == \"5.14.0<span class=\"token punctuation\">-</span>70.13.1.el9_0.x86_64\"\n\n<span class=\"token comment\"># 2개 이상의 and 조건을 or로 묶을 때는 ( ) 사용</span>\n<span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">></span><span class=\"token scalar string\">\n  ( ansible_facts['distribution'] == \"RedHat\" and\n    ansible_facts['distribution_major_version'] == \"9\" )\n  or\n  ( ansible_facts['distribution'] == \"Fedora\" and\n  ansible_facts['distribution_major_version'] == \"34\" )</span></code></pre></div>\n<ul>\n<li>패키지 그룹으로 설치 (디스크 용량 고려)\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> example \n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> database_dev\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> when test \n      <span class=\"token key atrule\">dnf</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'@Container Management'</span>\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> ansible_facts.mounts.0.mount == \"/\"\n        <span class=\"token punctuation\">-</span> ansible_facts<span class=\"token punctuation\">[</span><span class=\"token string\">'mount'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span><span class=\"token string\">'size_available'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">></span>= 1000000000</code></pre></div>\n</li>\n</ul>\n<h3 id=\"register-변수를-활용한-분기\" style=\"position:relative;\"><a href=\"#register-%EB%B3%80%EC%88%98%EB%A5%BC-%ED%99%9C%EC%9A%A9%ED%95%9C-%EB%B6%84%EA%B8%B0\" aria-label=\"register 변수를 활용한 분기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Register 변수를 활용한 분기</h3>\n<p>: task의 실행 결과를 변수에 저장하기 위함. 그리고 그 결과에 따라 playbook 내에서 분기하기 위하여 사용됨</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> register demo\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> localhost\n  <span class=\"token key atrule\">gather_facts</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span> \n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> using command module\n      <span class=\"token key atrule\">command</span><span class=\"token punctuation\">:</span> date \n      <span class=\"token key atrule\">register</span><span class=\"token punctuation\">:</span> aaa\n\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> print aaa value\n      <span class=\"token key atrule\">debug</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">var</span><span class=\"token punctuation\">:</span> aaa</code></pre></div>\n<ul>\n<li>register 변수를 위와 같이 출력했을 때, 아래와 같이 나오며 보통 결과의 성공 여부를 판단할 때 rc값을 기준으로 한다.\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">TASK <span class=\"token punctuation\">[</span>print aaa value<span class=\"token punctuation\">]</span> **********************************************\nok: <span class=\"token punctuation\">[</span>localhost<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span><span class=\"token operator\">></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token string\">\"aaa\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">{</span>\n        <span class=\"token string\">\"changed\"</span><span class=\"token builtin class-name\">:</span> true,\n        <span class=\"token string\">\"msg\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"All items completed\"</span>,\n        <span class=\"token string\">\"results\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n          <span class=\"token punctuation\">{</span>\n          <span class=\"token string\">\"ansible_loop_var\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"item\"</span>,\n          <span class=\"token string\">\"changed\"</span><span class=\"token builtin class-name\">:</span> true,\n          <span class=\"token string\">\"cmd\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"echo This is my item: one\"</span>, <span class=\"token string\">\"delta\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"0:00:00.004519\"</span>,\n          <span class=\"token string\">\"end\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2022-06-29 17:32:54.065165\"</span>, <span class=\"token string\">\"failed\"</span><span class=\"token builtin class-name\">:</span> false,\n          <span class=\"token punctuation\">..</span>.output omitted<span class=\"token punctuation\">..</span>.\n          <span class=\"token string\">\"item\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"one\"</span>,\n          <span class=\"token string\">\"msg\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>,\n          <span class=\"token string\">\"rc\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token number\">0</span>,\n          <span class=\"token string\">\"start\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"2022-06-29 17:32:54.060646\"</span>, <span class=\"token string\">\"stderr\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"\"</span>,\n          <span class=\"token string\">\"stderr_lines\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>,\n          <span class=\"token string\">\"stdout\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token string\">\"This is my item: one\"</span>, <span class=\"token string\">\"stdout_lines\"</span><span class=\"token builtin class-name\">:</span> <span class=\"token punctuation\">[</span>\n                              <span class=\"token string\">\"This is my item: one\"</span>\n                          <span class=\"token punctuation\">]</span>\n          <span class=\"token punctuation\">}</span></code></pre></div>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\"># register를 통한 분기 예시</span>\n<span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Restart HTTPD if Postfix is Running\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Get Postfix server status\n      <span class=\"token key atrule\">ansible.builtin.command</span><span class=\"token punctuation\">:</span> /usr/bin/systemctl is<span class=\"token punctuation\">-</span>active postfix\n      <span class=\"token key atrule\">register</span><span class=\"token punctuation\">:</span> result\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Restart Apache HTTPD based on Postfix status\n      <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> restarted\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> result.rc == 0</code></pre></div>\n</li>\n</ul>\n<h3 id=\"조건문과-반복문의-결합\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EA%B1%B4%EB%AC%B8%EA%B3%BC-%EB%B0%98%EB%B3%B5%EB%AC%B8%EC%9D%98-%EA%B2%B0%ED%95%A9\" aria-label=\"조건문과 반복문의 결합 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조건문과 반복문의 결합</h3>\n<p>: 사용 가능한 공간이 300MiB 이상인 /에 마운트된 파일 시스템이 있는 경우, ansible.builtin.dnf 모듈에서 mariadb-server 패키지를 설치하는 예시</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> install mariadb<span class=\"token punctuation\">-</span>server if enough space on root\n  <span class=\"token key atrule\">ansible.builtin.dnf</span><span class=\"token punctuation\">:</span>\n    <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb<span class=\"token punctuation\">-</span>server\n    <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> latest\n  <span class=\"token key atrule\">loop</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"{{ ansible_facts['mounts'] }}\"</span>\n  <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> item<span class=\"token punctuation\">[</span><span class=\"token string\">'mount'</span><span class=\"token punctuation\">]</span> == \"/\" and item<span class=\"token punctuation\">[</span><span class=\"token string\">'size_available'</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">></span> 300000000</code></pre></div>\n<h3 id=\"핸들러\" style=\"position:relative;\"><a href=\"#%ED%95%B8%EB%93%A4%EB%9F%AC\" aria-label=\"핸들러 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>핸들러</h3>\n<ul>\n<li>다른 작업에서 트리거한 알림에 응답하는 작업이다.</li>\n<li>일반적으로 주요 설정이 변경됐을 때 핸들러 호출을 통해 node 재부팅 및 서비스 재시작에 사용된다.</li>\n<li>tasks가 모두 끝난 뒤에 핸들러의 작업이 실행된다.</li>\n<li>handlers 사용 예시\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> copy demo.example.conf configuration template\n      <span class=\"token key atrule\">ansible.builtin.template</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">src</span><span class=\"token punctuation\">:</span> /var/lib/templates/demo.example.conf.template\n        <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> /etc/httpd/conf.d/demo.example.conf\n      <span class=\"token key atrule\">notify</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> restart mysql\n        <span class=\"token punctuation\">-</span> restart apache\n  <span class=\"token key atrule\">handlers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> restart mysql\n      <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> restarted\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> restart apache\n      <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> httpd\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> restarted</code></pre></div>\n</li>\n<li>handler는 호출 순이 아니라 handlers에 선언된 순서로 실행된다.</li>\n</ul>\n<h3 id=\"작업-오류-처리\" style=\"position:relative;\"><a href=\"#%EC%9E%91%EC%97%85-%EC%98%A4%EB%A5%98-%EC%B2%98%EB%A6%AC\" aria-label=\"작업 오류 처리 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>작업 오류 처리</h3>\n<p>작업의 실패하는 것에 대해서 어떻게 제어할 것인가.</p>\n<ul>\n<li>\n<p>작업 실패 무시</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Latest version of notapkg is installed\n<span class=\"token key atrule\">ansible.builtin.dnf</span><span class=\"token punctuation\">:</span>\n  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> notapkg\n  <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> latest\n<span class=\"token key atrule\">ignore_errors</span><span class=\"token punctuation\">:</span> yes</code></pre></div>\n</li>\n<li>\n<p>작업 실행 후 핸들러 강제 실행</p>\n<ul>\n<li>아래 예시에서 notapkg의 설치는 존재하지 않는 패키지이므로 실패하여서, 원래라면 <code class=\"language-text\">notify handler</code> task로 인한 handler가 실행되지 않아야 하지만, <code class=\"language-text\">force_handlers:yes</code>를 설정함으로써 restart db 핸들러가 실행되게 된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"> <span class=\"token punctuation\">---</span>\n<span class=\"token punctuation\">-</span> <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">force_handlers</span><span class=\"token punctuation\">:</span> yes\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> notify handler\n      <span class=\"token key atrule\">ansible.builtin.command</span><span class=\"token punctuation\">:</span> /bin/true\n      <span class=\"token key atrule\">notify</span><span class=\"token punctuation\">:</span> restart db\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> a task which fails because the package doesn't exist\n      <span class=\"token key atrule\">ansible.builtin.dnf</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> notapkg\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> latest\n\n  <span class=\"token key atrule\">handlers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> restart db\n      <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> restarted</code></pre></div>\n</li>\n<li>\n<p>failed_when</p>\n<ul>\n<li>사용자가 직접 어떤 경우에 실패인지를 관리하기 위한 구문</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run user creation script\n      <span class=\"token key atrule\">ansible.builtin.shell</span><span class=\"token punctuation\">:</span> /usr/local/bin/create_users.sh\n      <span class=\"token key atrule\">register</span><span class=\"token punctuation\">:</span> command_result\n      <span class=\"token key atrule\">failed_when</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"'Password missing' in command_result.stdout\"</span></code></pre></div>\n</li>\n<li>\n<p>fail 모듈</p>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Run user creation script\n      <span class=\"token key atrule\">ansible.builtin.shell</span><span class=\"token punctuation\">:</span> /usr/local/bin/create_users.sh\n      <span class=\"token key atrule\">register</span><span class=\"token punctuation\">:</span> command_result\n      <span class=\"token key atrule\">ignore_errors</span><span class=\"token punctuation\">:</span> yes\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Report script failure\n      <span class=\"token key atrule\">ansible.builtin.fail</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">msg</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"The password is missing in the output\"</span>\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"'Password missing' in command_result.stdout\"</span></code></pre></div>\n</li>\n<li>\n<p>changed_when</p>\n<ul>\n<li>changed_when 구문은 명시적으로 task가 change되었음을 표시하기 위함</li>\n<li>실제 조치가 필요한 변화가 node에서 있는 경우, 이를 추적하기 위한 중요한 도구\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">ansible.builtin.shell</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">cmd</span><span class=\"token punctuation\">:</span> /usr/local/bin/upgrade<span class=\"token punctuation\">-</span>database\n      <span class=\"token key atrule\">register</span><span class=\"token punctuation\">:</span> command_result\n      <span class=\"token key atrule\">changed_when</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"'Success' in command_result.stdout\"</span>\n      <span class=\"token key atrule\">notify</span><span class=\"token punctuation\">:</span>\n        <span class=\"token punctuation\">-</span> restart_database\n  <span class=\"token key atrule\">handlers</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> restart_database\n      <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n        <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n        <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> restarted</code></pre></div>\n</li>\n</ul>\n</li>\n<li>\n<p>block 구문</p>\n<ul>\n<li>block내에 task 여러개를 하나의 task로 묶을 수 있고, 따라서 이를 묶어서 분기 처리 등을 할 수 있다. ( block문에 when을 적용 )</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\">  <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> block example\n  <span class=\"token key atrule\">hosts</span><span class=\"token punctuation\">:</span> all\n  <span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n    <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> installing and configuring DNF versionlock plugin\n      <span class=\"token key atrule\">block</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> package needed by dnf\n        <span class=\"token key atrule\">ansible.builtin.dnf</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> python3<span class=\"token punctuation\">-</span>dnf<span class=\"token punctuation\">-</span>plugin<span class=\"token punctuation\">-</span>versionlock\n          <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> lock version of tzdata\n        <span class=\"token key atrule\">ansible.builtin.lineinfile</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">dest</span><span class=\"token punctuation\">:</span> /etc/yum/pluginconf.d/versionlock.list\n          <span class=\"token key atrule\">line</span><span class=\"token punctuation\">:</span> tzdata<span class=\"token punctuation\">-</span>2016j<span class=\"token punctuation\">-</span><span class=\"token number\">1</span>\n          <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> present\n      <span class=\"token key atrule\">when</span><span class=\"token punctuation\">:</span> ansible_distribution == \"RedHat\"</code></pre></div>\n<ul>\n<li>rescue, always와 함께 block문 사용하기\n<ul>\n<li>rescue는 block문이 실패했을 때 실행되고, always는 항상 실행된다.</li>\n</ul>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token key atrule\">tasks</span><span class=\"token punctuation\">:</span>\n  <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> Upgrade DB\n    <span class=\"token key atrule\">block</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> upgrade the database\n        <span class=\"token key atrule\">ansible.builtin.shell</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">cmd</span><span class=\"token punctuation\">:</span> /usr/local/lib/upgrade<span class=\"token punctuation\">-</span>database\n    <span class=\"token key atrule\">rescue</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> revert the database upgrade\n        <span class=\"token key atrule\">ansible.builtin.shell</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">cmd</span><span class=\"token punctuation\">:</span> /usr/local/lib/revert<span class=\"token punctuation\">-</span>database\n    <span class=\"token key atrule\">always</span><span class=\"token punctuation\">:</span>\n      <span class=\"token punctuation\">-</span> <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> always restart the database\n        <span class=\"token key atrule\">ansible.builtin.service</span><span class=\"token punctuation\">:</span>\n          <span class=\"token key atrule\">name</span><span class=\"token punctuation\">:</span> mariadb\n          <span class=\"token key atrule\">state</span><span class=\"token punctuation\">:</span> restarted</code></pre></div>\n</li>\n</ul>\n</li>\n</ul>\n<hr>\n<p>시험</p>\n<ul>\n<li>실습 익숙해지고 9장의 문제를 잘 보면 됨.</li>\n</ul>","frontmatter":{"date":"November 11, 2024","title":"Ansible 자동화","categories":"Linux DevOps","author":"jjunyong","emoji":"😌"},"fields":{"slug":"/ansible1/"}},"site":{"siteMetadata":{"siteUrl":"https://jjunyong.github.io","comments":{"utterances":{"repo":"jjunyong/jjunyong.github.io"}}}}},"pageContext":{"slug":"/aem1/","nextSlug":"/error-prometheus/","prevSlug":"/ansible1/"}},"staticQueryHashes":["1073350324","1956554647","2938748437"]}