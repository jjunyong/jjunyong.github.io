---
emoji: ğŸ§¢
title: '[AWS architect] 4. Computing'
date: '2022-07-05 20:00:00'
author: jjunyong
tags: AWS
categories: AWS
---
## ê°œìš”
- EC2ì— ì„œë²„ë¥¼ ë°°í¬í•  ë•Œ ê³ ë ¤í•´ì•¼ í•  ì‚¬í•­ì´ ë¬´ì—‡ì¸ê°€?
- EC2ì— ì—°ê²°í•  ë³¼ë¥¨ ìœ í˜•ì„ ì–´ë–»ê²Œ ì•Œ ìˆ˜ ìˆëŠ”ê°€?(EBS)
- ë¹„ìš©ì„ ìµœì í™” í•˜ëŠ” ë°©ë²•ì€ ë¬´ì—‡ì¸ê°€?
- ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ… ì˜µì…˜ì€ ì–´ë””ì„œë¶€í„° ì‹œì‘í•  ìˆëŠ”ê°€?

## EC2
### ì¸ìŠ¤í„´ìŠ¤ ìƒì„± ì‹œ ê³ ë ¤ì‚¬í•­
1. ì´ë¦„/íƒœê·¸
  - íƒœê·¸ ë£° ì§€ì • : enterpriseë ˆë²¨ì—ì„œëŠ” ì¤‘ìš”í–ë‹¤. 
    [ íƒœê·¸ ë£° ì´ë¯¸ì§€ ] 
2. AMI(Amazon Machine Image) : OS image + í•„ìš”í•œ ì„¤ì •
  - enterprise ë ˆë²¨ì—ì„œëŠ” ê¸°ë³¸ AMIì— ë³´ì•ˆ ë“±ì˜ ì„¤ì •ì„ ì¶”ê°€í•˜ì—¬ 'ì‚¬ìš©ì ì§€ì • AMI'ë¡œ ë§Œë“¤ì–´ì„œ ì‚¬ìš©í•œë‹¤.
3. ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ì´í•´
  [ ì¸ìŠ¤í„´ìŠ¤ ìœ í˜• ì´ë¦„ ì´ë¯¸ì§€ ]
  - ì¸ìŠ¤í„´ìŠ¤ íŒ¨ë°€ë¦¬ 
  - ë²”ìš© : T3, M5
  - ë©”ëª¨ë¦¬ ìµœì í™” : R5 
  - ìŠ¤í† ë¦¬ì§€ ìµœì í™” : I3 
  - ì»´í“¨íŒ… ìµœì í™” : C5
  - ê°€ì† ì»´í“¨íŒ… : G4, F1
  - ì¸ìŠ¤í„´ìŠ¤ ì„¸ëŒ€ : ìµœì‹  ì„¸ëŒ€ë¥¼ ì“°ëŠ” ê²ƒì´ ì˜¤íˆë ¤ ë¹„ìš©ì´ ë” ì¤„ì–´ë“¬. 
  - ì¶”ê°€ ì†ì„± : g(graviton), a(amd) ë“±
  - ì¸ìŠ¤í„´ìŠ¤ í¬ê¸° : xlarge, 2xlarge, 16xlarge -> í•œë‹¨ê³„ ì˜¬ë¼ê°ˆ ë•Œ ì„±ëŠ¥/ê°€ê²©ì´ 2ë°° 

4. EC2 í‚¤í˜ì–´
  - private keyë¥¼ ë¡œì»¬ì— ë‘ê³  public keyë¥¼ ì„œë²„ì— ë‘ì–´ ì¸ì¦í•˜ëŠ” ë°©ì‹ì´ë‹¤.
  - SSM(Session Manager)ì´ ë” ì•ˆì „í•œ ë°©ë²•ì´ë‹¤.   

5. Tenancy
  - ê³µìœ  í…Œë„Œì‹œ
  - ì „ìš© ì¸ìŠ¤í„´ìŠ¤
  - ì „ìš© í˜¸ìŠ¤íŠ¸
6. ë°°ì¹˜ ê·¸ë£¹ : ì¸ìŠ¤í„´ìŠ¤ ê°„ì˜ ê±°ë¦¬ë¥¼ ì„ íƒê°€ëŠ¥í•˜ë‹¤. 
7. ì‚¬ìš©ì ë°ì´í„° : AMIë¥¼ ì‚¬ìš©ì ë°ì´í„°ì— ì˜í•´ ë™ì ìœ¼ë¡œ í™œìš©í•  ìˆ˜ ìˆë‹¤. 

### AWS Compute optimizer
ë¹„ìš©ê³¼ ì„±ëŠ¥ ê´€ë ¨í•´ì„œ awsì—ì„œ ì¶”ì²œí•˜ëŠ” ì»´í“¨íŒ… ë¦¬ì†ŒìŠ¤ë¥¼ í™•ì¸í•  ìˆ˜ ìˆë‹¤. 


### ì¸ìŠ¤í„´ìŠ¤ ë©”íƒ€ë°ì´í„°

`curl https://169.254.169.254/laetst` ì¹˜ë©´ dynamicê³¼ meta-dataê°€ ë‚˜ì˜¤ê³ 
ë‹¤ì‹œ curl `https://169.254.169.254/laetst/meta-data`ë¥¼ ì¹˜ë©´ ì–´ë–¤ ë©”íƒ€ë°ì´í„°ë¥¼ ë°›ì„ ìˆ˜ ìˆëŠ” ì§€ í™•ì¸ ê°€ëŠ¥í•˜ë‹¤.
ì´ê²ƒì„ í†µí•´ì„œ ê¸°íƒ€ í•„ìš”í•œ ì—…ë¬´ ìë™í™”ì™€ ê°™ì€ ê²ƒì— í™œìš©í•  ìˆ˜ ìˆë‹¤. 

### Amazon EBS
- EC2ì™€ ê°™ì€ AZ ì•ˆì— ì¡´ì¬í•œë‹¤. 
- Type
  - EBS SSD : ë¶€íŒ… volumeìœ¼ë¡œëŠ” ì´ê²ƒë§Œ ì‚¬ìš© ê°€ëŠ¥
    - gp2 -> gp3 : ìš©ëŸ‰ì´ ëŠ˜ì–´ë‚˜ë©´ ì„±ëŠ¥ë„ ëŠ˜ì–´ë‚˜ëŠ” íŠ¹ì§•ì„ ê°€ì§„ë‹¤. 
    - io1,io2 : ê³ ì„±ëŠ¥ ë””ìŠ¤í¬ê°€ í•„ìš”í•œ ê²½ìš° ìš©ëŸ‰ê³¼ ì„±ëŠ¥(IOPS)ì„ ë”°ë¡œ ì§€ë¶ˆ í•  ìˆ˜ ìˆë‹¤. 
  - EBS HDD 
    - ë¹ ë¥¸ accessê°€ í•„ìš”í•˜ì§€ ì•Šì„ ë•Œ ì‚¬ìš©
    - st1, sc1 : sc1 íƒ€ì…ì´ ë” ì €ë ´í•˜ë‹¤. 

### ì¸ìŠ¤í„´ìŠ¤ ìŠ¤í† ì–´ ë³¼ë¥¨
ì•„ì£¼ ë¹ ë¥¸ ë””ìŠ¤í¬ê°€ í•„ìš”í•œ ê²½ìš° ì¸ìŠ¤í„´ìŠ¤ì™€ ë™ì¼í•œ ë™ì— ìˆëŠ” ë³¼ë¥¨ì„ í™œìš©í•˜ê²Œ í•´ì£¼ëŠ” ë¦¬ì†ŒìŠ¤ë¡œ, ë„¤íŠ¸ì›Œí¬ latencyê°€ ì—†ë‹¤.  
ê·¸ëŸ¬ë‚˜ EBSì™€ ë‹¬ë¦¬ ë¹„ì˜êµ¬ì ì¸ íœ˜ë°œì„± ìŠ¤í† ë¦¬ì§€ì´ë©° ë°±ì—… ìŠ¤ëƒ…ìƒ·ì„ ë¯¸ì§€ì›í•œë‹¤. 

---

## EC2 ìš”ê¸ˆì œ

### êµ¬ë§¤ì˜µì…˜
- ì˜¨ë””ë§¨ë“œ
- Savings plans
- ìŠ¤íŒŸ ì¸ìŠ¤í„´ìŠ¤
  - ìœ íœ´ EC2ë¥¼ 90%ê°€ê¹Œì´ ì €ë ´í•˜ê²Œ ì´ìš© ê°€ëŠ¥í•˜ë‚˜, í•´ë‹¹ EC2ê°€ ì •ê°€ë¡œ í• ë‹¹ì´ ë˜ì–´ì•¼ í•˜ë©´ 2ë¶„ ë’¤ì— AWSì—ì„œ íšŒìˆ˜í•´ê°„ë‹¤.
  - ë‹¹ì¼ ìƒì„±í•´ì„œ í…ŒìŠ¤íŠ¸ë¡œ ì‚¬ìš©í•˜ê¸°ì—ëŠ” ë§¤ìš° ì¢‹ë‹¤. 
---

## AWS lambda
: ì„œë²„ë¦¬ìŠ¤ ì»´í“¨íŒ… 
[226 ì´ë¯¸ì§€]
- api gatewayë¥¼ ë¶™ì´ë©´ ë°”ë¡œ í˜¸ìŠ¤íŒ…ë„ ê°€ëŠ¥í•˜ë‹¤. ë„ë©”ì¸ì´ ë°”ë¡œ ì œê³µë˜ë©° ë§ˆìŒì— ì•ˆ ë“¤ë©´ DNSì—ì„œ CNAMEë“±ë¡í•˜ë©´ ëœë‹¤. 
- ë§¤ requestë§ˆë‹¤ ìµœëŒ€ 15ë¶„ ë™ì•ˆ ì‹¤í–‰, 10Gì˜ ë©”ëª¨ë¦¬ ì‚¬ìš© ê°€ëŠ¥
- ì›¹ì„œë¹„ìŠ¤ ë° API ì„œë²„ì—ë„ í™œìš©ê°€ëŠ¥í•˜ì§€ë§Œ, ë°°ì¹˜(ì§‘ê³„ ë“±), ìë™í™”, ì±—ë´‡(message ë°›ì„ ë•Œ lambdaxíŠ¸ë¦¬ê±°ë§), í…ŒìŠ¤íŠ¸,  ML ë“±ì—ì„œ ë§¤ìš° íš¨ìœ¨ì ì´ë‹¤. 
- ìŒì› ì§‘ê³„ í™œìš© ì˜ˆì‹œ 
  - ë™ì‹œì— 300ê°œ ìŠ¤ë ˆë“œë¡œ 300ê°œ ë¨¸ì‹ ì„ 15ë¶„ë™ì•ˆ ì‚¬ìš©í•˜ëŠ” íš¨ê³¼ë¥¼ ë³¼ ìˆ˜ ìˆìŒ 
  - ê°œì¸ì˜ ì»´í“¨íŒ… íŒŒì›Œë¥¼ ë§¤ìš° íš¨ìœ¨ì ìœ¼ë¡œ í™œìš©ê°€ëŠ¥í•˜ë‹¤. 

---
## ì‹¤ìŠµ
1. VPC ìƒì„± 
2. VPC ì„¤ì •ì—ì„œ DNS - Enable DNS hostnames 
3. subnet ìƒì„±
4. subnet ì„¤ì •ì—ì„œ Enable auto-assign public IPv4 addresss
5. public route table ìƒì„± 
6. ìƒì„±ëœ ë¼ìš°íŒ… í…Œì´ë¸”ì— Rule ì¶”ê°€ 
7. ë¼ìš°íŒ… í…Œì´ë¸”ì„ subnetì— ì—°ê²°(associate)
8. ë³´ì•ˆê·¸ë£¹(sg) ìƒì„± 
  - ìƒì„±ì‹œ VPCë¥¼ Lab VPCë¡œ ì„ íƒ
  - http í—ˆìš© ê·œì¹™ ì¶”ê°€ 
9. EC2 ì¸ìŠ¤í„´ìŠ¤ ìƒì„± 
  - VPC, subnet, ip ìë™ í• ë‹¹, ë³´ì•ˆê·¸ë£¹ ì„¤ì •
  - Adavanced Details - IAM instance profile - EC2InstProfile role ì„ íƒ
-> ì´ê±¸ í•˜ëŠ” ì´ìœ ëŠ” Session Manager ì‚¬ìš© ìœ„í•¨ 

  -  User Data ì— ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ 
10. public ipë¡œ ì›¹ë¸Œë¼ìš°ì €ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ê¸°
11. SSM(Session Manager) ë¡œ ì—°ê²° í…ŒìŠ¤íŠ¸í•˜ê¸°
12. public subnetì— NAT ê²Œì´íŠ¸ì›¨ì´ ìƒì„±
13. private route table ìƒì„± 
  - 0.0.0.0/0 ì— NAT Gateway ë¡œ ë¼ìš°íŒ…ë˜ë„ë¡ ì„¤ì •
14. private route tableì„ subnetì— ì—°ê²°(associate)

15. private ë¦¬ì†ŒìŠ¤ìš© ë³´ì•ˆê·¸ë£¹ ìƒì„±
  - ìœ„ì—ì„œ ìƒì„±í–ˆë˜ sgë¥¼ Chaining
